<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>3RDEYESYSTEM Technical Documentations</title>
        <description>써드아이시스템(3rdeyesys) 기술문서 사이트입니다 - Ncloud 프리미엄 파트너</description>
        <link>https://docs.3rdeyesys.com/</link>
        <atom:link href="https://docs.3rdeyesys.com/feed.xml" rel="self" type="application/rss+xml"/>
        <pubDate>Wed, 20 Dec 2023 16:09:14 +0900</pubDate>
        <lastBuildDate>Wed, 20 Dec 2023 16:09:14 +0900</lastBuildDate>
        <generator>Jekyll v4.2.2</generator>
        
        
        <item>
            <title>MySQL 데이터 저장 디렉토리(datadir) 변경해서 설치하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드) 서버에 MySQL을 설치할 때 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법을 정리해보겠습니다.

## 테스트 환경
- 서버: Rocky Linux 8.8
- DB: MySQL 8.0

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## MySQL 설치
아래와 같은 순서대로 MySQL 8.0 최신 버전을 설치합니다.

``` bash
~# dnf -y upgrade-minimal
~# dnf -y install https://dev.mysql.com/get/mysql80-community-release-el8-9.noarch.rpm
~# dnf module reset mysql
~# dnf module disable mysql
~# dnf -y install mysql-community-server
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-02.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## 데이터 저장 디렉토리 생성
DB 데이터를 저장할 임의의 디렉토리를 생성합니다. /database/mysql 과 같이 생성하고 실제 저장되는 디렉토리는 mysql로 하겠습니다.

``` bash
~# mkdir -p /database/mysql
```
{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-03.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## 디렉토리 소유권 변경
실제 저장되는 디렉토리인 [**mysql**]에 대한 소유권을 변경해야 하는데, 변경하기 전에 현재 상태를 확인해보면 아래와 같이 root:root로 되어 있는 것을 알 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-11.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

아래 명령으로 mysql 디렉토리에 대한 소유권을 mysql:mysql로 변경합니다.
``` bash
~# chown -R mysql:mysql /database/mysql/
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-12.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## 환경 설정 변경
환경 설정 파일 my.cnf 파일을 열어서 [**mysqld**] 항목에 있는 [**datadir**], [**socket**] 두가지의 설정을 위에서 생성한 [**/database/mysql/**] 디렉토리로 변경합니다. 그리고 아래쪽에 로컬에서 접속하기 위한 [**client**] 항목에 대한 [**socket**] 설정도 추가합니다.

``` bash
~# vim /etc/my.cnf

# mysqld용 설정 변경 (위에서 생성한 디렉토리)
[mysqld]
datadir=/database/mysql
socket=/database/mysql/mysql.sock

# 로컬에서 접속하기 위한 client 용 설정 추가
[client]
socket=/database/mysql/mysql.sock
```
{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-04.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}


## MySQL 초기화
아래 명령어로 기본 데이터베이스 생성 등의 초기화 작업을 진행합니다. 이때 위에서 생성한 [**/database/mysql/**] 디렉토리에서 초기화가 진행됩니다.  
초기화 한 후에 디렉토리를 살펴보면 아래와 같이 기본 데이터 베이스 등이 정상적으로 생성된 것을 확인할 수 있습니다.

``` bash
~# mysqld --initialize-insecure --user=mysql
~# ls -al /database/mysql
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-05.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## MySQL 데몬 시작
초기화를 마쳤으면 MySQL 데몬을 시작합니다.

``` bash
~# systemctl start mysqld
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-06.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## MySQL 보안 설정
[**mysql_secure_installation**]은 MySQL의 기본 보안을 설정하는 명령으로, 설정되는 항목은 다음과 같습니다.

- root 계정 패스워드 설정
- 원격 호스트에서 root 계정 접속 차단
- 익명 계정 삭제
- 테스트 DB 등 삭제

``` bash
~# mysql_secure_installation
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-07.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## MySQL 접속
위에서 설정했던 비번으로 접속해보면 [**8.0.35 MySQL Community Server**]인 것을 확인할 수 있습니다.  

[**show databases**] 명령으로 데이터베이스를 확인해보면 기본 데이터베이스 등 각종 시스템 데이터베이스가 모두 정상적으로 나타나는 것을 알 수 있습니다.

``` bash
~# mysql -u root -p

mysql&gt; show databases;
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-08.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## 테스트 DB 생성
데이터베이스 생성도 문제 없이 잘되는지 확인해보기 위해 [**testdb**]를 생성하고, 확인해보겠습니다.

``` bash
mysql&gt; CREATE DATABASE testdb;
mysql&gt; show databases;
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-09.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

### 디렉토리 확인
변경해서 설치한 디렉토리에도 [**testdb**]가 제대로 생성되었는지 확인해보니 아래 화면처럼 정상적으로 생성된 것을 알 수 있습니다.

``` bash
~# ls -al /database/mysql
```

{% include image.html file=&quot;database/ncloud-database-mysql-datadir-change-install-guide-10.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) 서버에 MySQL 데이터 저장 디렉토리(datadir)를 변경해서 설치하는 방법에 대한 가이드&quot; caption=&quot;&quot; %}

## 참고 URL
1. MySQL Yum Repository 다운로드 페이지
	- &lt;a href=&quot;https://dev.mysql.com/downloads/repo/yum/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://dev.mysql.com/downloads/repo/yum/&lt;/a&gt;

2. Installing MySQL on Linux Using the MySQL Yum Repository
	- &lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/linux-installation-yum-repo.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://dev.mysql.com/doc/refman/8.0/en/linux-installation-yum-repo.html&lt;/a&gt;  

3. Rocky Linux 서버에 MySQL 8.0 최신 버전 설치하는 방법
	- &lt;a href=&quot;/database/ncloud-database-mysql-8-latest-version-install-on-rocky-linux.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/database/ncloud-database-mysql-8-latest-version-install-on-rocky-linux.html&lt;/a&gt;      


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}  	</description>
            <pubDate>Wed, 20 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/database/ncloud-database-mysql-datadir-change-install-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/database/ncloud-database-mysql-datadir-change-install-guide.html</guid>
            
            <category>database</category>
            
            <category>mysql</category>
            
            <category>install</category>
            
            <category>rocky_linux</category>
            
            
        </item>
        
        <item>
            <title>Ncloud API Key 접근 제한 설정하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드)를 이용하다보면 여러 가지 정보를 조회하거나 서버를 생성하는 등의 작업을 위해 API를 활용하게 되는 경우가 많습니다. 그런데 이때 사용하는 **API Key를 접근 제한 없이 사용하게 되면 외부에 유출되거나 했을 때 심각한 보안 문제를 일으키게 되므로** 사전에 API Key에 대한 권한을 설정하거나 접근 제한을 설정해서 사용하는 것이 권장됩니다.  

여기서는 API Key를 최소 권한으로 생성하고, 접근 경로를 제한 하는 등의 방법들을 정리해보겠습니다.

## 서브 계정 생성
API Key 보안과 관련해서 가장 중요한 원칙은 메인 계정이 아닌 최소 권한을 가진 서브 계정(Sub Account)에서 API Key를 생성하는 것입니다.  

{% include warning.html title=&quot;&quot; content=&quot;
메인 계정은 최대 권한을 가지기 때문에 메인 계정으로 생성한 API도 메인 계정과 동일한 최대 권한을 가지게 됩니다. 그러므로 메인 계정으로 API Key를 생성하게 되면 이 Key가 유출되었을 때 심각한 문제가 생기기 때문에 반드시 서브 계정에서 API Key를 생성해야 합니다.
&quot; %}

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;
서브 계정(Sub Account)을 생성하는 방법은 아래 문서를 참고하시기 바랍니다.&lt;br /&gt;&lt;br /&gt;
&amp;#8259; &lt;a href=&apos;/management/ncloud_management_sub_account_guide.html&apos; target=&apos;_blank&apos;&gt;Ncloud 서브 계정 (Sub Account) 생성 가이드&lt;/a&gt;
&quot; %}

&lt;br /&gt;
- 테스트를 위해 아래와 같이 서브 계정을 준비하고, 계정을 클릭해서 서브 계정 세부 정보 화면으로 이동합니다.
{% include image.html file=&quot;management/ncloud-management-sub-account-07.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud (네이버 클라우드) Sub Account (서브 계정) 생성 가이드&quot; caption=&quot;&quot; %}

## 계정 권한 설정
서브 계정의 권한은 최소로 설정해야 합니다.  
예를 들어 Object Storage만 접근하는지, VPC Server 관련된 기능만 사용할 것인지, VPC Server 관련된 기능 중에서도 조회 기능만 사용할 것인지, Server 생성 등을 포함한 모든 기능을 사용할 것인지 등의 사용에 필요한 권한을 모두 정리해서 최소한의 권한으로 설정하는 것이 안전합니다.  

우선, 서브 계정 세부 정보 화면에서 아래쪽에 있는 [**정책**] 탭에 있는 [**개별 권한 추가**] 버튼을 클릭합니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-08.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud (네이버 클라우드) Sub Account (서브 계정) 생성 가이드&quot; caption=&quot;&quot; %}

정책 추가 화면에서는 네이버 클라우드에서 기본으로 제공하는 [관리형 정책]과 사용자가 직접 정의하는 [사용자 정의 정책]이 있습니다.  
우선 [관리형 정책]에서 필요한 정책을 선택하고 [추가] 버튼을 클릭합니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-24.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud (네이버 클라우드) Sub Account (서브 계정) 생성 가이드&quot; caption=&quot;&quot; %}

- 정책이 워낙 많기 때문에 가능하면 위쪽의 검색 기능을 이용해서 정책을 찾는 것을 추천합니다.  
여기서는 테스트를 위해 Function으로 검색해서 [NCP_VPC_CLOUD_FUNCTIONS_MANAGER (VPC 기반 Cloud Functions 서비스 내 모든 기능을 이용할 수 있는 권한)]을 선택했습니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-api-gateway-access-control-guide-01.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) Sub Account(서브 계정)를 이용해 API Key 접근 제한 설정하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;management/ncloud-management-sub-account-api-gateway-access-control-guide-02.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) Sub Account(서브 계정)를 이용해 API Key 접근 제한 설정하는 방법&quot; caption=&quot;&quot; %}

## API Gateway 접근 권한 설정
우선, [서브 계정 세부 정보] 화면에서 [수정] 메뉴 버튼을 클릭합니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-api-gateway-access-control-guide-03.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) Sub Account(서브 계정)를 이용해 API Key 접근 제한 설정하는 방법&quot; caption=&quot;&quot; %}

- [**서브 계정 정보**] 수정 화면에서 [**접근 권한**]에 있는 [**API Gateway 접근**]을 체크합니다. 그리고, 되도록이면 [**지정된 Source에서만 접근 가능**] 옵션을 선택하고, 지정된 IP 등을 추가하는 것을 권장합니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-12.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud (네이버 클라우드) Sub Account (서브 계정) 생성 가이드&quot; caption=&quot;&quot; %}

- 위 화면에서 [**추가**] 버튼을 클릭하면 아래와 같이 [**접근 가능 Source 지정**] 팝업이 나타나는데, IP를 입력하거나 VPC Server를 선택하면 됩니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-13.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud (네이버 클라우드) Sub Account (서브 계정) 생성 가이드&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; [**VPC Server**]의 경우 IP 주소로는 접근할 수 없습니다.&lt;br /&gt;
&amp;#8259; 아래 화면처럼 VPC Server 리스트에서 직접 선택해야 접근 가능합니다.&lt;br /&gt;
&amp;#8259; 그러므로 다른 계정의 VPC Server는 접근 가능 리소스에 추가할 수 없습니다.
&quot; %}

{% include image.html file=&quot;management/ncloud-management-sub-account-api-gateway-access-control-guide-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) Sub Account(서브 계정)를 이용해 API Key 접근 제한 설정하는 방법&quot; caption=&quot;&quot; %}

### API Access Key 추가
위에서 [**API Gateway 접근**] 권한을 추가하면 계정 정보 화면에 아래와 같이 [**Access Key**] 탭이 나타나고 [**추가**] 버튼을 클릭하면 [**Access Key**]와 [**Secret Key**]를 생성할 수 있습니다.

{% include image.html file=&quot;management/ncloud-management-sub-account-14.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud (네이버 클라우드) Sub Account (서브 계정) 생성 가이드&quot; caption=&quot;&quot; %}


## 접근 제한 테스트
그러면 위에서 설정했던 접근 제한 설정이 제대로 작동하는지 테스트 해보겠습니다.

### IP 제한
위에서 설정한 [**접근 가능 Source 지정**] 항목에 IP를 설정하지 않거나, 지정되지 않은 IP에서 접근할 경우 아래의 예시와 같은 오류 메시지가 반환됩니다.

- 호출 API: getProductList

``` xml
&lt;Message&gt;
  &lt;error&gt;
      &lt;errorCode&gt;230&lt;/errorCode&gt;
      &lt;message&gt;Forbidden&lt;/message&gt;
      &lt;details&gt;IP not allowed for authentication.&lt;/details&gt;
  &lt;/error&gt;
&lt;/Message&gt;
```

### 계정 권한 제한
계정에 올바른 권한이 설정되지 않았을 경우 아래와 같은 오류 메시지가 반환됩니다.

- 호출 API: createServerInstances

``` xml
&lt;responseError&gt;
  &lt;returnCode&gt;802&lt;/returnCode&gt;
  &lt;returnMessage&gt;You do not have authority about action : [VPCServer:Change/createServerInstance].&lt;/returnMessage&gt;
&lt;/responseError&gt;
```

- 호출 API: getDemandCostList

``` xml
&lt;responseError&gt;
  &lt;returnCode&gt;2210&lt;/returnCode&gt;
  &lt;returnMessage&gt;You do not have authority about action : [NCP_FINANCE_MANAGER].&lt;/returnMessage&gt;
&lt;/responseError&gt;
```


## 주요 API 최소 권한

&lt;div&gt;
  &lt;table class=&quot;simple_table&quot;&gt;
    &lt;thead&gt;
      &lt;tr&gt;        
        &lt;th&gt;API&lt;/th&gt;
        &lt;th&gt;설명&lt;/th&gt;
        &lt;th&gt;Classic/VPC&lt;/th&gt;
        &lt;th&gt;최소 권한&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;      
        &lt;tr&gt;
          &lt;td&gt;getProductList&lt;/td&gt;
          &lt;td&gt;Ncloud 상품 리스트 조회&lt;/td&gt;
          &lt;td&gt;공통&lt;/td&gt;
          &lt;td&gt;없음&lt;/td&gt;
        &lt;/tr&gt; 
         &lt;tr&gt;
          &lt;td&gt;getDemandCostList&lt;/td&gt;
          &lt;td&gt;청구 비용 리스트 조회&lt;/td&gt;
          &lt;td&gt;공통&lt;/td&gt;
          &lt;td&gt;NCP_FINANCE_MANAGER&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td rowspan=&quot;2&quot;&gt;getServerInstanceList&lt;/td&gt;
          &lt;td rowspan=&quot;2&quot;&gt;서버 인스턴스(VM) 리스트 조회&lt;/td&gt;  
          &lt;td&gt;VPC&lt;/td&gt;
          &lt;td&gt;NCP_VPC_SERVER_VIEWER&lt;/td&gt;        
        &lt;/tr&gt;  
        &lt;tr&gt;          
          &lt;td&gt;Classic&lt;/td&gt;
          &lt;td&gt;NCP_SERVER_&lt;strong&gt;OBSERVER&lt;/strong&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td rowspan=&quot;2&quot;&gt;createServerInstances&lt;/td&gt;
          &lt;td rowspan=&quot;2&quot;&gt;서버 인스턴스(VM) 생성&lt;/td&gt;
          &lt;td&gt;VPC&lt;/td&gt;
          &lt;td&gt;NCP_VPC_SERVER_MANAGER&lt;/td&gt;
        &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td&gt;Classic&lt;/td&gt;
          &lt;td&gt;NCP_SERVER_MANAGER&lt;/td&gt;
        &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td rowspan=&quot;2&quot;&gt;Get Action List&lt;/td&gt;
          &lt;td rowspan=&quot;2&quot;&gt;CloudFunction 액션 리스트 조회&lt;/td&gt;
          &lt;td&gt;VPC&lt;/td&gt;
          &lt;td&gt;NCP_VPC_CLOUD_FUNCTIONS_VIEWER&lt;/td&gt;
        &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td&gt;Classic&lt;/td&gt;
          &lt;td&gt;NCP_CLOUD_FUNCTIONS_&lt;strong&gt;MANAGER&lt;/strong&gt;&lt;/td&gt;
        &lt;/tr&gt;    
        &lt;tr&gt;
          &lt;td rowspan=&quot;2&quot;&gt;Post Action&lt;/td&gt;
          &lt;td rowspan=&quot;2&quot;&gt;CloudFunction 액션 실행&lt;/td&gt;
          &lt;td&gt;VPC&lt;/td&gt;
          &lt;td&gt;NCP_VPC_CLOUD_FUNCTIONS_MANAGER&lt;/td&gt;
        &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td&gt;Classic&lt;/td&gt;
          &lt;td&gt;NCP_CLOUD_FUNCTIONS_MANAGER&lt;/td&gt;
        &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td&gt;ListBuckets&lt;/td&gt;
          &lt;td&gt;ObjectStorage 버킷 리스트 조회&lt;/td&gt;
          &lt;td&gt;공통&lt;/td&gt;
          &lt;td&gt;NCP_OBJECT_STORAGE_VIEWER&lt;/td&gt;
        &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td&gt;createAutoScalingGroup&lt;/td&gt;
          &lt;td&gt;Auto Scaling Group 생성&lt;/td&gt;
          &lt;td&gt;VPC&lt;/td&gt;
          &lt;td&gt;NCP_VPC_AUTOSCALING_MANAGER&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;SMS API&lt;/td&gt;
          &lt;td&gt;Simple &amp; Easy Notification Service 내&lt;br /&gt;SMS 발신번호 등록 기능을 제외한&lt;br /&gt;모든 기능&lt;/td&gt;
          &lt;td&gt;공통&lt;/td&gt;
          &lt;td&gt;NCP_SENS_MANAGER&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;geoLocation&lt;/td&gt;
          &lt;td&gt;지정한 IP의 위치 정보 조회&lt;/td&gt;
          &lt;td&gt;공통&lt;/td&gt;
          &lt;td&gt;NCP_GEOLOCATION_MANAGER&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/div&gt;

## 참고 URL
1.  Ncloud Sub Account 사용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/ko/subaccount-overview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/ko/subaccount-overview&lt;/a&gt;

2.  Ncloud API 사용 가이드
	- &lt;a href=&quot;https://api.ncloud-docs.com/docs/api-overview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://api.ncloud-docs.com/docs/api-overview&lt;/a&gt;  


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}
</description>
            <pubDate>Tue, 19 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/management/ncloud-management-sub-account-api-gateway-access-control-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/management/ncloud-management-sub-account-api-gateway-access-control-guide.html</guid>
            
            <category>account</category>
            
            <category>api</category>
            
            <category>security</category>
            
            
        </item>
        
        <item>
            <title>Linux 스토리지(디스크) 추가 상세 가이드</title>
            <description>## 개요
Ncloud(네이버 클라우드)에서 리눅스 서버에 디스크를 추가하는 것은 스토리지 즉, Block Storage를 생성해서 서버에 연결하는 작업이 필요합니다.

## 전체 과정 요약
스토리지(디스크)를 추가하는 전체 과정은 아래와 같이 하이퍼바이저별로 정리할 수 있으며, 각 단계별 상세 설명은 XEN 하이퍼바이저 기반 서버를 이용해서 진행하겠습니다.

{% tabs storage-add %}

{% tab storage-add XEN 하이퍼바이저 %}

``` bash
~# fdisk -l

~# fdisk /dev/xvdb

~# mkfs.xfs /dev/xvdb1

  - CentOS 5.x: mkfs.ext3 /dev/xvdb1
  - CentOS 6.x: mkfs.ext4 /dev/xvdb1
  - CentOS 7.x: mkfs.xfs /dev/xvdb1
  - Rocky Linux: mkfs.xfs /dev/xvdb1
  - Ubuntu : mkfs.ext4 /dev/xvdb1

~# mkdir /mnt/data

~# mount /dev/xvdb1 /mnt/data

~# df -hT

~# vim /etc/fstab
### =============================
UUID=1fd5s61f5d-*** 중략 ***-f84ew13 /mnt/data xfs defaults 1 2

# 또는
/dev/xvdb1 /mnt/data ext4 defaults 1 2
### =============================
```

{% endtab %}

{% tab storage-add KVM 하이퍼바이저 %}

``` bash
~# fdisk -l

~# fdisk /dev/vdb

~# mkfs.xfs /dev/vdb1

  - CentOS 5.x: mkfs.ext3 /dev/vdb1
  - CentOS 6.x: mkfs.ext4 /dev/vdb1
  - CentOS 7.x: mkfs.xfs /dev/vdb1
  - Rocky Linux: mkfs.xfs /dev/vdb1
  - Ubuntu : mkfs.ext4 /dev/vdb1

~# mkdir /mnt/data

~# mount /dev/vdb1 /mnt/data

~# df -hT

~# vim /etc/fstab
### =============================
UUID=1fd5s61f5d-*** 중략 ***-f84ew13 /mnt/data xfs defaults 1 2

# 또는
/dev/xvdb1 /mnt/data ext4 defaults 1 2
### =============================
```

{% endtab %}
{% endtabs %}


## 스토리지 생성, 할당
우선은 네이버 클라우드 콘솔 [Server] - [Server]에서 해당 서버를 선택하고 
[서버 관리 및 설정 변경] - [스토리지 생성]을 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

다음으로 [스토리지 생성] 화면에서 스토리지 종류, 이름, 적용서버, 크기 (최소 10GB, 최대 2000GB) 등을 선택하고 [추가] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-02.png&quot; width=&quot;685&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

앞에서 설정한 스토리지 정보를 다시 살펴보고 이상이 없으면 [확인] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

추가된 스토리지는 [Server] - [Server] 리스트에서 해당 서버를 클릭해 상세정보에서 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

## 스토리지 할당 확인
네이버 클라우드 콘솔에서 할당한 스토리지를 확인하기 위해 putty를 실행해 서버에 접속합니다.  
이후 과정은 모두 서버에 접속한 상태에서 진행하게 됩니다.

fdisk -l 명령어를 실행해보면 아래 화면처럼 /dev/xvdb 디스크가 할당된 것을 확인할 수 있습니다.

``` bash
~# fdisk -l
```

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-05.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

## 디스크 파티션
다음 명령어를 입력해 할당된 디스크에 파티션을 생성합니다.  
파티션 설정에는 기본인 MBR 방식과 2TB 이상의 디스크를 인식하기 위해 사용하는 GPT 방식이 있는데, 네이버 클라우드는 최대 2,000GB까지만 지원하므로 여기서는 기본방식인 MBR을 사용하겠습니다.
``` bash
~# fdisk /dev/xvdb
```
&lt;br /&gt;
### 파티션 생성
파티션을 생성할 때는 여러 단계의 옵션이 있습니다. 일반적으로는 아래와 같은 단계로 진행하면 됩니다.

- 파티션을 새로 생성하기 위해 ‘n’을 입력

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-06.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

- 생성할 파티션 타입에 따라 primary type이면 ‘p’, extended type이면 ‘e’를 입력.  
  (primary type으로 생성하는 것이 일반적이며, primary 영역의 파티션이 부족할 경우 추가로 extended type으로 생성)

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-07.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

- 생성할 파티션 번호와 cylinder 영역을 입력 (일반적으로 추가할 disk 전체를 mount하게 되고, 이 경우 default값을 그대로 사용하므로 Enter 입력)

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-08.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

- ‘w’를 입력해 해당 구성을 적용. 파티션 생성 완료.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-09.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

마지막으로 fdisk -l 명령어로 생성된 파티션을 다시 확인합니다.  
디스크가 /dev/xvdb1 장치로 인식된 것을 확인할 수 있습니다. 

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-10.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

## 디스크 포맷
다음으로 파티션이 생성된 디스크를 포맷하면 되는데, OS별로 명령어가 다르므로 확인 후에 실행해야 합니다.  
여기서는 CentOS 7.x 기준으로 mkfs.xfs 명령어를 사용했습니다.
``` bash
~# mkfs.xfs /dev/xvdb1

- CentOS 5.x: mkfs.ext3 /dev/xvdb1
- CentOS 6.x: mkfs.ext4 /dev/xvdb1
- CentOS 7.x: mkfs.xfs /dev/xvdb1
- Rocky Linux: mkfs.xfs /dev/xvdb1
- Ubuntu : mkfs.ext4 /dev/xvdb1
```

{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-11.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

## 디스크 마운트
다음으로 디스크를 마운트할 포인트 즉, 디렉토리를 원하는 이름으로 생성하고 마운트를 합니다.  
아래에 있는 마운트 경로 (/mnt/data)는 예시입니다. 원하는 경로를 직접 설정하시면 됩니다.
``` bash
~# mkdir /mnt/data
~# mount /dev/xvdb1 /mnt/data
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-12.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

- 마운트된 내역을 확인합니다.

``` bash
~# df -hT
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-13.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

## 마운트 정보 등록
마운트 정보는 설정에 저장하지 않으면 서버가 리부팅될 때 사라지기 때문에 fstab에 저장합니다.  
마운트 정보를 등록할 때 장치명을 사용하는 방법과 장치의 UUID를 사용하는 방법이 있는데, 경우에 따라서는 장치명이 변경될 수도 있어, 이를 대비해 가능하면 UUID로 등록합니다.

### UUID 확인
UUID를 확인하려면 blkid 명령어를 사용합니다.  
여기서 확인한 UUID를 별도로 복사해두었다가 fstab에 입력하게 됩니다.
``` bash
~# blkid /dev/xvdb1
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-14.png&quot; width=&quot;840&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

vi로 /etc/fstab 파일을 열면 다음과 같습니다.  
서버 생성과 함께 장착된 기본 디스크도 UUID로 입력된 것을 확인할 수 있습니다.
``` bash
~# vi /etc/fstab
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-15.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

앞에서 확인하고 복사해둔 추가 디스크의 UUID와 기타 정보를 입력합니다.  
입력을 완료한 후 fstab 파일을 저장하고 빠져 나옵니다.  
(fstab에 입력할때 사용하는 디스크 정보 옵션에 대한 정리는 아래에서 다시 확인할 수 있습니다.)

``` bash
### /etc/fstab

UUID=29f58417-*** 중략 ***38d0f /mnt/data xfs defaults 1 2

# 또는
/dev/xvdb1 /mnt/data ext4 defaults 1 2

```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-add-detail-process-16.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Linux 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}


## fstab 설정 상세정보

/etc/fstab은 부팅 단계에서 마운트되어야 할 볼륨 정보들이 저장되는 곳입니다.  
(OS 이미지에 따라 파일 시스템이 다르기 때문에 주의해야 합니다.)

파일의 각 항목이 의미하는 바는 아래와 같으며 각 항목은 Tab 또는 Space Bar로 구분합니다.

(장치명) (마운트 포인트) (파일시스템 종류) (옵션) (dump 설정) (fsck 설정)

+ 장치명: 장치명은 장치의 UUID를 사용하거나 /dev/xvdb1와 같은 장치이름을 사용합니다.

+ 마운트 포인트: 볼륨을 마운트하고자 하는 위치입니다. 예시에서는 /mnt/data 디렉토리에 마운트했습니다.

+ 파일시스템 종류: OS별로 기본 파일시스템이 다르므로 알맞게 입력합니다.

  - CentOS 5.x : ext3
  - CentOS 6.x : ext4
  - CentOS 7.x : xfs
  - Rocky Linux : xfs  
  - Ubuntu Server / Desktop : ext4

+ 옵션: 예시에서는 default 옵션을 사용하였으며, 해당 옵션에는 rw, nouser, auto, exec, suid 속성이 포함됩니다.  
  각 속성의 내용은 다음과 같습니다. (필요한 옵션만 사용할 시, 각 옵션을 쉼표(,)로 구분하여 작성해주시면 됩니다.)

  - auto : 부팅 시 자동 마운트
  - rw : 읽기, 쓰기 모두 가능하도록 마운트
  - nouser : root 계정만 마운트 가능
  - exec : 파일 실행을 허용
  - suid : SetUID와 SetGID를 허용

+ dump 설정: dump 명령으로 백업을 할 것인지에 대한 설정

  - 0: dump되지 않는 파일 시스템
  - 1: dump 가능한 파일 시스템

+ fsck 설정: 부팅시에 fsck 명령으로 파일시스템에 대한 무결성 검사를 할 것인지에 대한 설정

  - 0 : 부팅 시 fsck 실행하지 않음
  - 1 : 부팅 시 root 파일 시스템을 우선 체크
  - 2 : 부팅 시 root 이외의 파일 시스템을 우선 체크

## 참고 URL
1. Ncloud Block Storage 생성, 추가 가이드
- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/blockstorage-create-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/blockstorage-create-vpc&lt;/a&gt;

## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}
</description>
            <pubDate>Thu, 07 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud_compute_server_storage_add_detail_process.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud_compute_server_storage_add_detail_process.html</guid>
            
            <category>linux</category>
            
            <category>storage</category>
            
            
        </item>
        
        <item>
            <title>Ncloud Security Monitoring WAF 서비스 요금 정보</title>
            <description>## 개요
Ncloud (네이버 클라우드) Security Monitoring 서비스는 무료인 Basic 서비스와 유료인 Managed 서비스가 있고, 그 중에서 유료 서비스인 Managed 서비스는 IDS, Anti-DOS, WAF, Anti-Virus, IPS 등 4가지 서비스를 모두 제공하고 있는데 그 중에서 WAF(Web Application Firewall) 서비스의 이용 요금 구성과 신청 시 주의 사항에 대해 정리해보겠습니다.

## 구성
WAF 서비스 장비는 [**WAF VM + WAF LB**]로 구성되어 있습니다. 따라서 사용 요금도 WAF VM 요금과 WAF LB 요금이 별도로 청구됩니다.

{% include image.html file=&quot;security/ncloud-security-security-monitoring-waf-guide-01.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud (네이버 클라우드) Security Monitoring WAF 구성도&quot; caption=&quot;&quot; %}


## 요금
&lt;div class=&quot;col-sm-12&quot;&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;상품명&lt;/th&gt;
      &lt;th&gt;과금 구간 (Mbps)&lt;/th&gt;
      &lt;th&gt;가격 (월 요금, VAT별도)&lt;/th&gt;
      &lt;th&gt;비고&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
        &lt;td rowspan=&quot;3&quot;&gt;WAF VM&lt;/td&gt;
        &lt;td&gt;0 ~ 300 이하&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;974,800 원&lt;/td&gt;
        &lt;td rowspan=&quot;3&quot;&gt;리전 단위 판매&lt;br /&gt;이중화 기본 제공&lt;br /&gt;(요금은 이중화 가격)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;        
        &lt;td&gt;300 초과 ~ 500 이하&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,474,800 원&lt;/td&gt;        
    &lt;/tr&gt;
    &lt;tr&gt;        
        &lt;td&gt;500 초과 ~ 1,000 이하&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;2,274,800 원&lt;/td&gt;        
    &lt;/tr&gt;  
    &lt;tr&gt;
        &lt;td&gt;WAF LB&lt;/td&gt;
        &lt;td&gt;WAF LB 1개당&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;25,200 원&lt;/td&gt;
        &lt;td&gt;WAF LB개수는 WAF 모니터링을 신청하려는&lt;br /&gt;도메인 개수 또는 인증서 개수를 의미&lt;/td&gt;
    &lt;/tr&gt; 
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

### 과금 구간 기준
과금 구간을 결정, 변경하게 되는 기준은 **`월 기준 in/out 트래픽 중에서 Peak 트래픽입`**니다. 그러므로 월 기준으로 단 한번이라도 신청 구간을 초과할 경우 과금 기준이 변경될 수 있습니다.

### 서브 도메인의 요금
- **개별 인증서**를 사용하는 서브 도메인은 인증서 개수 만큼 WAF LB 요금이 추가 됩니다.
- **Wildcard 인증서**를 사용하는 서브 도메인은 추가 요금 없이, 개수 제한 없이 사용 가능합니다.
- 다만, 서브 도메인 개수나 트래픽에 따라 WAF LB 또는 WAF VM이 추가 되어 요금이 증가할 수 있습니다.

## 요금 예시

&lt;div class=&quot;col-sm-12&quot;&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;해당 월 Peak 트래픽&lt;/th&gt;   
      &lt;th&gt;도메인 또는&lt;br /&gt;인증서 개수&lt;/th&gt;   
      &lt;th&gt;WAF VM 요금 (VAT 별도)&lt;/th&gt;      
      &lt;th&gt;WAF LB 요금 (VAT 별도)&lt;/th&gt;
      &lt;th&gt;합계 (VAT 별도)&lt;br /&gt;&lt;br /&gt;(WAF VM 요금 + WAF LB 요금)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;
        &lt;td&gt;90 Mbps&lt;/td&gt;        
        &lt;td&gt;1개&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,174,800 원&lt;/td&gt;        
        &lt;td style=&quot;text-align:right;&quot;&gt;25,200 원&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,200,000 원&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;90 Mbps&lt;/td&gt;        
        &lt;td&gt;2개&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,174,800 원&lt;/td&gt;        
        &lt;td style=&quot;text-align:right;&quot;&gt;50,400 원&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,225,200 원&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;300 Mbps&lt;/td&gt;        
        &lt;td&gt;1개&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,174,800 원&lt;/td&gt;        
        &lt;td style=&quot;text-align:right;&quot;&gt;25,200 원&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,200,000 원&lt;/td&gt;
    &lt;/tr&gt; 
    &lt;tr&gt;
        &lt;td&gt;301 Mbps&lt;/td&gt;        
        &lt;td&gt;1개&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,474,800 원&lt;/td&gt;        
        &lt;td style=&quot;text-align:right;&quot;&gt;25,200 원&lt;/td&gt;
        &lt;td style=&quot;text-align:right;&quot;&gt;1,500,000 원&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

{% include callout-v2.html type=&quot;warning&quot; level=&quot;3&quot; content=&quot;WAF 이용 요금은 고객 서비스의 서버 정지와 무관하게 청구됩니다. 서버 정지와 함께 Security Monitoring 서비스의 WAF 계약도 함께 해지해야 과금되지 않습니다.&quot; %}

{% include callout-v2.html type=&quot;info&quot; level=&quot;3&quot; content=&quot;SLA 수준이 낮은 [단일구성 WAF서비스]를 이용하고자 하시면, 고객지원으로 문의하셔야 합니다.&quot; %}

## WAF 신청 시 주의 사항

### VPC

- **`Application Load Balancer 사용 필수`**: WAF는 Reverse Proxy 방식으로 사용자별 별도의 WAF 플랫폼을 구성하여 제공하고, HTTP/HTTPS 트래픽에 대한 보안 모니터링을 제공합니다. 따라서 Application Load Balancer를 사용하는 HTTP/HTTPS 서비스에만 제공이 가능합니다.
- **`서비스 도메인 필수`**: WAF 서비스를 사용하려면 사용자 서비스 도메인의 CNAME을 WAF Load Balancer 도메인 정보로 수정하여 트래픽이 WAF를 향하도록 설정해야 합니다. 그러므로 서비스 도메인이 있어야 서비스를 신청할 수 있습니다.
- **서비스 인증서 전달**: HTTPS 서비스 모니터링을 위해 WAF Load Balancer에 인증서를 설치해야 하며, 서비스 신청 시 사용자 서비스의 인증서도 함께 전달해야 합니다.
- **HTTP 80 리스너 설정**: WAF VM과 사용자 서비스 Application Load Balancer 간의 통신은 HTTP 80 port 공인 통신을 사용합니다. 그러므로 사용자 서비스 Application Load Balancer에 HTTP 80 리스너를 기본으로 구성해야 합니다.
- **리다이렉션 설정**: WAF Load Balancer에서 80 포트에 대한 443 리다이렉트 설정도 기본으로 지원하고 있습니다. 따라서 WAF 서비스를 정상적으로 사용하려면 사용자의 Application Load Balancer나 서버에서 HTTP -&gt; HTTPS 리다이렉트가 있는 경우 삭제해야 합니다.
- **HTTP 프로토콜 설정**: HTTPS 모니터링 신청 시, 신청한 Application Load Balancer 리스너에 HTTP 프로토콜 설정이 필요합니다.
- **CNAME 설정**: WAF(V2) 제공을 위해서 고객 대상 도메인에 CNAME 설정을 해야 합니다. 고객 대상 도메인이 Base 도메인인 경우, CNAME 설정이 불가능하오니 A레코드에 WAF VIP로 설정합니다. 그리고, WAF 구성 후 고객에게 CNAME에 등록할 WAF Load Balancer 도메인 설정 정보 전달 예정입니다.


### Classic
- **HTTP/HTTPS 표준 프로토콜 사용 필수**: WAF는 HTTP/HTTPS 표준 프로토콜을 사용하는 웹 서비스에 대한 보안 모니터링을 제공합니다. 따라서 네이버 클라우드 플랫폼의 Load Balancer를 사용 중인 서비스에 대한 모니터링을 하려면 Load Balancer Protocol을 반드시 HTTP, HTTPS로 설정해야 합니다. 만약 TCP, SSL로 설정하는 경우 WAF 서비스를 사용할 수 없습니다.



## 참고 URL
1. Ncloud Security Monitoring 서비스 안내
- &lt;a href=&quot;https://www.ncloud.com/product/security/securityMonitoring&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.ncloud.com/product/security/securityMonitoring&lt;/a&gt;

2. Ncloud Security Monitoring 가이드 
- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/securitymonitoring-overview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/securitymonitoring-overview&lt;/a&gt;


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}</description>
            <pubDate>Thu, 07 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/security/ncloud-security-security-monitoring-waf-price-info.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/security/ncloud-security-security-monitoring-waf-price-info.html</guid>
            
            <category>security</category>
            
            <category>monitoring</category>
            
            
        </item>
        
        <item>
            <title>Linux 스토리지 추가 생성 기본 가이드</title>
            <description>## 개요
네이버 클라우드에서 서버 생성 후에 스토리지를 추가 생성하는 경우가 있는데 이때 사용되는 스토리지는 Block Storage라고 해서 AWS의 EBS(Elastic Block Store)와 유사합니다.

## 스토리지 추가 제약 사항
- XEN 하이퍼바이저 기반 서버의 경우 Bare Metal 서버와 의 Micro 타입 서버에는 스토리지를 추가할 수 없습니다.


## 추가 가능한 최대 사이즈와 개수

&lt;div&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;하이퍼바이저&lt;/th&gt;      
      &lt;th&gt;스토리지 타입&lt;/th&gt;
      &lt;th&gt;미디어 타입&lt;/th&gt;
      &lt;th&gt;최소 크기&lt;/th&gt;
      &lt;th&gt;최대 크기&lt;/th&gt;
      &lt;th&gt;추가 가능 개수&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;
      &lt;td rowspan=&quot;2&quot;&gt;XEN&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;2TB&lt;/td&gt;
      &lt;td&gt;15개&lt;/td&gt;
    &lt;/tr&gt;  
    &lt;tr&gt;     
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;2TB&lt;/td&gt;
      &lt;td&gt;15개&lt;/td&gt;
    &lt;/tr&gt; 
    &lt;tr&gt;
      &lt;td rowspan=&quot;2&quot;&gt;KVM&lt;/td&gt;
      &lt;td&gt;FB1&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;100GB&lt;/td&gt;
      &lt;td&gt;16TB&lt;/td&gt;
      &lt;td&gt;20개&lt;/td&gt;
    &lt;/tr&gt;  
    &lt;tr&gt;     
      &lt;td&gt;CB1&lt;/td&gt;
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;16TB&lt;/td&gt;
      &lt;td&gt;20개&lt;/td&gt;
    &lt;/tr&gt;        
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;


## 리눅스 OS 서버 이미지별 포맷 명령어
리눅스는 OS 즉, 네이버 클라우드에서 제공하는 서버 이미지별로 추가된 스토리지를 포맷하는 명령어가 다릅니다.

{% include callout_v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; CentOS 5.x: mkfs.ext3 /dev/xvdb1 &lt;br /&gt;
&amp;#8259; CentOS 6.x: mkfs.ext4 /dev/xvdb1 &lt;br /&gt;
&amp;#8259; CentOS 7.x: mkfs.xfs /dev/xvdb1 &lt;br /&gt;
&amp;#8259; Rocky Linux: mkfs.xfs /dev/xvdb1 &lt;br /&gt;
&amp;#8259; Ubuntu Server / Desktop: mkfs.ext4 /dev/xvdb1 &lt;br /&gt;
&quot; %}

## ext4 vs XFS 명령어 비교

&lt;div&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;항목&lt;/th&gt;
      &lt;th&gt;ext4&lt;/th&gt;
      &lt;th&gt;XFS&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;&lt;td&gt;포맷&lt;/td&gt;&lt;td&gt;mkfs.ext4&lt;/td&gt;&lt;td&gt;mkfs.xfs&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;마운트&lt;/td&gt;&lt;td&gt;mount&lt;/td&gt;&lt;td&gt;mount&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;리사이즈&lt;/td&gt;&lt;td&gt;resize2fs&lt;/td&gt;&lt;td&gt;xfs_growfs&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;복구&lt;/td&gt;&lt;td&gt;e2fsck&lt;/td&gt;&lt;td&gt;xfs_repair&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;라벨 변경&lt;/td&gt;&lt;td&gt;e2label&lt;/td&gt;&lt;td&gt;xfs_admin -L&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;디버깅&lt;/td&gt;&lt;td&gt;debugfs&lt;/td&gt;&lt;td&gt;xfs_db&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;할당량 설정&lt;/td&gt;&lt;td&gt;quota&lt;/td&gt;&lt;td&gt;quota&lt;/td&gt;&lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

{% include tip.html content=&quot;xfs_growfs 명령어는 파일 시스템의 크기를 줄일 수는 없고 늘릴 수만 있습니다.&quot; %}

## 참고 URL
1.  Ncloud 블록 스토리지 사용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/server-storage-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/server-storage-vpc&lt;/a&gt;


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}    </description>
            <pubDate>Thu, 07 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud_compute_server_storage_add_guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud_compute_server_storage_add_guide.html</guid>
            
            <category>linux</category>
            
            <category>storage</category>
            
            
        </item>
        
        <item>
            <title>Ncloud Cloud DB for MySQL - DB Engine 업그레이드 가이드</title>
            <description>## 개요
Ncloud(네이버 클라우드)의 Cloud DB for MySQL에서는 DB Engine을 업그레이드할 수 있는데, **Minor 버전 업그레이드**(예: 5.7.32 &lt;i class=&apos;fa-solid fa-arrow-right&apos;&gt;&lt;/i&gt; 5.7.40)와 **Major 버전 업그레이드**(예: 5.7.x &lt;i class=&apos;fa-solid fa-arrow-right&apos;&gt;&lt;/i&gt; 8.0.x)가 있습니다. 각각에 대해 업그레이드 하는 방법에 대해 아래쪽에서 살펴보겠습니다.

## 업그레이드 진행 방식
{% include callout-v2.html type=&quot;info&quot; level=&quot;3&quot; content=&quot;
&amp;#8259; 리스트에 있는 전체 서버의 버전이 변경되고, 버전 업그레이드 중인 서버는 접근이 차단 됩니다.&lt;br /&gt;
&amp;#8259; Master DB 는 Standby Master DB 로 전환하여 서비스 접근 차단은 최소한으로 유지합니다.&lt;br /&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;(Master DB Failover 기능으로 변경되는 시간과 동일합니다.)&lt;br /&gt;

&amp;#8259; 업그레이드 작업은 1대씩 순차적으로 진행되고, Server 1대에 5분 내외로 작업 시간이 소요 됩니다.&lt;br /&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;(작업 순서 : Recovery &lt;i class=&apos;fa-solid fa-arrow-right&apos;&gt;&lt;/i&gt; Slave &lt;i class=&apos;fa-solid fa-arrow-right&apos;&gt;&lt;/i&gt; Master)&lt;br /&gt;

&amp;#8259; Stand Alone Server 는 업그레이드 되는 동안 DB 접속이 되지 않습니다.&lt;br /&gt;
&amp;#8259; Major 버전 업그레이드로 인해 DB config 의 default 값이 변경될 수 있습니다.&lt;br /&gt;
&amp;#8259; Stand Alone Server 는 Major 버전 업그레이드 기능을 지원하지 않습니다.&lt;br /&gt;
&quot; %}
## Minor 버전 업그레이드
아래와 같이 Cloud DB for MySQL 서버를 5.7.32 버전으로 준비했습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

DB서버를 선택하고 [**DB 관리**] - [**MySQL Engine Upgrade**] 메뉴를 클릭합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

[**DB 엔진 버전**]에서 업그레이드 가능한 버전을 선택할 수 있는데, 여기서는 [**5.7.40**]을 선택하겠습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-03.png&quot; width=&quot;685&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

업그레이드 중에는 [**Status**]가 [**업그레이드**]로 표시됩니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

업그레이드가 끝나면 아래와 같이 [**DB 엔진 버전**]이 [**5.7.40**]으로 변경되었고, [**Master**]와 [**Standby Master**] 서버가 서로 바뀐 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

## Major 버전 업그레이드
[**Major 버전 업그레이드**] 항목을 체크하고 [**DB 엔진 버전**]에서 업그레이드 가능한 버전에서 [**8.0.32**]를 선택하겠습니다.

### 주의사항
{% include callout-v2.html type=&quot;danger&quot; level=&quot;3&quot; content=&quot;
&amp;#8259; Major 버전 업그레이드로 인한 애플리케이션 호환성 검토를 먼저 진행한 후에 업그레이드 하시는 것을 권장합니다.&lt;br /&gt;
&amp;#8259; Major 버전 업그레이드는 **`고가용성 구성인 경우만 작업이 가능`**합니다.&lt;br /&gt;
&amp;#8259; Major 버전 업그레이드 시 **`이전 버전으로 rollback이 불가능`**합니다.&lt;br /&gt;
&amp;#8259; Major 버전 업그레이드 시 **DB config 의 default 값이 변경될 수** 있습니다.&lt;br /&gt;
&amp;#8259; Major 버전 업그레이드 시 Major 버전 **`업그레이드 전으로 시점 복구가 불가능`**합니다.&lt;br /&gt;
&amp;#8259; Major 버전 업그레이드 시 Major 버전 업그레이드 전의 백업본은 신규 서비스 생성만 가능합니다.
&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-06.png&quot; width=&quot;685&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

[**Major 버전 업그레이드**]는 호환성 체크 등 업그레드 작업에 문제가 없을지 미리 점검을 진행하게 됩니다.

{% include warning.html content=&quot;업그레이드 점검에서 오류가 발견될 경우 업그레이드가 불가능합니다.&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-07.png&quot; width=&quot;485&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

업그레이드 점검이 문제없이 완료되었으면 [**예**] 버튼을 클릭해서 업그레이드를 진행합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-08.png&quot; width=&quot;485&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}

업그레이드가 완료되면 아래와 같이 [**DB 엔진 버전**]이 위에서 선택했던 [**8.0.32**]로 변경된 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-09.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Database Migration 서비스를 이용해 MySQL 8.0에서 클라우드 환경 Cloud DB for MySQL 8.0으로 마이그레이션하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. Ncloud MySQL Engine Upgrade 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/database-database-5-2#mysql-engine-upgrade&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/database-database-5-2#mysql-engine-upgrade&lt;/a&gt;

2. Ncloud Cloud DB for MySQL 기본 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/clouddbformysql-overview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/clouddbformysql-overview&lt;/a&gt;


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}  
</description>
            <pubDate>Wed, 06 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mysql-db-engine-upgrade-guide.html</guid>
            
            <category>database</category>
            
            <category>vpc</category>
            
            <category>MySQL</category>
            
            
        </item>
        
        <item>
            <title>Ncloud VPC 환경에서 서버 생성하는 방법</title>
            <description>## 개요
Ncloud (네이버 클라우드) VPC환경에서 서버를 생성하는 순서를 정리해보겠습니다.  
얼마전 업데이트에서 서버 생성 콘솔 화면에 큰 변화가 생겼기에 그 내용까지 함께 포함했습니다.

## 서버 생성 순서
VPC 환경에서 서버를 생성하려면 Subnet 설정 등 사전에 미리 설정해야 하는 것과 서버 생성 후에 설정해야 하는 것들이 있는데, 순서대로 정리하고 아래쪽에서 차례대로 살펴보겠습니다.

1. VPC 설정
2. Subnet 설정
3. 서버 생성  
  3-1. 서버 인증키 설정
4. ACG (방화벽) 설정


## VPC 설정
VPC (Virtual Private Cloud) 즉, 클라우드 상에서 논리적으로 격리된 고객 전용 네트워크 공간을 먼저 생성하고 해당 공간에 서버를 생성하게 됩니다.  
VPC는 고객의 계정마다 **최대 3개**를 생성할 수 있으며, 각 VPC는 최대 넷마스크 0.0.255.255/16 (IP 65,536개) 크기의 네트워크 주소 공간을 제공합니다.

### VPC 서비스 위치
[**VPC**] 서비스는 [**Console**] - [**Services**] - [**Networking**]에 위치해 있습니다.

그리고, 아래 스샷에서 확인할 수 있듯이 [**VPC**]에는 [**VPC Management**], [**Subnet Management**], [**Network ACL**], [**NAT Gateway**], [**Route Table**], [**VPC Peering**], [**Virtual Private Gateway**] 등의 하부 서비스 메뉴가 있습니다.

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}


## VPC 생성
[**VPC**] - [**VPC Management**] [**VPC 생성**] 버튼을 클릭합니다. 

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

- VPC 생성 화면에서 [**VPC 이름**]과 [**IP 주소 범위**]를 입력합니다.

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-03.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
VPC의 IP 주소 범위는, private 대역(10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) 내에서 /16~/28 범위여야 합니다.&lt;br /&gt;
- 예시: 10.0.0.0/16, 172.16.0.0/16, 192.168.0.0/16
&quot; %}

## Subnet 생성
[**VPC**] - [**Subnet Management**]에서 [**Subnet 생성**] 버튼을 클릭합니다. 

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

- [**Subnet 이름**]을 적절하게 입력하고, 위에서 생성했던 [**VPC**]를 선택하고, Subnet에서 사용할 [**IP 주소 범위**]를 입력합니다.
- [**Internet Gateway 전용여부**]는 외부와 인터넷 연결이 필요할 경우에는 [**Public**], 내부 서버끼리만 통신할 경우에는 [**Private**]을 선택합니다.
- [**용도**]는 일반 서버일 경우에는 [**일반**]을 선택하면 됩니다.

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-05.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
Subnet의 IP 주소 범위는, private 대역(10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) 내에서 /16~/28 범위여야 합니다.&lt;br /&gt;
- 예시: 10.0.1.0/24, 172.16.10.0/24, 192.168.101.0/24
&quot; %}

## 서버 생성
[**VPC**]와 [**Subnet**] 설정을 마쳤으니 이제 서버(Server)를 설정해보겠습니다.

### Server 서비스 위치
[Server] 서비스는 [Console] - [Services] - [Compute]에 위치해 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-01.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**Server**] - [**Server**]에서 [**서버 생성**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-02.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 생성 콘솔 선택
Ncloud 서버 생성 콘솔화면은 신규 기능이 업데이트 되면서 2가지를 선택할 수 있습니다. 여기서는 [**신규 콘솔 화면**]으로 진행하겠습니다.

- 기존 콘솔 화면: **XEN, RHV** 하이퍼바이저 기반의 서버(g1,g2)를 생성할 수 있습니다.
- 신규 콘솔 화면: **XEN, RHV** 하이퍼바이저 기반의 서버(g1,g2)뿐만 아니라 **KVM** 기반 및 다양한 성능을 제공하는 기본 스토리지로 서버(**g3**)를 생성할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-03.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 이미지 선택
[**서버 이미지 선택**] 단계에서는 Ncloud에서 제공하는 다양한 서버 이미지를 선택할 수 있고, [**최신 서버 이미지**]와 [**내 서버 이미지**]를 따로 볼 수 있는 기능도 제공하고 있습니다. 여기서는 [**최신 서버 이미지**]에서 제공하는 서버 이미지로 서버를 생성해보겠습니다.  
또한 하이퍼바이저 기준으로 [**XEN**]과 [**KVM**] 2가지 타입이 제공되는데 여기서는 [**XEN**] 타입의 서버로 테스트 해보겠습니다. [**XEN**]과 [**KVM**]에 대한 설명은 아래쪽에서 별도로 살펴보겠습니다. ([XEN 과 KVM 비교&lt;i class=&quot;fa-solid fa-turn-down&quot;&gt;&lt;/i&gt;](#xen-vs-kvm))

{% tabs server-image-choice %}

{% tab server-image-choice 최신 서버 이미지 %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}
{% endtab %}

{% tab server-image-choice NCP 서버 이미지 %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-23.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% endtab %}
{% endtabs %}

### 서버 설정 (전체 화면)
서버 설정 단계에서는 위에서 생성한 [**VPC**]와 [**Subnet**]을 선택하고  [**서버 스펙**]과 [**요금제**], [**Network Interface**], [**공인 IP 할당 여부**] 등을 선택하게 됩니다. 각 항목별 상세한 설명은 아래쪽에서 다시 정리해보겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-05.png&quot; width=&quot;845&quot; height=&quot;811&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 설정 (상세 설명)
그러면 이제부터 서버 설정 항목별로 상세하게 살펴보겠습니다.

- [**VPC**], [**Subnet**] 선택  
위에서 생성했던 [**VPC**]와 [**Subnet**] 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-06.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**서버 스펙**]  
[**서버 스펙**]은 [**High-CPU**], [**CPU-Intensive**], [**Standard**], [**High-Memory**] 등의 타입 중에서 원하는 타입을 선택하고, 각 타입별로 서비스에 적절한 vCPU와 Memory를 선택하시면 됩니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-07.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**요금제 선택**], [**서버 개수**], [**서버 이름**]  
요금제는 [**월요금제**]와 [**시간 요금제**] 중에서 선택하시고, 한번에 생성할 서버 개수와 서버 이름을 입력합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-08.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**Network Interface**] 사설 IP 할당  
사설 IP 할당은 자동 할당과 수동 할당 방법 중에서 선택하시면 됩니다.

{% tabs private-ip-assign %}

{% tab private-ip-assign 사설 IP 자동 할당 %}
&lt;br /&gt;
[**Network Interface**]에 할당되는 사설 IP는 아래와 같이 IP 입력 칸에 아무것도 입력하지 않으면 자동할당 됩니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-09.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-10.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}
{% endtab %}

{% tab private-ip-assign 사설 IP 수동 할당 %}
&lt;br /&gt;
IP 입력 칸에 선택된 [**Subnet**] 범위 내의 원하는 IP를 입력해서 수동으로 할당할 수도 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-11.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-12.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% endtab %}
{% endtabs %}

- [**공인 IP 할당**]  
Public Subnet을 선택했고 서버에 공인 IP가 필요할 경우에는 [**새로운 공인 IP 할당**]을 선택하시면 됩니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;
&amp;#8259; 공인 IP는 요금이 과금되므로, 사용하지 않을 때는 반납하기를 권장합니다. (월 이용료: 4,032원 ) &lt;br /&gt;
&amp;#8259; 서버 생성시 공인 IP를 함께 생성하려면 Subnet 타입은 Public Subnet, 서버 개수는 1개여야 합니다.
&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-13.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**물리 배치 그룹**] 설정
물리 배치 그룹 설정은 서버들을 하나의 그룹으로 묶어서 해당 그룹에 속한 서버들을 클러스터에 배치할 때 어떻게 할 것인지 결정할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-14.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**물리 배치 그룹**]을 사용하게 되면 배치 그룹명과 배치 종류를 선택할 수 있습니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;[**Anti-Affinity (분산 배치)**]의 경우 같은 배치 그룹에 소속된 서버들은 가급적 서로 다른 클러스터에 배치됩니다. 다만 그 결과가 엄격히 보장되지 않는 Best effort 방식입니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-15.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**반납 보호**]  
반납 보호를 설정하면 실수로 서버를 반납하여, 서버가 삭제되는 사고를 방지할 수 있습니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-16.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-17.png&quot; width=&quot;485&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**Script 선택**]  
서버가 켜질 때 자동으로 실행되어야 하는 스크립트가 있다면 [**Server**] - [**Init Script**] 메뉴에서 미리 Script를 등록한 후에 적용할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-18.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}


## 스토리지 설정
하이퍼바이저 [**XEN**] 타입의 서버는 서버 생성이 완료된 이후에 추가 스토리지를 설정할 수 있으므로 이번 단계는 그냥 넘어가겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-19.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 인증키 설정
인증키 이름을 입력하고, [**인증키 생성 및 저장**] 버튼을 클릭해서 인증키를 로컬 PC에 다운로드 받아서 안전한 곳에 보관해야 합니다. 기존에 사용하고 있던 인증키가 있을 경우에는 [**보유하고 있는 인증키 이용**]을 선택하면 됩니다.

{% include warning.html title=&quot;인증키&quot; content=&quot;인증키는 해당 서버의 **관리자 비밀번호**를 확인하는데 사용되므로 **안전한 곳에 잘 보관**해야 합니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-20.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 아래와 같이 로컬 PC에 인증키 (PEM) 파일을 저장합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-24.png&quot; width=&quot;840&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 네트워크 접근 설정
네트워크 접근은 [**ACG**]로 설정하게 되는데, `ACG(Access Control Group)는 서버 간 네트워크 접근 제어 및 관리를 할 수 있는 IP/Port 기반 필터링 방화벽 서비스`로, 서버에 별도의 복잡한 방화벽 구축없이 간단하게 서버에 대한 네트워크 접근 제어를 할 수 있습니다.  
[**VPC**]를 생성하면 자동으로 생성되는 **기본 ACG**를 선택하거나 별도로 생성한 ACG가 있을 경우 해당 ACG를 선택하면 됩니다. **적용할 ACG는 최대 3개**까지 선택할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-21.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 서버 생성 완료
모든 단계를 마치고 나면 아래와 같이 서버가 생성된 것을 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-22.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 서버 접속
이제 생성된 서버에 관리자(root) 계정으로 접속해보겠습니다.

### 방화벽 (ACG) 설정
우선 서버 접속을 위한 방화벽 (ACG)을 설정하겠습니다.

- 테스트로 생성했던 서버를 선택하고 [ACG 수정] 버튼을 클릭해서 적용된 ACG를 확인합니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-34.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- ACG 수정 화면에서 현재 적용된 ACG 이름을 확인할 수 있습니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-35.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [Server] - [ACG]에서 위에서 확인한 ACG를 선택하고 [ACG 설정]을 클릭합니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-36.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- ACG 규칙 설정 화면 [**Inbound**] 탭에서 [**myIp**] 버튼을 클릭해서 현재 접속한 PC나 회사 IP를 입력하고, 허용 포트에는 SSH 접속을 위한 `22포트를 추가`합니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-37.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 관리자 비밀번호 확인
다음으로, 서버 접속에 필요한 관리자 비밀번호를 확인하려면, 서버를 선택하고 [**서버 관리 및 설정 변경**] 메뉴에서 [**관리자 비밀번호 확인**] 메뉴를 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-25.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 메뉴를 선택하면 다음과 같은 [**관리자 비밀번호 확인**] 팝업이 나타납니다.
  
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-26.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 팝업에서 [**마우스로 파일을 끌고 오거나 여기를 클릭하세요**] 부분을 클릭하면 파일 선택 창이 나타나는데, 위에서 저장했던 pem 인증키 파일을 선택합니다.
  
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-27.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 인증키 파일이 선택된 상태에서 아래쪽에 있는 [**비밀번호 확인**] 버튼을 클릭합니다.
  
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-28.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 그러면 아래와 같이 관리자 계정(root)에 대한 비밀번호를 확인할 수 있습니다. 아래쪽에서 서버에 접속할때 사용하기 위해 비밀번호를 복사합니다.
  
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-29.png&quot; width=&quot;485&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 IP 주소 확인
다음으로 서버 정보 화면에서 서버의 [**공인 IP 주소**]를 확인하고, 복사합니다. (SSL VPN 등을 사용하는 경우에는 사설 IP 주소를 사용하면 됩니다.)

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-30.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 접속 
대표적인 서버 접속 클라이언트인 Putty를 실행하고, 서버의 IP주소를 입력합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-31.png&quot; width=&quot;452&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 처음 연결하는 서버의 경우 아래와 같이 SSH 프로토콜에서 필요한 FingerPrint를 저장할 것인지 묻는데, [**Accept**] (또는 예)를 클릭합니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-32.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- 마지막으로 관리자 계정인 [**root**]와 위에서 확인했던 [**관리자 비밀번호**]를 입력하면 서버에 접속됩니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-33.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}


## XEN vs KVM {#xen-vs-kvm}
Ncloud (네이버 클라우드)에서 제공하는 하이퍼바이저의 종류는 XEN, KVM이 있으며, 각각의 특징은 다음과 같습니다.

&lt;div&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;하이퍼바이저&lt;/th&gt;
      &lt;th&gt;서버 세대&lt;/th&gt;
      &lt;th&gt;서버 타입&lt;/th&gt;
      &lt;th&gt;서버 이미지&lt;/th&gt;
      &lt;th&gt;스토리지 타입&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;
      &lt;td&gt;XEN&lt;/td&gt;
      &lt;td&gt;g1, g2&lt;/td&gt;
      &lt;td&gt;Micro, Standard, CPU-Intensive, High-CPU, High-Memory&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
      &lt;td&gt;HDD, SDD&lt;/td&gt;
    &lt;/tr&gt; 
    &lt;tr&gt;
      &lt;td&gt;KVM&lt;/td&gt;
      &lt;td&gt;g3&lt;/td&gt;
      &lt;td&gt;Micro, Standard, High-CPU, High-Memory
      &lt;/td&gt;
      &lt;td&gt;KVM 기반 서버 이미지&lt;/td&gt;
      &lt;td&gt;FB1, CB1&lt;/td&gt;
    &lt;/tr&gt;    
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

### 스토리지 특징

&lt;div&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;하이퍼바이저&lt;/th&gt;      
      &lt;th&gt;스토리지 타입&lt;/th&gt;
      &lt;th&gt;미디어 타입&lt;/th&gt;
      &lt;th&gt;최소 크기&lt;/th&gt;
      &lt;th&gt;최대 크기&lt;/th&gt;
      &lt;th&gt;추가 가능 개수&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;
      &lt;td rowspan=&quot;2&quot;&gt;XEN&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;2TB&lt;/td&gt;
      &lt;td&gt;15개&lt;/td&gt;
    &lt;/tr&gt;  
    &lt;tr&gt;     
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;2TB&lt;/td&gt;
      &lt;td&gt;15개&lt;/td&gt;
    &lt;/tr&gt; 
    &lt;tr&gt;
      &lt;td rowspan=&quot;2&quot;&gt;KVM&lt;/td&gt;
      &lt;td&gt;FB1&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;100GB&lt;/td&gt;
      &lt;td&gt;16TB&lt;/td&gt;
      &lt;td&gt;20개&lt;/td&gt;
    &lt;/tr&gt;  
    &lt;tr&gt;     
      &lt;td&gt;CB1&lt;/td&gt;
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;16TB&lt;/td&gt;
      &lt;td&gt;20개&lt;/td&gt;
    &lt;/tr&gt;        
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

## 참고 URL
1.  Ncloud VPC 서버 생성 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/server-create-new-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/server-create-new-vpc&lt;/a&gt;

2.  Ncloud 하이퍼바이저 개요
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/hypervisor-info&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/hypervisor-info&lt;/a&gt;


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}</description>
            <pubDate>Mon, 04 Dec 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud_compute_server_vpc_create.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud_compute_server_vpc_create.html</guid>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>IIS에서 X-Forwarded-For를 이용해 Client IP 기록하기</title>
            <description>## 개요
X-Forwarded-For (XFF) 는 HTTP Header 중 하나로 Load Balancer(로드밸런서)나 Proxy Server를 통해 웹서버에 접속하는 Client의 IP 주소를 식별하는 표준 헤더입니다.  
웹서버나 WAS 앞쪽에 Load Balancer 혹은 Proxy Server 등이 위치하게 된다면 서버 접근 로그에는 Client IP가 아닌 Load Balancer 혹은 Proxy Server의 IP 주소가 기록됩니다. 
이때 웹 어플리케이션에서 X-Forwarded-For 헤더를 이용하면 Client IP를 서버 접근 로그에 남길 수 있습니다.  

여기서는 `Load Balancer와 연동된 Windows Server의 IIS에서 X-Forwarded-For를 이용해 IIS(Internet Information Services) Log에 Clinet의 IP를 기록`하는 과정을 살펴보겠습니다.


## 테스트 환경
테스트는 Windows 서버를 Load Balancer와 연동한 후 Cloud Log Analytics에서 IIS Log를  수집해 IP 주소를 확인하는 방식으로 진행하겠습니다.

### Network 환경
- VPC 대역 : 10.0.0.0/16
- Subnet 대역 (Server) : 10.0.**0**.0/24
- Subnet 대역 (Load Balancer) : 10.0.**4**.0/24

### Server 환경
- Windows Server 2019 (64-bit) English Edition


### 테스트 서버
위 서버 환경에서 정리한 대로 Windows 서버를 준비했습니다. VPC 환경에서 서버 생성하는 방법은 아래 문서를 참고하시면 됩니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; &lt;a href=&apos;/compute/ncloud_compute_server_vpc_create.html&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt;VPC 환경에서 서버 생성하는 방법&lt;/a&gt;
&quot; %}

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

로드밸런서도 마찬가지로 준비하고, 서버와 연동까지 완료했습니다. VPC 환경에서 로드밸런서를 생성하는 방법은 아래 문서를 참고하시면 됩니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; &lt;a href=&apos;/networking/ncloud_networking_load_balancer_application_lb.html&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt;VPC 환경에서 Application Load Balancer 생성하는 방법&lt;/a&gt;
&quot; %}

- 로드밸런서 상세 정보에서 [**10.0.4.0/24**]로 표시되는 서브넷 정보를 기억했다가 아래쪽에서 테스트할 때 확인해보겠습니다.
{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

## 설정 전 테스트
우선, **X-Forwarded-For (XFF)** 설정을 하기 전에 어떻게 기록이 남는지 확인해보겠습니다.  

### IIS 접속 로그 확인
Windows IIS 접속 로그를 [**Cloud Log Analytics**]에서 확인하는 방법은 아래 문서를 참고하시며 됩니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; &lt;a href=&apos;http://127.0.0.1:4001/management/ncloud-management-cloud-log-analytics-windows-iis-log-collect-guide.html&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt;Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&lt;/a&gt;
&quot; %}


Cloud Log Analytics에서 수집한 로그를 확인해보면 위에서 설정했던 **Load Balancer의 IP 대역 (10.0.4.xx)**이 기록된 것을 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

## IIS 설정
이제 실제 Client IP가 기록 되도록 설정을 변경해보겠습니다.  

- IIS Manager를 실행시켜서 메뉴 중에 [**Logging**]을 선택합니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

- [**Logging**] 화면에서 [**Format**]은 기본 값인 [**W3C**] 그대로 두고 [**Log File**] 항목의 [**Select Fields**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

- [**W3C Logging Fields**] 팝업창에서 [**Custom Fields**] 항목의 [**Add Field**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-06.png&quot; width=&quot;585&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

- [**Add Custom Field**] 팝업창에서 [**Field Name**], [**Source**] 두가지 항목 모두에 [**X-Forwarded-For**]를 입력하고 [**OK**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-07.png&quot; width=&quot;585&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

- [**Custom Fields**]에 [**X-Forwarded-For**] 설정이 추가된 것을 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-08.png&quot; width=&quot;585&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

- 팝업창을 닫고 [**IIS Manager**] - [**Logging**] 설정 화면 오른쪽에 있는 [**Apply**]를 클릭해서 변경된 설정을 적용합니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-09.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

- 변경된 설정이 적용되었다는 메시지를 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-10.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}

## 설정 후 테스트
위와 같이 서버에서 설정을 모두 마친 후에 로드 밸런서 URL로 접속합니다.  
이후에 Cloud Log Analytics에서 로그를 확인해보면 아래와 같이 실제 접속한 Client의 IP가 추가로 기록된 것을 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-server-x-forwarded-for-client-ip-logging-windows-iis-guide-11.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드)에서 X-Forwarded-For를 이용해 Proxy, Load Balancer 환경에서 Client IP를 Windows IIS Log에 기록하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1.  X-Forwarded-For 안내
	- &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/X-Forwarded-For&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/X-Forwarded-For&lt;/a&gt;

1.  Cloud Log Analytics에서 Windows IIS Log 수집하는 방법
	- &lt;a href=&quot;/management/ncloud-management-cloud-log-analytics-windows-iis-log-collect-guide.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/management/ncloud-management-cloud-log-analytics-windows-iis-log-collect-guide.html&lt;/a&gt;    

## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}</description>
            <pubDate>Fri, 17 Nov 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud-compute-server-x-forwarded-for-client-ip-logging-iis-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud-compute-server-x-forwarded-for-client-ip-logging-iis-guide.html</guid>
            
            <category>proxy</category>
            
            <category>load_balancer</category>
            
            <category>log</category>
            
            <category>windows</category>
            
            
        </item>
        
        <item>
            <title>Cloud Log Analytics에서 Windows IIS Log 수집하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드) Cloud Log Analytics 서비스에서 Windows 웹서버인 IIS 로그를 수집하는 방법에 대해 정리해보겠습니다.

## 테스트 서버
- Windows Server 2019 (64-bit) English Edition

## 수집 설정
- [**Cloud Log Analytics**] - [**Management**]에서 서버를 선택하고 [**수집 설정**] 버튼을 클릭합니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

[**Log 수집 설정**] 화면에서 각 설정 항목을 다음과 같이 입력합니다.
- **Log Template**: **Custom Log**를 선택합니다.
- **Log Type**: 임의의 값을 입력합니다. (예: iislog)
- **Log 경로**: 실제 저장되는 로그파일의 경로를 입력합니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-10.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}


### Log 파일 경로 확인
IIS Log 파일의 경로는 [**IIS Manager**]를 실행하고, 사이트 정보에서 [**Logging**] 메뉴를 선택하면 아래와 같이 [**Directory**] 항목을 확인할 수 있습니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

해당 경로를 찾아가면 아래와 같이 로그 파일이 저장되어 있는 것을 확인할 수 있습니다. 

```text
# 예시
C:\inetpub\logs\LogFiles\W3SVC1\u_ex231114.log
```
{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

### Log 파일 경로 입력
실제 Log 파일은 일별 또는 시간 별로 파일명이 다르게 저장되는 경우가 대부분이므로 [**Log 경로**]에는 다음과 같이 전체 파일을 수집하도록 입력하면 됩니다. 이제 모든 항목을 입력했으면 [**추가**] 버튼을 클릭합니다.

```text
# 예시
C:\inetpub\logs\LogFiles\W3SVC1\*.log
```

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

그리고, 입력한 내용에 이상이 없으면 [**적용**] 버튼을 클릭합니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-06.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

## 로그 수집 Agent 설치
로그 수집 설정을 마치면 [**로그 수집 Agent 설치**] 방법에 대한 안내 팝업이 나타납니다. 설치 안내 내용 중에서 [**로그 수집 agent 설치 명령어**] 항목에 있는 [**클립보드에 복사하기**] 버튼을 클릭해서 설치 명령어를 복사합니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-07.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

서버의 [**Windows PowerShell**]을 실행시켜서 위에서 복사한 [**로그 수집 agent 설치 명령어**] 입력합니다. 설치가 정상적으로 완료되면 [**Finish Installation**] 이라는 메시지를 확인할 수 있습니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-08.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}

## 수집된 로그 확인
설치 후 5분 정도 기다렸다 [**Cloud Log Analytics**] - [**Search**] 메뉴에 들어가보면 아래와 같이 수집된 로그를 확인할 수 있습니다.

{% include image.html file=&quot;management/ncloud-management-cloud-log-analytics-guide-09.png&quot; width=&quot;845&quot; alt=&quot;Ncloud(네이버 클라우드) Cloud Log Analytics에서 Windows IIS Log 수집하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
&lt;a href=&quot;https://guide.ncloud-docs.com/docs/cla-overview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/cla-overview&lt;/a&gt;


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}  </description>
            <pubDate>Thu, 16 Nov 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/management/ncloud-management-cloud-log-analytics-windows-iis-log-collect-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/management/ncloud-management-cloud-log-analytics-windows-iis-log-collect-guide.html</guid>
            
            <category>Log</category>
            
            <category>analytics</category>
            
            <category>windows</category>
            
            
        </item>
        
        <item>
            <title>Cloud Log Analytics에서 수집하는 로그 유형</title>
            <description>## 개요
Cloud Log Analytics는 네이버 클라우드 플랫폼의 여러 서비스에서 발생하는 다양한 로그들을 한 곳에 모아 저장하고 손쉽게 분석하게 해주는 서비스입니다.

## 로그 템플릿 종류
Cloud Log Analytics에서 수집하는 각 종 서비스의 로그 템플릿 종류는 다음과 같습니다.

- Server SYSLOG
- Apache 로그(Access log, Apache Error Log)
- MySQL 설치형 상품의 로그(Error Log, Slow Log)
- Microsoft SQL Server 설치형 상품의 Error Log
- Tomcat 로그(Catalina Log)
- Windows 서버의 Event Log
- Windows 서버의 각종 text 형식의 로그
- Cloud DB for MySQL 로그
- Cloud DB for MSSQL 로그
- Cloud DB for MongoDB 로그
- Cloud DB for PostgreSQL 로그
- Application Server Launcher 로그
- Application Load Balancer 로그
- Search Engine Service 로그
- Cloud Data Streaming Service 로그
- Bare Metal Server 로그
- Kubernetes Service Audit 로그
- 그외 템플릿으로 제공되지 않는 로그도 Custom Log 기능으로 직접 대상 로그를 지정해서 수집할 수 있습니다


## 로그 보관 기간
로그 데이터의 **보관 기간은 30일**로, 30일이 지난 데이터는 자동 삭제되며, 사전에 별도로 통지하지 않습니다.


## 참고 URL
&lt;a href=&quot;https://guide.ncloud-docs.com/docs/cla-overview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/cla-overview&lt;/a&gt;


## 문서 업데이트 내역
{% include doc-history.html width=&quot;50%&quot; %}  </description>
            <pubDate>Tue, 14 Nov 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/management/ncloud-management-cloud-log-analytics-template-info.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/management/ncloud-management-cloud-log-analytics-template-info.html</guid>
            
            <category>log</category>
            
            <category>analytics</category>
            
            
        </item>
        
    </channel>
</rss>
