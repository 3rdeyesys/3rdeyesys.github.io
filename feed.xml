<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>3RDEYESYSTEM Technical Documentations</title>
        <description>써드아이시스템(3rdeyesys) 기술문서 사이트입니다 - Ncloud 프리미엄 파트너</description>
        <link>https://docs.3rdeyesys.com/</link>
        <atom:link href="https://docs.3rdeyesys.com/feed.xml" rel="self" type="application/rss+xml"/>
        <pubDate>Wed, 14 Jun 2023 16:23:44 +0900</pubDate>
        <lastBuildDate>Wed, 14 Jun 2023 16:23:44 +0900</lastBuildDate>
        <generator>Jekyll v4.2.2</generator>
        
        
        <item>
            <title>Ncloud VPC 환경에서 서버 생성하는 방법</title>
            <description>## 개요
Ncloud (네이버 클라우드) VPC환경에서 서버를 생성하는 순서를 정리해보겠습니다.  
얼마전 업데이트에서 서버 생성 콘솔 화면에 큰 변화가 생겼기에 그 내용까지 함께 포함했습니다.

## 서버 생성 순서
VPC 환경에서 서버를 생성하려면 Subnet 설정 등 사전에 미리 설정해야 하는 것과 서버 생성 후에 설정해야 하는 것들이 있는데, 순서대로 정리하고 아래쪽에서 차례대로 살펴보겠습니다.

1. VPC 설정
2. Subnet 설정
3. 서버 생성  
  3-1. 서버 인증키 설정
4. ACG (방화벽) 설정


## VPC 설정
VPC (Virtual Private Cloud) 즉, 클라우드 상에서 논리적으로 격리된 고객 전용 네트워크 공간을 먼저 생성하고 해당 공간에 서버를 생성하게 됩니다.  
VPC는 고객의 계정마다 **최대 3개**를 생성할 수 있으며, 각 VPC는 최대 넷마스크 0.0.255.255/16 (IP 65,536개) 크기의 네트워크 주소 공간을 제공합니다.

### VPC 서비스 위치
[VPC] 서비스는 [Console] - [Services] - [Networking]에 위치해 있습니다.

그리고, 아래 스샷에서 확인할 수 있듯이 [VPC]에는 [VPC], [Subnet], [Network ACL], [NAT Gateway], [Route Table], [VPC Peering], [Virtual Private Gateway] 등의 하부 서비스 메뉴가 있습니다.

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}


## VPC 생성
[**VPC**] - [**VPC Management**] [**VPC 생성**] 버튼을 클릭합니다. 

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

- VPC 생성 화면에서 [**VPC 이름**]과 [**IP 주소 범위**]를 입력합니다.

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-03.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
VPC의 IP 주소 범위는, private 대역(10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) 내에서 /16~/28 범위여야 합니다.&lt;br /&gt;
- 예시: 10.0.0.0/16, 172.16.0.0/16, 192.168.0.0/16
&quot; %}

## Subnet 생성
[**VPC**] - [**Subnet Management**]에서 [**Subnet 생성**] 버튼을 클릭합니다. 

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

- [**Subnet 이름**]을 적절하게 입력하고, 위에서 생성했던 [**VPC**]를 선택하고, Subnet에서 사용할 [**IP 주소 범위**]를 입력합니다.
- [**Internet Gateway 전용여부**]는 외부와 인터넷 연결이 필요할 경우에는 [**Public**], 내부 서버끼리만 통신할 경우에는 [**Private**]을 선택합니다.
- [**용도**]는 일반 서버일 경우에는 [**일반**]을 선택하면 됩니다.

{% include image.html file=&quot;networking/ncloud-networking-vpc-subnet-create-05.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 VPC, Subnet 생성&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
Subnet의 IP 주소 범위는, private 대역(10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) 내에서 /16~/28 범위여야 합니다.&lt;br /&gt;
- 예시: 10.0.1.0/24, 172.16.10.0/24, 192.168.101.0/24
&quot; %}

## 서버 생성
[**VPC**]와 [**Subnet**] 설정을 마쳤으니 이제 서버(Server)를 설정해보겠습니다.

### Server 서비스 위치
[Server] 서비스는 [Console] - [Services] - [Compute]에 위치해 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-01.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**Server**] - [**Server**]에서 [**서버 생성**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-02.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 생성 콘솔 선택
Ncloud 서버 생성 콘솔화면은 신규 기능이 업데이트 되면서 2가지를 선택할 수 있습니다. 여기서는 [**신규 콘솔 화면**]으로 진행하겠습니다.

- 기존 콘솔 화면: **XEN, RHV** 하이퍼바이저 기반의 서버(g1,g2)를 생성할 수 있습니다.
- 신규 콘솔 화면: **XEN, RHV** 하이퍼바이저 기반의 서버(g1,g2)뿐만 아니라 **KVM** 기반 및 다양한 성능을 제공하는 기본 스토리지로 서버(**g3**)를 생성할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-03.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 이미지 선택
[**서버 이미지 선택**] 단계에서는 Ncloud에서 제공하는 다양한 서버 이미지를 선택할 수 있고, [**최신 서버 이미지**]와 [**내 서버 이미지**]를 따로 볼 수 있는 기능도 제공하고 있습니다. 여기서는 [**최신 서버 이미지**]에서 제공하는 서버 이미지로 서버를 생성해보겠습니다.  
또한 하이퍼바이저 기준으로 [**XEN**]과 [**KVM**] 2가지 타입이 제공되는데 여기서는 [**XEN**] 타입의 서버로 테스트 해보겠습니다. [**XEN**]과 [**KVM**]에 대한 설명은 아래쪽에서 별도로 살펴보겠습니다. ([XEN 과 KVM 비교&lt;i class=&quot;fa-solid fa-turn-down&quot;&gt;&lt;/i&gt;](#xen-vs-kvm))

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}


### 서버 설정 (전체 화면)
서버 설정 단계에서는 위에서 생성한 [**VPC**]와 [**Subnet**]을 선택하고  [**서버 스펙**]과 [**요금제**], [**Network Interface**], [**공인 IP 할당 여부**] 등을 선택하게 됩니다. 각 항목별 상세한 설명은 아래쪽에서 다시 정리해보겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-05.png&quot; width=&quot;845&quot; height=&quot;811&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 설정 (상세 설명)
그러면 이제부터 서버 설정 항목별로 상세하게 살펴보겠습니다.

- [**VPC**], [**Subnet**] 선택  
위에서 생성했던 [**VPC**]와 [**Subnet**] 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-06.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**서버 스펙**]  
[**서버 스펙**]은 [**High-CPU**], [**CPU-Intensive**], [**Standard**], [**High-Memory**] 등의 타입 중에서 원하는 타입을 선택하고, 각 타입별로 서비스에 적절한 vCPU와 Memory를 선택하시면 됩니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-07.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**요금제 선택**], [**서버 개수**], [**서버 이름**]  
요금제는 [**월요금제**]와 [**시간 요금제**] 중에서 선택하시고, 한번에 생성할 서버 개수와 서버 이름을 입력합니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-08.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**Network Interface**] 사설 IP 할당  
{% tabs private-ip-assign %}

{% tab private-ip-assign 사설 IP 자동 할당 %}
&lt;br /&gt;
[**Network Interface**]에 할당되는 사설 IP는 아래와 같이 IP 입력 칸에 아무것도 입력하지 않으면 자동할당 됩니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-09.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-10.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}
{% endtab %}

{% tab private-ip-assign 사설 IP 수동 할당 %}
&lt;br /&gt;
IP 입력 칸에 선택된 [**Subnet**] 범위 내의 원하는 IP를 입력해서 수동으로 할당할 수도 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-11.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-12.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% endtab %}
{% endtabs %}

- [**공인 IP 할당**]  
Public Subnet을 선택했고 서버에 공인 IP가 필요할 경우에는 [**새로운 공인 IP 할당**]을 선택하시면 됩니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;
&amp;#8259; 공인 IP는 요금이 과금되므로, 사용하지 않을 때는 반납하기를 권장합니다. (월 이용료: 4,032원 ) &lt;br /&gt;
&amp;#8259; 서버 생성시 공인 IP를 함께 생성하려면 Subnet 타입은 Public Subnet, 서버 개수는 1개여야 합니다.
&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-13.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**물리 배치 그룹**] 설정
물리 배치 그룹 설정은 서버들을 하나의 그룹으로 묶어서 해당 그룹에 속한 서버들을 클러스터에 배치할 때 어떻게 할 것인지 결정할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-14.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**물리 배치 그룹**]을 사용하게 되면 배치 그룹명과 배치 종류를 선택할 수 있습니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;[**Anti-Affinity (분산 배치)**]의 경우 같은 배치 그룹에 소속된 서버들은 가급적 서로 다른 클러스터에 배치됩니다. 다만 그 결과가 엄격히 보장되지 않는 Best effort 방식입니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-15.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**반납 보호**]  
반납 보호를 설정하면 실수로 서버를 반납하여, 서버가 삭제되는 사고를 방지할 수 있습니다.
{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-16.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-17.png&quot; width=&quot;485&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

- [**Script 선택**]  
서버가 켜질 때 자동으로 실행되어야 하는 스크립트가 있다면 [**Server**] - [**Init Script**] 메뉴에서 미리 Script를 등록한 후에 적용할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-18.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}


## 스토리지 설정
하이퍼바이저 [**XEN**] 타입의 서버는 서버 생성이 완료된 이후에 추가 스토리지를 설정할 수 있으므로 이번 단계는 그냥 넘어가겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-19.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 인증키 설정
인증키 이름을 입력하고, [**인증키 생성 및 저장**] 버튼을 클릭해서 인증키를 로컬 PC에 다운로드 받아서 안전한 곳에 보관해야 합니다. 기존에 사용하고 있던 인증키가 있을 경우에는 [**보유하고 있는 인증키 이용**]을 선택하면 됩니다.

{% include warning.html title=&quot;인증키&quot; content=&quot;인증키는 해당 서버의 **관리자 비밀번호**를 확인하는데 사용되므로 **안전한 곳에 잘 보관**해야 합니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-20.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 네트워크 접근 설정
네트워크 접근은 [**ACG**]로 설정하게 되는데, `ACG(Access Control Group)는 서버 간 네트워크 접근 제어 및 관리를 할 수 있는 IP/Port 기반 필터링 방화벽 서비스`로, 서버에 별도의 복잡한 방화벽 구축없이 간단하게 서버에 대한 네트워크 접근 제어를 할 수 있습니다.  
[**VPC**]를 생성하면 자동으로 생성되는 **기본 ACG**를 선택하거나 별도로 생성한 ACG가 있을 경우 해당 ACG를 선택하면 됩니다. **적용할 ACG는 최대 3개**까지 선택할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-21.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}

## 서버 생성 완료
모든 단계를 마치고 나면 아래와 같이 서버가 생성된 것을 확인할 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-vpc-server-create-guide-22.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC 환경에서 서버를 생성하는 방법&quot; caption=&quot;&quot; %}


## XEN vs KVM {#xen-vs-kvm}
Ncloud (네이버 클라우드)에서 제공하는 하이퍼바이저의 종류는 XEN, KVM이 있으며, 각각의 특징은 다음과 같습니다.

&lt;div&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;하이퍼바이저&lt;/th&gt;
      &lt;th&gt;서버 세대&lt;/th&gt;
      &lt;th&gt;서버 타입&lt;/th&gt;
      &lt;th&gt;서버 이미지&lt;/th&gt;
      &lt;th&gt;스토리지 타입&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;
      &lt;td&gt;XEN&lt;/td&gt;
      &lt;td&gt;g1, g2&lt;/td&gt;
      &lt;td&gt;Micro, Standard, CPU-Intensive, High-CPU, High-Memory&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
      &lt;td&gt;HDD, SDD&lt;/td&gt;
    &lt;/tr&gt; 
    &lt;tr&gt;
      &lt;td&gt;KVM&lt;/td&gt;
      &lt;td&gt;g3&lt;/td&gt;
      &lt;td&gt;Micro
        &lt;br /&gt;(Standard, CPU-Intensive, High-CPU, High-Memory 는 출시 예정)
      &lt;/td&gt;
      &lt;td&gt;KVM 기반 서버 이미지&lt;/td&gt;
      &lt;td&gt;FB1, CB1&lt;/td&gt;
    &lt;/tr&gt;    
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

### 스토리지 특징

&lt;div&gt;
&lt;table class=&quot;simple_table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;하이퍼바이저&lt;/th&gt;      
      &lt;th&gt;스토리지 타입&lt;/th&gt;
      &lt;th&gt;미디어 타입&lt;/th&gt;
      &lt;th&gt;최소 크기&lt;/th&gt;
      &lt;th&gt;최대 크기&lt;/th&gt;
      &lt;th&gt;추가 가능 개수&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;    
    &lt;tr&gt;
      &lt;td rowspan=&quot;2&quot;&gt;XEN&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;2TB&lt;/td&gt;
      &lt;td&gt;15개&lt;/td&gt;
    &lt;/tr&gt;  
    &lt;tr&gt;     
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;2TB&lt;/td&gt;
      &lt;td&gt;15개&lt;/td&gt;
    &lt;/tr&gt; 
    &lt;tr&gt;
      &lt;td rowspan=&quot;2&quot;&gt;KVM&lt;/td&gt;
      &lt;td&gt;FB1&lt;/td&gt;
      &lt;td&gt;HDD&lt;/td&gt;
      &lt;td&gt;100GB&lt;/td&gt;
      &lt;td&gt;16TB&lt;/td&gt;
      &lt;td&gt;20개&lt;/td&gt;
    &lt;/tr&gt;  
    &lt;tr&gt;     
      &lt;td&gt;CB1&lt;/td&gt;
      &lt;td&gt;SSD&lt;/td&gt;
      &lt;td&gt;10GB&lt;/td&gt;
      &lt;td&gt;16TB&lt;/td&gt;
      &lt;td&gt;20개&lt;/td&gt;
    &lt;/tr&gt;        
  &lt;/tbody&gt;
&lt;/table&gt;  
&lt;/div&gt;

## 참고 URL
1.  Ncloud VPC 서버 생성 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/server-create-new-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/server-create-new-vpc&lt;/a&gt;

2.  Ncloud 하이퍼바이저 개요
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/hypervisor-info&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/hypervisor-info&lt;/a&gt;

</description>
            <pubDate>Wed, 14 Jun 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud_compute_server_vpc_create.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud_compute_server_vpc_create.html</guid>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 소개</title>
            <description>## 개요
Ncloud (네이버 클라우드) Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개를 정리해보겠습니다.

## 테스트 환경
- VPC와 Private Subnet
- Cloud DB for MSSQL 15.0.4.198.2 Standard Edition (MSSQL 2019)

## Cloud DB for MSSQL 서비스 위치
[**Cloud DB for MSSQL**]은 [**콘솔**] - [**Services**] - [**Database**]에서 찾을 수 있습니다.  

그리고 Cloud DB for MSSQL에는 다음과 같은 메뉴들이 있는데, 자세한 내용은 아래쪽에서 메뉴별로 하나씩 소개해보겠습니다.
- DB Server
- Monitoring
- Backup
- Event
- Config Group

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

## DB Server 메뉴
DB Server 메뉴에서는 MSSQL Server를 생성, 삭제하거나 운영 중인 MSSQL Server 목록을 확인할 수 있습니다. 또한 운영 중인 MSSQL Server의 스펙을 변경하거나 관리자(User) 계정 등을 관리할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

### 재시작
서버를 재시작합니다. 정지 기능은 제공하지 않습니다.

### DB Server 삭제
DB Server를 삭제합니다. 동시에 Mirror 도 같이 삭제 되며, 삭제하는 DB Server의 모든 데이터는 삭제됩니다.  
이때, `백업된 데이터도 같이 삭제되고 삭제 이후에는 복구 할 수 없으니` 만약의 경우를 대비하여 백업 데이터를 별도로 보관하는 것도 좋은 방법입니다.

### Monitoring
DB Dashboard, Performance, DB Logs, Audit Logs 등의 메뉴를 제공하여 각 종 로그와 성능 지표를 확인할 수 있도록 Monitoring 서비스 항목으로 이동합니다.

### DB 관리

- **DB Server 상세보기**
    - DB Config 관리: DB Config Croup 변경이 가능합니다.
    - Database 관리:  Databases를 생성 및 삭제할 수 있습니다.
    - Db User 관리: 관리자용 DB 계정의 비밀번호를 변경할 수 있습니다.
    - Backup 설정관리: Backup 파일의 보관 기간 및 Backup 시간을 관리합니다.
    - DB 스펙변경: DB Server의 스펙을 변경합니다.
    - Audit 설정 관리: Audit 설정을 활성화 하면 DB 서버의 로그인 기록 및 데이터베이스 내 오브젝트 생성, 변경, 삭제 기록(DDL)을 남길 수 있습니다.
    - Log 다운로드: Error Log, Default Trace File, Agent Log, Audit Log 파일을 다운로드 할 수 있습니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;**DB 스펙 변경**은 **동일한 DB 서비스 이름**으로 서비스 되는 모든 서버(**Principle, Mirror, Slave** 등)가 똑같이 변경되며 DB Server가 재시작 됩니다. 또한, 재시작 동안에는 DB Server 접속할 수 없습니다.&quot; %}
    
- **Slave 추가** : 선택한 DB Service의 Slave DB Server를 추가합니다.
- **읽기가능 시간 조정** : 매일 정해진 시간에 읽기 가능하도록 설정하여 batch 등에 사용할 수 있습니다. (Slave DB 생성 후 적용가능)
- **고가용성 설정 변경** : DB Server를 Stand Alone 또는 고가용성 구성으로 변경하며, 이때 서버 스펙, DB 설정 정보는 동일하게 설정됩니다.
- **Public 도메인 관리** : 외부에서 접근할 수 있는 Public 도메인을 신청할 수 있습니다.
- **MSSQL Engine Upgrade** : DB Server Engine 버전을 업그레이드 합니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;**MSSQL Engine Upgrade**는 리스트에 있는 전체 서버의 버전이 변경되고, **버전 업그레이드 중에는 DB서버 접근이 차단**됩니다.&quot; %}

## Monitoring 메뉴

MSSQL Server 성능 및 이력에 대한 모니터링 정보를 확인할 수 있습니다. Monitoring은 별도의 추가 비용 없이 사용이 가능합니다. 

### DB Dashboard
Monitoring에서 제공하고 있는 대시보드는 여러 개의 그래픽 차트로 구성되어 있으며, 사용자는 서버별로 확인하고 싶은 대시보드에서 원하는 정보만 디스플레이하여 직관적으로 확인할 수 있습니다. 대시보드에서 보여주는 정보는 매분 수집하여 표시하되 평균값을 보여줍니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

### Performance
운영 중인 MSSQL Server의 성능 관련 모니터링 정보를 보여줍니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

### DB Logs
운영 중인 MSSQL Server에서 발생한 모든 로그의 발생 시간 및 내용을 기록하여 보여줍니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

## Backup 메뉴
Backup에서는 Cloud DB for MSSQL을 사용 중인 사용자의 캐시 데이터를 안전하게 보관하기 위해 서버별로 설정해놓은 백업 정보를 확인할 수 있습니다. 또한 장애가 발생하여 캐시 데이터가 손실된 경우 보관 중이던 백업 파일로 복원을 진행할 수도 있으며, 고가용성 설정을 사용하는 서버 뿐만 아니라 Stand Alone Server도 백업 및 복원 기능을 사용할 수 있습니다.

### 기본 수행 규칙
백업과 복원을 사용하기 위해서 우선 Cloud DB for MSSQL에서 제공하고 있는 백업에 대한 기본 수행 규칙을 이해하는 것이 좋습니다. 

- 백업 수행 방식
  - 풀백업: 하루 한 번씩 매일 수행
  - 자동 설정과 사용자 정의 설정 가운데 선택
    - 자동 설정: MSSQL Server 생성 시 임의의 시간이 지정되며, 이후 처음 백업된 시간과 유사한 시간에 백업 수행
    - 사용자 정의 설정: 사용자가 선택한 시간 +15분 내 백업 수행 시작
  - 로그백업: 15분 간격으로 자동 수행. 시간 설정 불가

- 백업 파일
  - 보관 기간: 사용자 설정에 따라 최대 30일까지 보관 가능
  - 저장 위치: 별도의 데이터 스토리지(백업 파일 크기에 따라 스토리지 계약 진행)

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-05.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

- **DB 서비스 이름**: 사용자가 지정한 DB Service 이름
- **Backup 보관일**: 백업 파일을 데이터 스토리지에 저장하여 보관하는 최대 일수
- **FullBackup 시작 시간**: 매일 1회 풀백업을 수행하는 시간
- **보관중인 Backup 데이터 크기**: 완료된 백업 파일의 총 크기 (풀백업과 로그백업 파일의 합)
- **FullBackup 데이터 크기**: 풀백업 파일의 크기
- **Log Backup 데이터 크기**: 풀백업 이후에 생성된 로그백업의 크기
- **Log Backup 수**: 풀백업 이후에 생성된 로그백업의 개수
- **상세정보 보기**: 서버별 생성된 백업 파일 목록의 상세 정보 및 복원

### Backup 리스트 확인
[Backup] - [상세정보 보기] - [상세내역]에서 백업 수행을 완료하여 서버별로 생성된 백업 파일 목록을 확인하고 복원할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-06.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

- **DB 이름**: 백업된 DB 이름
- **FullBackup 시작시간**: 백업이 시작된 시간
- **FullBackup 종료시간**: 백업이 완료된 시간
- **FullBackup 크기**: 백업 파일의 사이즈
- **연관된 Log Backup 크기**: 풀백업 이후 생성된 로그백업의 사이즈

### 복원
[Backup] - [상세정보 보기] - [상세내역] - [복원하기] 기능으로 보관되어 있는 백업 파일 목록 가운데 원하는 백업 파일을 선택하여 MSSQL Server를 복원할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-07.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

Backup 파일 보관 기간 내의 원하는 시간으로 DB 복원이 가능합니다. 복원 요청 시 신규 DB Server가 생성되며, 선택한 시간으로 DB 데이터가 복원됩니다. 그리고, 생성된 DB Server는 **Stand Alone 모드로 복원**됩니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-08.png&quot; width=&quot;685&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

## Event 메뉴
Cloud DB for MSSQL 서버에서 발생한 이벤트 이력을 확인할 수 있습니다. 알람 항목과 임계치를 지정하여 이벤트를 생성하면 해당 이벤트가 발생할 때 메일과 SMS로 통보받을 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-09.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

이벤트 알림 설정은 [Event Rule 설정(Cloud Insight)]을 클릭하여 Cloud Insight 서비스로 이동하여 설정 가능합니다.

Cloud Insight 설정 방법은 아래 링크를 참조합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;
&amp;#8259; &lt;a href=&apos;/management/ncloud_management_cloud_insight_guide.html&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt; 모니터링 서비스 Cloud Insight 설정 가이드&lt;/a&gt;&lt;br /&gt;
&amp;#8259; &lt;a href=&apos;/management/ncloud-management-cloud-insight-rule-template-guide.html&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt; 모니터링 서비스 Cloud Insight Rule Template 설정 가이드&lt;/a&gt;
&quot; %}


## Config Group 메뉴
Config Group에서는 생성한 MSSQL Server를 그룹핑하여 그룹에 속한 서버들에 동일한 설정값을 지정하여 효율적으로 관리할 수 있고 생성, 변경, 삭제할 수 있습니다. 생성된 Config Group은 여러 MSSQL Service에 적용이 가능하며 MSSQL 설치 기본값이 포함된 Config Group이 기본 제공됩니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-10.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

### Config Group 생성

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-11.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

### Config 변경
`기본 Config Group는 임의로 변경할 수 없으며`, 추가로 생성한 Config Group만 변경이 가능합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-setting-manage-guide-12.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL의 메뉴와 주요 기능에 대한 간략한 소개&quot; caption=&quot;&quot; %}

### 삭제
기본 Config Group은 삭제가 불가능 합니다. 추가로 생성한 Config Group만 삭제가 가능합니다.



## 참고 URL
1. Ncloud Cloud DB for MSSQL 기본 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/clouddbformssql-start-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/clouddbformssql-start-vpc&lt;/a&gt;

2. Ncloud Cloud DB for MSSQL 기능 상세 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/clouddbformssql-dbserver-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/clouddbformssql-dbserver-vpc&lt;/a&gt;
</description>
            <pubDate>Wed, 31 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mssql-setting-manage-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mssql-setting-manage-guide.html</guid>
            
            <category>database</category>
            
            <category>mssql</category>
            
            <category>clouddb</category>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>Cloud DB for MSSQL 생성후 Public 도메인으로 접속하기</title>
            <description>## 개요
Ncloud(네이버 클라우드) VPC 환경에서 관리형 MSSQL DB 서버인 Cloud DB for MSSQL 생성 Public 도메인으로 접속하는 방법에 대하여 정리해보겠습니다.

## 테스트 환경
- VPC와 Public Subnet
- Cloud DB for MSSQL 15.0.4.198.2 Standard Edition (MSSQL 2019)

## Cloud DB for MSSQL 서비스 위치
[**콘솔**] - [**Services**] - [**Database**]에서  [**Cloud DB for MSSQL**]을 찾을 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

## Cloud DB for MSSQL 서버 생성
[**Cloud DB for MSSQL**] - [**DB Server**]에서 [**DB server 생성**] 버튼을 클릭합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

### 서버 설정
생성할 서버의 스펙 선택 및 세부정보를 입력합니다. 

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-18.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;Cloud DB for MSSQL은 **고가용성(HA) 기능 즉, 서버 이중화를 기본으로 지원**합니다. 운영 중인 Principal Server에서 장애가 발생하여 정상적인 서비스가 불가능한 경우 Mirror Server로 자동 Failover 합니다. DNS 방식으로 이중화를 구성하므로 별도의 애플리케이션 변경이 필요 없습니다.&quot; %}

{% include warning.html title=&quot;Subnet 선택 주의사항&quot; content=&quot;서버를 생성 후에는 Subnet 변경이 불가합니다. 회사 PC 등 외부에서 접근이 필요하실 경우는 ACG에서 IP 제한을 적용한 후 Public Subnet으로 설정하고, 내부 서버를 통해 접근하거나 SSL VPN을 이용해 접속할 경우는 Private Subnet으로 설정하면 됩니다. &quot; %}

{% include callout-v2.html type=&quot;success&quot; level=&quot;2&quot; content=&quot;여기서는 외부에서 접근하는 방식을 테스트할 예정이므로 **Public Subnet**을 선택합니다.&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Cloud DB for MSSQL의 스토리지 용량은 최소 100GB부터 10GB씩 자동 증가되며 최대 2TB까지 사용 가능합니다. &quot; %}

### DB 설정
다음으로 계정 정보와 DB 접속 포트 등을 입력하고, Backup 관련 설정을 선택합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-05.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Backup 파일 보관 기간은 최소 1일 부터 최대 30일까지 선택 가능하며 FullBackup만 지원하고 있습니다. Backup 시간은 자동 또는 수동모드로 변경하여 시간 지정이 가능합니다.&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;Cloud DB for MSSQL 서버는 고가용성을 선택할 경우 서버 생성까지 대략 **1시간** 정도가 소요되니 여유를 갖고 기다리시면 됩니다.&quot; %}

### DB 생성 완료
생성될 서버의 최종 정보를 확인하고 서버를 생성하면 아래와 같이 기본 옵션으로 선택했던 고가용성에 해당하는 Principal, Mirror 이렇게 2대의 서버가 생성된 것을 확인할 수 있습니다. 또한 Subnet도 [**Public Subnet**]으로 설정된 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-19.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}


## ACG 설정
이제 외부에서 Cloud DB for MSSQL로 접속할 수 있도록 ACG를 설정해야 합니다.

생성된 MSSQL DB 서버의 상세 정보를 살펴보면 DB 생성 과정에서 ACG가 자동으로 생성, 적용되어 있는 것을 아래와 같이 확인할 수 있습니다. 
- ACG 옆에 있는 아이콘을 클릭해서 ACG 화면으로 이동합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-20.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}


- 위에서 확인했던 Cloud DB for MSSQL의 ACG [**cloud-mssql-\*\*\***]를 선택 후 ACG 설정을 클릭합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-21.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

- Inbound 규칙에서 접근 소스는 [**myIp**] 버튼을 클릭해서 현재 IP 즉, 사무실 IP 등을 등록하고 허용 포트 1433을 추가합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-22.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}


## Public 도메인 할당
다음으로, 사무실 등의 외부에서 Cloud DB에 접속하려면 Public 도메인을 추가로 할당해야 합니다.  [**DB 관리**] - [**Public 도메인 관리**] 메뉴를 클릭해 Public 도메인을 신청합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-23.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

- Public 도메인 신청 팝업을 확인하고 [**예**] 버튼을 클릭합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-24.png&quot; width=&quot;485&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-25.png&quot; width=&quot;485&quot; sub-class=&quot;docimage-no-top&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

- 신청 후 잠시 기다렸다 Cloud DB for MSSQL 서버의 상세 정보를 살펴보면 아래와 같이 [**Public 도메인**]이 할당된 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-26.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}


## DB 서버 접속

### SQL Server Management Studio 설치
사무실 PC에 MSSQL Client인 SSMS (SQL Server Management Studio)를 다운로드하고 설치합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;
&amp;#8259; &lt;a href=&apos;https://learn.microsoft.com/ko-kr/sql/ssms/download-sql-server-management-studio-ssms&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt; SSMS (SQL Server Management Studio) 다운로드&lt;/a&gt;
&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-27.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

- 설치된 SSMS (SQL Server Management Studio)를 찾아서 실행합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-28.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

### DB Server Public 도메인 확인
아래 화면처럼 DB 서버 상세 정보에서 확인한 **Public 도메인** 주소를 복사해서 다음 단계인 DB 로그인 창에 입력하면 됩니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-26.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

### DB 로그인
로그인 접속 화면에서 정보를 입력하고 접속합니다.

- 서버 이름 : {MSSQL DB Server의 **Public 도메인**}, {접속 포트} (쉼표로 구분하여 입력)
- 인증 : [SQL Server 인증] 으로 변경합니다.
- 로그인 및 암호 : DB 서버 생성과정에서 입력한 유저 정보를 입력합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-29.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}

- 정상적으로 접속된 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-30.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성후 Public 도메인으로 접속하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. Ncloud Cloud DB for MSSQL 기본 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/clouddbformssql-start-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/clouddbformssql-start-vpc&lt;/a&gt;

2. SSMS (SQL Server Management Studio) 다운로드
	- &lt;a href=&quot;https://learn.microsoft.com/ko-kr/sql/ssms/download-sql-server-management-studio-ssms&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://learn.microsoft.com/ko-kr/sql/ssms/download-sql-server-management-studio-ssms&lt;/a&gt;
</description>
            <pubDate>Tue, 30 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mssql-public-domain-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mssql-public-domain-guide.html</guid>
            
            <category>database</category>
            
            <category>mssql</category>
            
            <category>clouddb</category>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>VPC환경에서 Cloud DB for MSSQL 생성하기</title>
            <description>## 개요
Ncloud(네이버 클라우드) VPC 환경에서 관리형 MSSQL DB 서버인 Cloud DB for MSSQL 생성 및 접속 방법에 대하여 정리해보겠습니다.

## 테스트 환경
- VPC와 Private Subnet
- Cloud DB for MSSQL 15.0.4.198.2 Standard Edition (MSSQL 2019)
- DB 접속 테스트용 서버 windows 2019 64bit en

## Cloud DB for MSSQL 서비스 위치
[**콘솔**] - [**Services**] - [**Database**]에서  [**Cloud DB for MSSQL**]을 찾을 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

## Cloud DB for MSSQL 서버 생성
[**Cloud DB for MSSQL**] - [**DB Server**]에서 [**DB server 생성**] 버튼을 클릭합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

### 서버 설정
생성할 서버의 스펙 선택 및 세부정보를 입력합니다. 

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-03.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;Cloud DB for MSSQL은 **고가용성(HA) 기능 즉, 서버 이중화를 기본으로 지원**합니다. 운영 중인 Principal Server에서 장애가 발생하여 정상적인 서비스가 불가능한 경우 Mirror Server로 자동 Failover 합니다. DNS 방식으로 이중화를 구성하므로 별도의 애플리케이션 변경이 필요 없습니다.&quot; %}

{% include warning.html title=&quot;Subnet 선택 주의사항&quot; content=&quot;서버를 생성 후에는 Subnet 변경이 불가합니다. 내부 서버를 통해 접근하거나 SSL VPN을 이용해 접속할 경우는 Private Subnet으로 설정하고, 회사 PC 등 외부에서 접근이 필요하실 경우는 ACG에서 IP 제한을 적용한 후 Public Subnet으로 설정하면 됩니다. &quot; %}

{% include callout-v2.html type=&quot;success&quot; level=&quot;2&quot; content=&quot;여기서는 내부 서버를 통해 접근하는 방식을 테스트할 예정이므로 **Private Subnet**을 선택합니다.&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-04.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-top-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Cloud DB for MSSQL의 스토리지 용량은 최소 100GB부터 10GB씩 자동 증가되며 최대 2TB까지 사용 가능합니다. &quot; %}

### DB 설정
다음으로 계정 정보와 DB 접속 포트 등을 입력하고, Backup 관련 설정을 선택합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-05.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Backup 파일 보관 기간은 최소 1일 부터 최대 30일까지 선택 가능하며 FullBackup만 지원하고 있습니다. Backup 시간은 자동 또는 수동모드로 변경하여 시간 지정이 가능합니다.&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;Cloud DB for MSSQL 서버는 고가용성을 선택할 경우 서버 생성까지 대략 **1시간** 정도가 소요되니 여유를 갖고 기다리시면 됩니다.&quot; %}

### DB 생성 완료
생성될 서버의 최종 정보를 확인하고 서버를 생성하면 아래와 같이 기본 옵션으로 선택했던 고가용성에 해당하는 Principal, Mirror 이렇게 2대의 서버가 생성된 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-06.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}


## 테스트용 Windows 서버 생성
Cloud DB for MSSQL 서버에 접속할 테스트 용도의 Windows 서버를 생성하고, 서버 정보에서 ACG 설정에 필요한 사설(비공인) IP를 확인합니다. 이 비공인 IP는 아래쪽 ACG 설정에서 사용하게 됩니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-07.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

## ACG 설정
이제 테스트용 Windows 서버에서 Cloud DB for MSSQL로 접속할 수 있도록 ACG를 설정해야 합니다.

생성된 MSSQL DB 서버의 상세 정보를 살펴보면 DB 생성 과정에서 ACG가 자동으로 생성, 적용되어 있는 것을 아래와 같이 확인할 수 있습니다. 
- ACG 옆에 있는 아이콘을 클릭해서 ACG 화면으로 이동합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-08.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}


- 위에서 확인했던 Cloud DB for MSSQL의 ACG [cloud-mssql-\*\*\*]를 선택 후 ACG 설정을 클릭합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-10.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

- Inbound 규칙에 위에서 확인했던 테스트용 Windows 서버의 비공인 IP를 접근 소스로 등록하고 허용 포트 1433을 추가합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-11.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}


## DB 서버 접속

### SQL Server Management Studio 설치
테스트용 Windows 서버에 할당된 공인IP로 접속해 MSSQL Client인 SSMS (SQL Server Management Studio)를 다운로드하고 설치합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;1&quot; content=&quot;
&amp;#8259; &lt;a href=&apos;https://learn.microsoft.com/ko-kr/sql/ssms/download-sql-server-management-studio-ssms&apos; target=&apos;_blank&apos; style=&apos;word-break:break-all;&apos;&gt; SSMS (SQL Server Management Studio) 다운로드&lt;/a&gt;
&quot; %}

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-16.png&quot; width=&quot;844&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

설치된 SSMS (SQL Server Management Studio)를 찾아서 실행합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-17.png&quot; width=&quot;844&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

### DB Server Private 도메인 확인
Cloud DB for MSSQL 서버에 접속하기 위해서는 DB 서버 생성 시에 설정된 **Private 도메인**을 이용해야 하는데, 아래 화면처럼 DB 서버 상세 정보에서 **Private 도메인**을 확인할 수 있습니다. 해당 **Private 도메인** 주소를 복사해서 다음 단계인 DB 로그인 창에 입력하면 됩니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-09.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

### DB 로그인
로그인 접속 화면에서 정보를 입력하고 접속합니다.

- Server name : {MSSQL DB Server의 **Private 도메인**}, {접속 포트} (쉼표로 구분하여 입력)
- Authentication : [SQL Server Authentication] 으로 변경합니다.
- Login 및 Password : DB 서버 생성과정에서 입력한 유저 정보를 입력합니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-13.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}

- 정상적으로 접속된 것을 확인할 수 있습니다.

{% include image.html file=&quot;database/ncloud-database-cloud-db-for-mssql-14.png&quot; width=&quot;845&quot; sub-class=&quot;docimage-no-bottom&quot; alt=&quot;Ncloud VPC환경에서 Cloud DB for MSSQL 생성하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. Ncloud Cloud DB for MSSQL 기본 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/clouddbformssql-start-vpc&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/clouddbformssql-start-vpc&lt;/a&gt;

2. SSMS (SQL Server Management Studio) 다운로드
	- &lt;a href=&quot;https://learn.microsoft.com/ko-kr/sql/ssms/download-sql-server-management-studio-ssms&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://learn.microsoft.com/ko-kr/sql/ssms/download-sql-server-management-studio-ssms&lt;/a&gt;
</description>
            <pubDate>Fri, 26 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mssql-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/database/ncloud-database-cloud-db-for-mssql-guide.html</guid>
            
            <category>database</category>
            
            <category>mssql</category>
            
            <category>clouddb</category>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>Load Balancer에 연동된 NginX에서 Client IP 기록하고 확인하는 방법</title>
            <description>## 개요
Ncloud (네이버 클라우드)에서 Load Balancer에 연동된 NginX 웹서버를 사용할 때 Load Balancer IP가 아닌 실제 Client IP를 기록하고 확인하는 방법을 알아보겠습니다.
결론부터 이야기 하자면 `NginX에서는 Apache와 달리 별도의 모듈 설치나 환경 설정 파일 수정 없이도 자동으로 실제 Client IP와 Load Balancer IP가 동시에 모두 기록`됩니다. 어떻게 기록되는지 테스트 결과를 보면서 확인해보겠습니다.

## 테스트 환경

{% include callout_v2.html type=&quot;secondary&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; Server-1: CentOS 7.8 &lt;br /&gt;
&amp;#8259; Server-2: Ubuntu 20.04 &lt;br /&gt;
&amp;#8259; NginX: NginX 1.23.1 &lt;br /&gt; 
&quot; %}

## 서버 준비
Ncloud 콘솔에서 CentOS 7.8, Ubuntu 20.04 두 대의 서버를 아래와 같이 준비했습니다.

{% include callout_v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;NginX를 설치하는 방법은 아래 문서를 참고하시기 바랍니다. &lt;br /&gt;&lt;br /&gt;
- &lt;a href=&apos;/compute/ncloud_compute_lemp_nginx_install_setting_centos_guide.html&apos; target=&apos;_blank&apos;&gt;CentOS에 NginX 설치하기&lt;/a&gt;&lt;br /&gt;
- &lt;a href=&apos;/compute/ncloud_compute_lemp_nginx_install_setting_ubuntu_guide.html&apos; target=&apos;_blank&apos;&gt;Ubuntu에 NginX 설치하기&lt;/a&gt;
&quot; %}

{% include image.html file=&quot;compute/lemp/ncloud-server-nginx-access-client-ip-log-01.png&quot; width=&quot;845&quot; alt=&quot;Load Balancer에 연동된 NginX 웹서버에서 Client IP 기록하고 확인하는 방법입&quot; caption=&quot;&quot; %}

## Load Balancer 준비
Load Balancer도 [**Application Load Balancer**]를 [**10.0.4.0**] 대역으로 설정해서 준비했습니다.

{% include callout_v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Application Load Blancer 의 생성 가이드는 아래 문서를 참고하시기 바랍니다. &lt;br /&gt;&lt;br /&gt;
- &lt;a href=&apos;/networking/ncloud_networking_load_balancer_application_lb.html&apos; target=&apos;_blank&apos;&gt;VPC 환경에서 Application Load Balancer 생성하기&lt;/a&gt;&quot; %}

{% include image.html file=&quot;compute/lemp/ncloud-server-nginx-access-client-ip-log-02.png&quot; width=&quot;845&quot; alt=&quot;Load Balancer에 연동된 NginX 웹서버에서 Client IP 기록하고 확인하는 방법입&quot; caption=&quot;&quot; %}

## Access Log 확인
Ncloud의 상품인 [**Cloud Log Analytics**]에서 NginX의 로그를 확인해보면 아래와 같이 Log 내용에 앞쪽에는 [**Load Balancer IP**]가 기록되어 있고, 제일 뒤쪽에는 [**실제 Client IP**]가 기록되어 있는 것을 확인할 수 있습니다. 해당 서버들에는 오로지 NginX만 설치했고, 다른 모듈을 설치하거나 환경 설정 파일을 변경하지 않은 상태입니다.

{% include image.html file=&quot;compute/lemp/ncloud-server-nginx-access-client-ip-log-03.png&quot; width=&quot;845&quot; alt=&quot;Load Balancer에 연동된 NginX 웹서버에서 Client IP 기록하고 확인하는 방법입&quot; caption=&quot;&quot; %}



## 참고 URL
1.  Rocky Linux NginX 설치 기본 가이드
	- &lt;a href=&quot;https://docs.rockylinux.org/guides/web/nginx-mainline/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.rockylinux.org/guides/web/nginx-mainline/&lt;/a&gt;

2.  Rocky Linux NginX Multi Site 설치 가이드
	- &lt;a href=&quot;https://docs.rockylinux.org/guides/web/nginx-multisite/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.rockylinux.org/guides/web/nginx-multisite/&lt;/a&gt;</description>
            <pubDate>Tue, 23 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud-compute-nginx-client-ip-logging-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud-compute-nginx-client-ip-logging-guide.html</guid>
            
            <category>lemp</category>
            
            <category>nginx</category>
            
            <category>log</category>
            
            
        </item>
        
        <item>
            <title>로드밸런서(Application Load Balancer) 접속 로그 확인하는 방법</title>
            <description>## 개요
Ncloud (네이버 클라우드) VPC 환경의 대표적인 로드밸런서(Load Balancer)인 **애플리케이션 로드밸런서(Application Load Balancer)의 접속 로그**를 확인하는 방법에 대해 정리해보겠습니다.  

## 테스트 준비
- 서버 생성: **록키 리눅스 (Rocky Linux 8.6)**
- 로드밸런서 생성: **애플리케이션 로드밸런서(Application Load Balancer)**
- 서버와 로드밸런서 연결

## 서버 생성
테스트용 서버는 **Rocky Linux 8.6 서버**로 생성했습니다.

{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}

## 로드밸런서 생성
**Application Load Balancer**를 생성하고 테스트용 서버와 연결까지 마쳤습니다.

{% include callout_v2.html type=&quot;info&quot;  content=&quot;Application Load Blancer 의 생성 가이드는 아래 문서를 참고하시기 바랍니다. &lt;br /&gt;&lt;br /&gt;
- &lt;a href=&apos;/networking/ncloud_networking_load_balancer_application_lb.html&apos; target=&apos;_blank&apos;&gt;VPC 환경에서 Application Load Balancer 생성하기&lt;/a&gt;&quot; %}

{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}

## 접속 로그 수집 활성화
로드밸런서의 접속 로그를 수집하려면 접속 로그 수집 기능을 활성화 해야 합니다. 생성된 로드밸런서를 선택하고 [**로드밸런서 설정 변경**] 버튼을 클릭합니다.

{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}

- [**로드밸런서 설정 변경**] 팝업창에서 [**액세스 로그 수집**] 항목이 [**비활성**] 상태인 것을 확인할 수 있습니다. 여기서 [**설정**] 버튼을 클릭합니다.
{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-06.png&quot; width=&quot;845&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}

- [**액세스 로그 수집**]을 활성화할 것인지 한번 더 확인하는 창이 뜨는데 [**확인**] 버튼을 클릭합니다.
{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-07.png&quot; width=&quot;485&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}

- [**로드밸런서 설정 변경**] 팝업창에서 [**액세스 로그 수집**] 항목이 [**활성**] 상태로 변경된 것을 확인할 수 있습니다.
{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-08.png&quot; width=&quot;845&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}


## 접속 테스트
웹브라우저에서 로드밸런서 주소로 접속해서 정상 작동하는지 확인했습니다.

{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-03.png&quot; width=&quot;840&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}

## 로드밸런서 접속 로그 확인
로드밸런서 접속 로그는 Ncloud 서비스 중에서 [**Cloud Log Analytics**]에서 확인할 수 있습니다.  

[**Cloud Log Analytics**] - [**Search**] - [**로그 종류 선택**]에서 [**application_loadbalancer_access**] 필드를 선택하고 [**Log 발생시간**]을 상황에 맞에 선택한 후에 검색을 하면 아래 스샷과 같이 접속로그를 확인할 수 있습니다.

{% include image.html file=&quot;networking/ncloud-networking-load-balancer-access-log-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud (네이버 클라우드) VPC 환경에서 Application Load Balancer의 접속 로그 확인하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. VPC 환경에서 Application Load Balancer 생성하기
	- &lt;a href=&quot;/networking/ncloud_networking_load_balancer_application_lb.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/networking/ncloud_networking_load_balancer_application_lb.html&lt;/a&gt;

2. Cloud Log Analytics 설정 가이드
	- &lt;a href=&quot;/analytics/ncloud_analytics_cloud_log_analytics_guide.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/analytics/ncloud_analytics_cloud_log_analytics_guide.html&lt;/a&gt;
</description>
            <pubDate>Fri, 19 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/networking/ncloud-networking-load-balancer-application-lb-access-log.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/networking/ncloud-networking-load-balancer-application-lb-access-log.html</guid>
            
            <category>vpc</category>
            
            <category>load_balancer</category>
            
            
        </item>
        
        <item>
            <title>VPC 환경에서 NAT Gateway 설정하기</title>
            <description>## 개요
NAT Gateway는 비공인 IP를 가진 다수의 서버들이 대표 공인 IP를 이용해 외부와 통신을 할 수 있도록 도와주는 네트워킹 서비스입니다.  
그리고, 일반적으로 서버에 직접 공인 IP를 부여하는 것과 달리 외부에서 서버로의 직접 접근은 허용하지 않기 때문에 높은 수준의 보안을 유지할 수 있는 것이 특징입니다.  
여기서는 VPC 환경에서 NAT Gateway를 어떻게 구성하고, NAT Gateway를 적용하기 전과 후의 외부와 통신 상태에 대해 확인해보도록 하겠습니다.

## NAT Gateway 특징
[**NAT Gateway**]는 생성 시 [**공인 NAT Gateway**]와 [**사설 NAT Gateway**]를 선택할 수 있습니다. **존당 5개까지 생성이 가능**하며, 각 NAT Gateway의 특징은 다음과 같습니다.

### 공인 NAT Gateway
- 사설 IP와 공인 IP를 둘 다 가지고 있습니다.
- 인터넷 outbound 통신을 할 때 Public IP에서 할당된 공인 IP를 사용합니다.
- VPC 내부에서 NAT Gateway를 통해 통신할 경우 할당된 사설 IP를 사용합니다.
- 할당된 공인 IP는 NAT Gateway를 삭제 시 재사용이 가능합니다.

### 사설 NAT Gateway
- 사설 IP만 가지고 있습니다.
- VPC 내부에서 NAT Gateway를 통해 통신할 경우 할당된 사설 IP를 사용합니다.

## VPC 서비스 위치
[**VPC**] 서비스는 [**Console**] - [**Networking**]에 위치해 있습니다.  

그리고, 아래 스샷에서 확인할 수 있듯이 [**VPC**]에는 [**VPC**], [**Subnet**], [**Network ACL**], [**NAT Gateway**], [**Route Table**], [**VPC Peering**], [**Virtual Private Gateway**] 등의 하부 서비스 메뉴가 있습니다.

{% include image.html file=&quot;networking/ncloud-networking-natgw-routetb-00.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## VPC 생성
먼저 VPC를 생성합니다. IP주소 범위는 10.0.0.0/16으로 정하겠습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_01.jpg&quot; width=&quot;700&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## Subnet 생성
Subnet은 아래와 같이 총 3가지를 준비하겠습니다.
- NAT Gateway 동작 테스트를 위해 서버용 Public, Private Subnet
- NAT Gateway를 배치할 **NAT Gateway 전용 Subnet** 

### Public Subnet 생성
Public Subnet의 IP 범위는 **10.0.0.0/24**로 설정하겠습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_02.jpg&quot; width=&quot;700&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Private Subnet 생성
Private Subnet의 IP 범위는 **10.0.1.0/24**로 설정하겠습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_03.jpg&quot; width=&quot;700&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### NAT Gateway 전용 Subnet
NAT Gateway 전용 Subnet은 Subnet 생성 화면에서 아래쪽 용도 설정에서 [**NatGateway**]를 선택합니다.

{% include image.html file=&quot;networking/ncloud-networking-natgw-routetb-01.png&quot; width=&quot;685&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## ACG 설정
테스트를 위한 ACG (Access Control Group)를 생성하고 설정합니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_04.jpg&quot; width=&quot;700&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Inbound 설정
Inbound 규칙에는 Public, Private Subnet과 SSH 접속을 위한 로컬PC IP를 허용하고, Ping 테스트를 위한 ICMP도 허용합니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_05.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Outbound 설정
Outbound 규칙은 TCP, UDP, ICMP 모두 전체 허용으로 추가합니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_06.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## 서버 생성
테스트를 위해 Public, Private 각각의 Subnet에 1대씩 서버를 설정하고 Public 서버에는 공인 IP도 할당합니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_07.jpg&quot; width=&quot;772&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Public -&gt; Private 서버 접속 확인
Public Subnet에 있는 서버에서 Private Subnet에 있는 서버로 통신이 가능한 것을 확인할 수 있습니다.  
다음 단계에서 Private 서버로 SSH로 접속하기 위한 사전 확인 단계입니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_08.jpg&quot; width=&quot;670&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Private 서버 외부 접속 여부 확인
Public 서버에서 Private 서버로 SSH로 접속한 후에 Private 서버에서 외부로 통신이 되는 것을 확인해보면 불가능한 것을 확인할 수 있습니다.  
이후 단계에서 NAT Gateway를 설정하고 Private 서버에서 외부와 통신이 가능한지 확인해보겠습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_09.jpg&quot; width=&quot;670&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## Route Table 설정 확인
NAT Gateway를 위한 Route Table 설정을 추가하기 전에 현재 상태의 Route Table 설정을 확인해보겠습니다.

### Public Subnet의 Route Table 설정 확인
위에서 Public Subnet의 서버와 Private Subnet의 서버가 통신이 가능했던 것은 VPC와 Subnet이 생성될때 Route Table이 생성되면서 VPC 내부 통신을 위한 규칙 (10.0.0.0/16 LOCAL)이 기본으로 설정되기 때문입니다.  
그리고 Public의 경우 외부 통신을 위한 INTERNET GATEWAY가 추가되어 있는 것을 확인할 수 있습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_10.jpg&quot; width=&quot;780&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Private Subnet의 Route Table 설정 확인
반면에 Private의 경우는 VPC 내부 통신을 위한 LOCAL만 설정된 것을 확인 할 수 있습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_11.jpg&quot; width=&quot;780&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

Route Table 설정 화면에 들어가도 Target Type에 LOCAL만 선택할 수 있는 것을 확인할 수 있습니다.
{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_14.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## NAT Gateway 생성
[**NAT Gateway**]는 별도의 메뉴가 있지 않고, [**Networking**] - [**VPC**] 서비스 내에 하부 서비스로 존재합니다. 그러면 이제 [**NAT Gateway 생성**] 버튼을 클릭합니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_15.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

이름을 입력하고 서비스 상황에 따라 유형을 [**공인**] 또는 [**사설**]을 선택한 후, VPC와 위에서 생성했던 **전용 Subnet**을 선택하고, NAT Gateway를 생성합니다. 그리고 마지막으로 Route Table에 NATGW 설정을 추가해야 완료되는데, 관련 설정은 아래에서 확인 가능합니다.

{% include image.html file=&quot;networking/ncloud-networking-natgw-routetb-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

### Route Table 설정
앞에서 LOCAL 항목만 존재했던 Private Subnet의 Route Table 설정 화면에 가보면 Target Type에 NATGW가 추가된 것을 확인할 수 있습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_18.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

목적지(Destination)에 0.0.0.0/0을 입력하고, Target Type을 NATGW를 선택하고 생성 버튼을 클릭합니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_19.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}

## 외부 접속 테스트
마지막으로 다시 한번 Private 서버에서 외부 통신이 가능한지 ping 테스트를 해보면, 아래 화면과 같이 정상적으로 통신이 되는 것을 확인할 수 있습니다.

{% include image.html file=&quot;networking/ncp_networking_natgw_routetb_20.jpg&quot; width=&quot;670&quot; alt=&quot;Ncloud VPC 환경에서 NAT Gateway 설정하기 가이드&quot; caption=&quot;&quot; %}


## 고려사항
{% include warning.html title=&quot;요금&quot; content=&quot;NAT Gateway는 사용하지 않고 생성만 해두어도 요금이 부과됩니다. (데이터 처리요금 별도)&quot; %}
  
생성 후 보유 시간에 따라 요금이 부과되는데 1개당 56원/시간 입니다. 그러므로 1달간 보유하고만 있다고 가정할 때 비용을 계산해보면 
**24시간 * 30일 * 56원 = 40,320원** 그러므로 사용하지 않는 NAT Gatway는 반드시 삭제하기를 추천드립니다.



## 참고 URL
1. NAT Gateway 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/networking-vpc-vpcdetailenatgw&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/networking-vpc-vpcdetailenatgw&lt;/a&gt;

2. NAT Gateway 특징과 비교
	- &lt;a href=&quot;https://m.blog.naver.com/n_cloudplatform/221173116642&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://m.blog.naver.com/n_cloudplatform/221173116642&lt;/a&gt;
</description>
            <pubDate>Tue, 16 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/networking/ncloud_networking_natgw_routetb.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/networking/ncloud_networking_natgw_routetb.html</guid>
            
            <category>vpc</category>
            
            <category>natgateway</category>
            
            <category>routetable</category>
            
            
        </item>
        
        <item>
            <title>Kubernetes Service 클러스터 생성 및 제어 가이드 | Linux</title>
            <description>## 개요
Ncloud (네이버 클라우드) VPC 환경에서 Kubernetes(쿠버네티스) 서비스를 생성하고 **Linux 환경에서 제어하는 방법**에 대해 소개합니다.

## 쿠버네티스란?
쿠버네티스(Kubernetes, K8S)는 배포, 스케일링, 그리고 컨테이너화된 애플리케이션의 관리를 자동화 해주는 오픈 소스 컨테이너 오케스트레이션 엔진으로 
구글에서 처음 개발하기 시작했으나 현재는 구글이 오픈소스 프로젝트로 공개한 상태입니다.

## 특징
쿠버네티스는 다음과 같은 특징이 있으며, 자세한 내용은 쿠버네티스 공식 페이지를 참고하시기 바랍니다.

&lt;a href=&quot;https://kubernetes.io/ko/docs/home/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://kubernetes.io/ko/docs/home/&lt;/a&gt;

- 서비스 디스커버리와 로드 밸런싱
- 스토리지 오케스트레이션
- 자동화된 롤아웃과 롤백
- 자동화된 빈 패킹(bin packing)
- 자동화된 복구(self-healing)
- 시크릿과 구성 관리


## 사전 준비
먼저 쿠버네티스 클러스터에 사용할 **전용 VPC와 Private 또는 Public Subnet 그리고, Load Balancer용 Subnet**이 필요합니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-36.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;3&quot; content=&quot;IP 대역(10.0.0.0/8,172.16.0.0/12,192.168.0.0/16) 내에서 /17~/26 범위의 Subnet, 로드밸런서 전용 Subnet이 필요합니다.&lt;br/&gt;&lt;br/&gt;
Docker Bridge 대역의 충돌을 방지하기 위해 172.17.0.0/16 범위 내의 Private Subnet, 로드밸런서 전용Subnet은 선택할 수 없습니다.&quot; %}

## 쿠버네티스 서비스 위치
Ncloud 쿠버네티스 서비스는 [콘솔] - [Services] - [Containers]에 위치하고 있습니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-33.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 클러스터 생성 

VPC와 Subnet이 준비되었다면, 다음으로 [Kubernetes Sevice] - [Cluster]에서 생성하기를 클릭합니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-34.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 클러스터 설정
생성할 클러스터의 정보를 설정해줍니다. 
**네트워크 타입은 Private과 Public 중에서 선택**할 수 있습니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Kubernetes Service를 위한 ACG는 자동으로 생성됩니다.&quot; %}
{% include callout-v2.html type=&quot;primary&quot; level=&quot;2&quot; content=&quot;현재 지원되고 있는 Kubernetes 버전은 [**1.24.0**], [**1.25.8**] 입니다.&quot;%}

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-35.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### NAT Gateway 생성
`Private Subnet을 선택했을 경우`에는 아래와 같이 NAT Gateway 생성 안내 팝업이 나타나는데,  
NAT Gateway를 생성해야 아웃바운드 트래픽을 활성화할 수 있기 때문입니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_10.jpg&quot; width=&quot;490&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

팝업에서 링크를 클릭해서 NAT Gateway 화면으로 이동해 NAT Gateway를 생성합니다.

{% include callout_v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;NAT Gateway 생성 가이드는 아래 문서를 참고하시기 바랍니다. &lt;br /&gt;&lt;br /&gt;
- &lt;a href=&apos;/networking/ncloud_networking_natgw_routetb.html&apos; target=&apos;_blank&apos;&gt;VPC 환경에서 NAT Gateway 설정하기&lt;/a&gt;&quot; %}

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_11.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 노드풀 설정
노드풀 이름을 입력하고, 서버 이미지와 서버 타입을 선택하고 [추가] 버튼을 클릭합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;현재 지원되고 있는 OS는 [**ubuntu 16.04**], [**ubuntu 18.04**], [**ubuntu 20.04**] 입니다.&quot;%}

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-37.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 인증키 설정
다음으로 워커노드의 인증키를 설정 합니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-38.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 최종 확인
설정 정보를 최종적으로 확인한 후 생성버튼을 클릭하여 클러스터를 생성합니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;쿠버네티스 클러스터 생성은 20분 정도 소요되므로 여유를 갖고 기다리시면 됩니다.&quot;%}

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_04.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 생성 완료
생성이 완료되면 아래와 같이 클러스터와 노드풀의 정보를 확인할 수 있습니다.  
클러스터 정보 중에서 클러스터 **UUID는 아래쪽에서 IAM 인증 Kubeconifg 파일을 생성할 때 필요**하니 확인해두시기 바랍니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-12.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

[Server] 메뉴에 가면 노드풀 설정에 따라 생성된 서버를 확인할 수 있습니다.  
(서버 이름은 노드풀 이름으로 입력한 문자열 기준으로 생성되는데, 여기서는 test123-O-OOO 이런 식으로 생성되었습니다.)

그리고, 추가로 테스트를 위한 CentOS 서버(k8s-test)를 생성했습니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-13.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## IAM 인증 설정
클러스터를 제어하기 위해서는 네이버 클라우드 쿠버네티스 서비스에서 제공하는 IAM 인증을 설정해야 합니다.

### ncp-iam-authenticator 설치
Ncloud에서 제공하는 ncp-iam-authenticator 바이너리를 통해 iam 인증 config 파일을 생성 할 수 있습니다.

- ncp-iam-authenticator 바이너리를 다운로드 합니다.

```bash
~# curl -o ncp-iam-authenticator https://kr.object.ncloudstorage.com/nks-download/ncp-iam-authenticator/v1.0.5/linux/amd64/ncp-iam-authenticator
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-14.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- 다운받은 바이너리에 실행 권한을 추가 합니다.

```bash
~# chmod +x ./ncp-iam-authenticator
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-15.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- bin/ncp-iam-authenticator 파일을 생성하고  $PATH에 추가합니다.
- bash Profile에 추가 합니다.

```bash
~# mkdir -p $HOME/bin &amp;&amp; cp ./ncp-iam-authenticator $HOME/bin/ncp-iam-authenticator &amp;&amp; export PATH=$PATH:$HOME/bin
```
```bash
~# echo &apos;export PATH=$PATH:$HOME/bin&apos; &gt;&gt; ~/.bash_profile
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-16.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- ncp-iam-authenticator가 정상 작동 하는지 테스트 합니다. 

```bash
~# ncp-iam-authenticator help
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-17.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## API 인증키 생성
네이버 클라우드 포탈 -&gt; 마이페이지 -&gt; 계정관리 -&gt; 인증키 관리 - API 인증키 관리 메뉴에서 Access Key ID와 Secret Key를 가져오셔야 하며, 아직 만들어진 Key가 없다면 새로 만드셔야 합니다.

{% include image.html file=&quot;api/ncloud_api_auth_key_create.png&quot; width=&quot;770&quot; alt=&quot;Ncloud API 인증키 생성 방법&quot; caption=&quot;&quot; %}

## Kubeconfig 파일 생성

### 환경변수 설정
API 인증키를 2가지 방법 중 하나를 이용해 환경변수에 등록합니다.  
  
- **첫번째 방법: OS 환경 변수 설정**

```bash
~# export NCLOUD_ACCESS_KEY={Ncloud API AccessKey}
~# export NCLOUD_SECRET_KEY={Ncloud API SecretKey}
~# export NCLOUD_API_GW=https://ncloud.apigw.ntruss.com
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-18.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- **두번째 방법: 사용자 환경 홈 디렉터리에 configure 설정**

```bash
~# mkdir .ncloud 
~# cat &lt;&lt; EOF &gt; .ncloud/configure
[DEFAULT]
ncloud_access_key_id = {Ncloud API AccessKey}
ncloud_secret_access_key = {Ncloud API SecretKey}
ncloud_api_url = https://ncloud.apigw.ntruss.com
EOF
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-19.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### Kubeconifg 파일 생성
환경변수에 등록이 되었다면 파일을 생성 할 차례입니다.  
아래 명령어로 클러스터에 대한 IAM 인증 Kubeconifg 파일을 생성합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;클러러스터 UUID 값은 클러스터 상세보기의 [클러스터 이름 (UUID)] 에서  확인 할수 있습니다.&quot; %}

``` bash
~# ncp-iam-authenticator create-kubeconfig --region &lt;region-code&gt; --clusterUuid &lt;cluster-uuid&gt; --output &lt;FileName&gt;.yaml

## 예시
~# ncp-iam-authenticator create-kubeconfig --region KR --clusterUuid 12345678-1234-1234-1234-1234567890 --output kubeconfig.yaml
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-20.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## kubectl 설치
쿠버네티스 클러스터를 제어할 kubectl을 설치하기 위해 필요한 파일을 다운로드 받습니다.

``` bash
~# curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-21.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

다운 받은 파일을 설치합니다.

``` bash
~# sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

# 버전 확인
~# kubectl version --client --output=yaml
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-22.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}



## kubectl 실행
생성한 IAM 인증 kubeconfig 파일을 이용하여 kubectl 명령어를 테스트하여 정상 동작 하는지 확인 합니다.  
실행하면 아래와 같이 현재 동작 중인 노드 서버 리스트를 확인할 수 있습니다.

```bash
~# kubectl get node --kubeconfig kubeconfig.yaml
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-23.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### 실행 명령어 단축
위와 같은 kubectl 명령은 뒤쪽에 kubeconfig 환경 설정 파일까지 입력해야 해서 다소 불편한데, 간단하게 줄일 수 있는 방법이 있습니다.  

우선 만들어진 kubeconfig.yaml 파일을 .kube/ 디렉토리 아래에 config로 이름을 바꾸어 이동 혹은 복사 합니다.

```bash
~# cp kubeconfig.yaml .kube/config
```

이렇게 하면 Kubectl을 사용 시 아래와 같이 --kuebeconfig 명령어 없이 사용 할 수 있습니다.

```bash
~# kubectl get node
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-24.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. 쿠버네티스 사용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8soverview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8soverview&lt;/a&gt;

2. 클러스터 이용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8suse-cluster&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8suse-cluster&lt;/a&gt;

3. kubectl 설치 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8sstart#Kubectl%EC%84%A4%EC%B9%98&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8sstart#Kubectl&lt;/a&gt;

4. Windows 환경에서 쿠버네티스 제어하기
	- &lt;a href=&quot;/containers/ncloud-containers-kubernetes-service-start-guide-windows.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-windows.html&lt;/a&gt;  	
</description>
            <pubDate>Mon, 15 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-linux.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-linux.html</guid>
            
            <category>kubernetes</category>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>Kubernetes Service 클러스터 생성 및 제어 가이드 | Windows</title>
            <description>## 개요
Ncloud (네이버 클라우드) VPC 환경에서 Kubernetes(쿠버네티스) 서비스를 생성하고 **Windows 환경에서 제어하는 방법**에 대해 소개합니다.

## 쿠버네티스란?
쿠버네티스(Kubernetes, K8S)는 배포, 스케일링, 그리고 컨테이너화된 애플리케이션의 관리를 자동화 해주는 오픈 소스 컨테이너 오케스트레이션 엔진으로 
구글에서 처음 개발하기 시작했으나 현재는 구글이 오픈소스 프로젝트로 공개한 상태입니다.

## 특징
쿠버네티스는 다음과 같은 특징이 있으며, 자세한 내용은 쿠버네티스 공식 페이지를 참고하시기 바랍니다.

&lt;a href=&quot;https://kubernetes.io/ko/docs/home/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://kubernetes.io/ko/docs/home/&lt;/a&gt;

- 서비스 디스커버리와 로드 밸런싱
- 스토리지 오케스트레이션
- 자동화된 롤아웃과 롤백
- 자동화된 빈 패킹(bin packing)
- 자동화된 복구(self-healing)
- 시크릿과 구성 관리


## 사전 준비
먼저 쿠버네티스 클러스터에 사용할 **전용 VPC와 Private 또는 Public Subnet 그리고, Load Balancer용 Subnet**이 필요합니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-36.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;3&quot; content=&quot;IP 대역(10.0.0.0/8,172.16.0.0/12,192.168.0.0/16) 내에서 /17~/26 범위의 Subnet, 로드밸런서 전용 Subnet이 필요합니다.&lt;br/&gt;&lt;br/&gt;
Docker Bridge 대역의 충돌을 방지하기 위해 172.17.0.0/16 범위 내의 Private Subnet, 로드밸런서 전용Subnet은 선택할 수 없습니다.&quot; %}

## 쿠버네티스 서비스 위치
Ncloud 쿠버네티스 서비스는 [콘솔] - [Services] - [Containers]에 위치하고 있습니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-33.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 클러스터 생성 

VPC와 Subnet이 준비되었다면, 다음으로 [Kubernetes Sevice] - [Cluster]에서 생성하기를 클릭합니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-34.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 클러스터 설정
생성할 클러스터의 정보를 설정해줍니다. 
**네트워크 타입은 Private과 Public 중에서 선택**할 수 있습니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Kubernetes Service를 위한 ACG는 자동으로 생성됩니다.&quot; %}
{% include callout-v2.html type=&quot;primary&quot; level=&quot;2&quot; content=&quot;현재 지원되고 있는 Kubernetes 버전은 [**1.24.0**], [**1.25.8**] 입니다.&quot;%}

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-35.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


### NAT Gateway 생성
`Private Subnet을 선택했을 경우`에는 아래와 같이 NAT Gateway 생성 안내 팝업이 나타나는데,  
NAT Gateway를 생성해야 아웃바운드 트래픽을 활성화할 수 있기 때문입니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_10.jpg&quot; width=&quot;490&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

팝업에서 링크를 클릭해서 NAT Gateway 화면으로 이동해 NAT Gateway를 생성합니다.

{% include callout_v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;NAT Gateway 생성 가이드는 아래 문서를 참고하시기 바랍니다. &lt;br /&gt;&lt;br /&gt;
- &lt;a href=&apos;/networking/ncloud_networking_natgw_routetb.html&apos; target=&apos;_blank&apos;&gt;VPC 환경에서 NAT Gateway 설정하기&lt;/a&gt;&quot; %}

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_11.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 노드풀 설정
노드풀 이름을 입력하고, 서버 이미지와 서버 타입을 선택하고 [추가] 버튼을 클릭합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;현재 지원되고 있는 OS는 [**ubuntu 16.04**], [**ubuntu 18.04**], [**ubuntu 20.04**] 입니다.&quot;%}

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-37.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 인증키 설정
다음으로 워커노드의 인증키를 설정 합니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-38.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 최종 확인
설정 정보를 최종적으로 확인한 후 생성버튼을 클릭하여 클러스터를 생성합니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;쿠버네티스 클러스터 생성은 20분 정도 소요되므로 여유를 갖고 기다리시면 됩니다.&quot;%}

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_04.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 생성 완료
생성이 완료되면 아래와 같이 클러스터와 노드풀의 정보를 확인할 수 있습니다.  
클러스터 정보 중에서 클러스터 **UUID는 아래쪽에서 IAM 인증 Kubeconifg 파일을 생성할 때 필요**하니 확인해두시기 바랍니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-12.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

[Server] 메뉴에 가면 노드풀 설정에 따라 생성된 서버를 확인할 수 있습니다.  
(서버 이름은 노드풀 이름으로 입력한 문자열 기준으로 생성되는데, 여기서는 test123-O-OOO 이런 식으로 생성되었습니다.)

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-13.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## IAM 인증 설정
클러스터를 제어하기 위해서는 네이버 클라우드 쿠버네티스 서비스에서 제공하는 IAM 인증을 설정해야 합니다.

### ncp-iam-authenticator 설치
Ncloud에서 제공하는 ncp-iam-authenticator 바이너리를 통해 iam 인증 config 파일을 생성 할 수 있습니다.

- ncp-iam-authenticator 바이너리를 다운로드 합니다.

``` powershell
&gt; curl -o ncp-iam-authenticator.exe https://kr.object.ncloudstorage.com/nks-download/ncp-iam-authenticator/v1.0.5/windows/amd64/ncp-iam-authenticator.exe
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-25.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

- ncp-iam-authenticator가 정상 작동 하는지 테스트 합니다. 

``` powershell
&gt; ncp-iam-authenticator help
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-26.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## API 인증키 생성
네이버 클라우드 포탈 -&gt; 마이페이지 -&gt; 계정관리 -&gt; 인증키 관리 - API 인증키 관리 메뉴에서 Access Key ID와 Secret Key를 가져오셔야 하며, 아직 만들어진 Key가 없다면 새로 만드셔야 합니다.

{% include image.html file=&quot;api/ncloud_api_auth_key_create.png&quot; width=&quot;770&quot; alt=&quot;Ncloud API 인증키 생성 방법&quot; caption=&quot;&quot; %}

## Kubeconfig 파일 생성
API 인증키를 2가지 방법 중 하나를 이용해 환경변수에 등록합니다.

**1. OS 환경 변수 설정**

``` powershell
&gt; SET NCLOUD_ACCESS_KEY={Ncloud API AccessKey}
&gt; SET NCLOUD_SECRET_KEY={Ncloud API SecretKey}
&gt; SET NCLOUD_API_GW=https://ncloud.apigw.ntruss.com
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-27.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


**2. 사용자 계정 홈 폴더에 configure 설정**  
Windows 사용자 계정 폴더에 .ncloud 폴더를 만들고 아래와 같은 내용으로 configure 파일을 생성합니다.

``` powershell
&gt; mkdir C:\Users\{User Account}\.ncloud
&gt; copy con C:\Users\{User Account}\.ncloud\configure
[DEFAULT]
ncloud_access_key_id = {Ncloud API AccessKey}
ncloud_secret_access_key = {Ncloud API SecretKey}
ncloud_api_url = https://ncloud.apigw.ntruss.com
^Z
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-28.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

**3. Kubeconifg 파일 생성**  
환경변수에 등록이 되었다면 파일을 생성 할 차례입니다.  
아래 명령어로 클러스터에 대한 IAM 인증 Kubeconifg 파일을 생성합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;클러러스터 UUID 값은 클러스터 상세보기의 [클러스터 이름 (UUID)] 에서  확인 할수 있습니다.&quot; %}

``` powershell
&gt; ncp-iam-authenticator create-kubeconfig --region &lt;region-code&gt; --clusterUuid &lt;cluster-uuid&gt; --output &lt;FileName&gt;.yaml

## 예시
&gt; ncp-iam-authenticator create-kubeconfig --region KR --clusterUuid 12345678-1234-1234-1234-1234567890 --output kubeconfig.yaml
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-29.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## kubectl 설치
쿠버네티스 클러스터를 제어할 kubectl을 설치하기 위해 필요한 파일을 다운로드 받고, 버전 정보를 확인합니다.

아래 두가지 방법 중에 하나를 선택해 다운로드 받으시면 됩니다.

&lt;a href=&quot;https://dl.k8s.io/release/v1.24.0/bin/windows/amd64/kubectl.exe&quot; target=&quot;_self&quot; style=&quot;word-break:break-all;&quot;&gt;Download the latest release v1.24.0&lt;/a&gt;

``` bash
&gt; curl -LO https://dl.k8s.io/release/v1.24.0/bin/windows/amd64/kubectl.exe
```

``` powershell
&gt; kubectl version --client --output=yaml
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-30.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## kubectl 실행
생성한 IAM 인증 kubeconfig 파일을 이용하여 kubectl 명령어를 테스트하여 정상 동작 하는지 확인 합니다.  
실행하면 아래와 같이 현재 동작 중인 노드 서버 리스트를 확인할 수 있습니다.

``` powershell
&gt; kubectl get node --kubeconfig kubeconfig.yaml
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-31.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### 실행 명령어 단축
위와 같은 kubectl 명령은 뒤쪽에 kubeconfig 환경 설정 파일까지 입력해야 해서 다소 불편한데, 간단하게 줄일 수 있는 방법이 있습니다.  

우선 만들어진 kubeconfig.yaml 파일을 .kube/ 디렉토리 아래에 config로 이름을 바꾸어 이동 혹은 복사 합니다.

``` powershell
&gt; copy kubeconfig.yaml .kube\config
```

이렇게 하면 Kubectl을 사용 시 아래와 같이 --kuebeconfig 명령어 없이 사용 할 수 있습니다.

``` powershell
&gt; kubectl get node
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-32.png&quot; width=&quot;843&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. 쿠버네티스 사용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8soverview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8soverview&lt;/a&gt;

2. 클러스터 이용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8suse-cluster&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8suse-cluster&lt;/a&gt;

3. kubectl 설치 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8sstart#Kubectl%EC%84%A4%EC%B9%98&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8sstart#Kubectl&lt;/a&gt;

4. Linux 환경에서 쿠버네티스 제어하기
	- &lt;a href=&quot;/containers/ncloud-containers-kubernetes-service-start-guide-linux.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-linux.html&lt;/a&gt;    
</description>
            <pubDate>Mon, 15 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-windows.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-windows.html</guid>
            
            <category>kubernetes</category>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>AWS CLI 버전 2를 이용한 Object Storage 접속 방법</title>
            <description>## 개요
Ncloud (네이버 클라우드) Object Storage는 AWS의 스토리지 서비스 S3와 호환이 되도록 설계되어 있습니다.  
그래서 Object Storage에 접속, 관리할 때 AWS의 CLI(Command Line Interface)를 사용할 수 있는데 그 중에서 AWS CLI 버전 2의 설치와 사용방법에 대해 정리해보겠습니다.

## AWS CLI 버전 2 설치 {#awscliinstall}

{% include note.html content=&quot;AWS CLI 버전 1에서는 설치와 실행에 Python과 PIP를 이용하는 방법이 주로 사용되었지만, AWS CLI 버전 2에서는 Python 임베디드 버전이 포함되어 있어 별도로 설치할 필요가 없기에 설치 파일도 ZIP 압축 파일 형태로 제공됩니다.&quot; %}

### 설치 파일 다운로드
AWS CLI 버전 2 설치 파일을 awscliv2.zip 이름으로 다운로드 합니다.

``` bash
~# curl &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;awscliv2.zip&quot;
```
{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-01.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

### 압축 풀기
unzip으로 압축을 풀겠습니다.

``` bash
~# unzip awscliv2.zip
```
{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-02.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

### 설치
아래 명령으로 쉽게 설치할 수 있습니다.

``` bash
~# ./aws/install
```
{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-03.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

### 버전 확인
설치가 완료된 후 버전을 확인해보면 아래와 같이 AWS CLI 버전과 임베디드된 Python 버전도 확인할 수 있습니다.

``` bash
~# aws --version
```
{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-04.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}


## API 인증키 생성
다음으로 접속에 필요한 인증키를 Ncloud (네이버 클라우드) 포탈 - 마이페이지 - 계정관리 - 인증키 관리 - API 인증키 관리 메뉴에서 Access Key ID와 Secret Key를 가져오셔야 하며, 아직 만들어진 Key가 없다면 새로 만드셔야 합니다.

{% include image.html file=&quot;api/ncloud_api_auth_key_create.png&quot; width=&quot;770&quot; alt=&quot;Ncloud API 인증키 생성 방법&quot; caption=&quot;&quot; %}

## AWS CLI 환경 설정
이제 AWS CLI로 접속하기 위해 환경설정을 해야 합니다.  
위 단계에서 확인한 Access Key ID와 Secret Key를 아래 화면에서 입력하고 나머지 2가지 항목은 입력하지 않으셔도 됩니다.
``` bash
~# aws configure

AWS Access Key ID [None]: 3frEtFjfkdsj89243nkfv89s
AWS Secret Access Key [None]: 0kr23-0vsijr2390fw:L?K23-0vcdsjr2390fchnr123[]vl/fwsh
Default region name [None]: [Enter]
Default output format [None]: [Enter]
```

{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-05.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

## Object Storage 접속
이제 Object Storage로 접속해보겠습니다. 얼핏 명령어만 보면 AWS에 접속하는 것처럼 보입니다. 그래서 네이버 클라우드로 접속하기 위한 --endpoint-url= 로 시작하는 옵션이 반드시 필요합니다.
``` bash
# Object Storage에 존재하는 전체 버킷 리스트를 조회하는 명령어입니다.
~# aws --endpoint-url=https://kr.object.ncloudstorage.com s3 ls

# s3 ls 명령으로 Object Storage에 존재하는 aws-cli-test 버킷에 있는 오브젝트 리스트를 조회하는 예시입니다.
~# aws --endpoint-url=https://kr.object.ncloudstorage.com s3 ls s3://aws-cli-test

# 로컬에 백업된 데이터를 Object Storage에 백업-동기화하는 명령어 예시입니다.
~# aws --endpoint-url=https://kr.object.ncloudstorage.com s3 sync /data_backup/ s3://data-back-up/
```
{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-06.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

## AWS CLI 업데이트
설치된 AWS CLI를 최신 버전으로 업데이트 하려면 아래 명령어를 사용하면 됩니다. 최신 버전이 설치된 상태에서는 아래 스샷처럼 이미 최신 버전과 동일한 버전이 설치되어 있다는 메시지가 나타납니다.

``` bash
~# ./aws/install --bin-dir /usr/local/bin --install-dir /usr/local/aws-cli --update
```

{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-07.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

## AWS CLI 삭제
설치된 AWS CLI를 삭제하려면 아래의 단계대로 진행하시면 됩니다.

### symlink 삭제
``` bash
~# rm /usr/local/bin/aws
~# rm /usr/local/bin/aws_completer
```

### 설치 디렉토리 삭제
``` bash
~# rm -rf /usr/local/aws-cli
```

### 설정 정보 삭제 (선택 사항)
AWS CLI 환경 설정 정보는 서버 내의 모든 AWS SDK 및 AWS CLI에서 공유되므로 더 이상 사용하지 않는다면 삭제하시면 됩니다.

``` bash
~# rm -rf ~/.aws/
```

{% include image.html file=&quot;storage/ncloud-storage-object-storage-aws-cli-guide-08.png&quot; width=&quot;840&quot; alt=&quot;AWS CLI를 설치하고 Ncloud Object Storage에 접속하는 방법&quot; caption=&quot;&quot; %}

## 참고 URL

1.  AWS CLI 버전 2 가이드
	- &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/cli-chap-welcome.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.aws.amazon.com/ko_kr/cli/latest/userguide/cli-chap-welcome.html&lt;/a&gt;

2.  Ncloud Object Storage CLI 가이드
	- &lt;a href=&quot;https://cli.ncloud-docs.com/docs/guide-objectstorage&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://cli.ncloud-docs.com/docs/guide-objectstorage&lt;/a&gt;	
</description>
            <pubDate>Tue, 09 May 2023 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/storage/ncloud_storage_object_storage_aws_cli_connect.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/storage/ncloud_storage_object_storage_aws_cli_connect.html</guid>
            
            <category>aws</category>
            
            <category>s3</category>
            
            <category>object_storage</category>
            
            <category>cli</category>
            
            <category>api</category>
            
            <category>auth</category>
            
            
        </item>
        
    </channel>
</rss>
