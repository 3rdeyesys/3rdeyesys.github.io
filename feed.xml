<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>3RDEYESYSTEM Technical Documentations</title>
        <description>써드아이시스템(3rdeyesys) 기술문서 사이트입니다 - Ncloud 프리미엄 파트너</description>
        <link>https://docs.3rdeyesys.com/</link>
        <atom:link href="https://docs.3rdeyesys.com/feed.xml" rel="self" type="application/rss+xml"/>
        <pubDate>Mon, 19 Dec 2022 15:12:28 +0900</pubDate>
        <lastBuildDate>Mon, 19 Dec 2022 15:12:28 +0900</lastBuildDate>
        <generator>Jekyll v4.2.2</generator>
        
        
        <item>
            <title>Classic 환경에서 SSL VPN 설정하고 접속하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드) 외부에서 내부에 구성된 네트워크로 암호화된 보안 접속 통신을 제공하는 서비스인 SSL VPN을 Classic 환경에서 설정하고, 서버에 접속하는 방법에 대해 정리해보겠습니다.

## SSL VPN이란?
- VPN은 가상 사설망(Virtual Private Network)의 약자로, 외부에서 접근할 수 없는 사설망에 내 PC나 네트워크를 연결시키는 방법을 말합니다.
- 사설망과의 연결은 가상 터널을 통해 이루어지며, 이 가상 터널을 SSL 암호화로 보호하는 것이 SSL VPN입니다.
- 가상 터널을 통해 사설망과 연결된 사용자 PC는 사설망의 라우팅 및 ACL 정책에 따라 내부 서버에 접근할 수 있습니다.


## SSL VPN 생성
[SSL VPN 생성] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_01.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

우선 등록 가능한 접속 ID 개수에 따른 상품을 선택합니다. Classic 환경에서는 3개, 5개, 10개 상품만 선택 가능합니다. 
다음으로 인증 방식은 ID/PW 만으로 접속하는 일차인증과 OTP까지 사용하는 이차 인증 중에서 원하는 방식을 선택합니다. 
그리고 이차인증을 선택했을 경우에는 SMS와 Email 어떤 것을 이용할 것인지도 선택하게 됩니다.

{% include callout_v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; 인증방식과 OTP 전송 방식은 SSL VPN 생성 시에 한번 선택하면 변경할 수 없으니 주의해야 합니다. &lt;br /&gt;
&amp;#8259; 만약 변경 하고 싶을 경우에는 SSL VPN을 새로 생성해야 합니다. &lt;br /&gt;
&amp;#8259; Classic 환경에서는 이차인증을 선택하면 별도의 이용요금이 부과됩니다.
&quot; %}


{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_02.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

다음으로 개인정보 수집 및 이용에 동의해야 합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_03.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

SSL VPN이 생성되면 다음과 같이 리스트에 서 확인 가능하며 여기서 [**SSL VPN IP POOL**]은 뒤쪽에서 네트워크 접근 제한을 설정할 때 필요한 중요한 정보입니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_04.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 사용자 설정
SSL VPN에 접속할 사용자 정보를 설정합니다.  리스트에서 SSL VPN을 선택하고 [사용자 설정] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_05.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자 정보는 ID, Passowrd, Email, SMS 등을 입력하고 [추가] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_06.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자가 추가되면 SSL VPN 정보에 사용자 계정 수(등록된 ID 수)에 숫자가 표시되는 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_07.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## ACG 설정
SSL VPN을 사용하려면 서버에 적용된 ACG에 [**SSL VPN IP POOL**]을 등록해야 합니다.  
우선 SSL VPN을 통해서 접속할 서버를 선택하고 적용된 ACG를 확인합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_08.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[Server] - [ACG]에서 위에서 확인한 ACG를 선택하고 [ACG 설정]을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_09.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

ACG 규칙 설정 화면에서 위에서 확인했던 [**SSL VPN IP POOL**]을 접근 소스에 입력하고, 필요한 포트들을 등록합니다. 
기본이 되는 프로토콜과 포트는 리눅스 서버 접속용 TCP 22, 윈도우 서버 접속용 TCP 3389, Ping 확인용 ICMP 등입니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_10.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 다운로드
SSL VPN 접속을 위한 Agent를 다운로드 합니다.  

- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-windowsdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;윈도우 용 다운로드&lt;/a&gt;
- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-macdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;맥 용 다운로드&lt;/a&gt;

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_11.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## Agent 접속
Agent 프로그램, BIG-IP Edge Client를 설치하고 실행하면 다음과 같은 화면을 볼 수 있습니다.  
Agent에는 Classic 환경 SSL VPN 서버(Ncloud-kr-01)가 기본으로 설정되어 있는데, 혹시 빠져 있다면 [서버 변경] 버튼을 클릭해서 **https://sslvpn-kr-01.ncloud.com**을 입력하고 연결 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_12.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

위에서 설정했던 VPN 접속용 아이디와 Password를 입력하고 [로그온] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_13.png&quot; width=&quot;650&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

OTP 접속도 설정했다면 도착한 인증 번호를 입력합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_14.png&quot; width=&quot;650&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

SSL VPN에 제대로 연결이 되었는지 확인하기 위해서 cmd 창을 띄워서 ipconfig 명령어를 입력하면 아래 화면처럼 SSL VPN 주소로 설정된 어탭터에  [**SSL VPN IP POOL**]에 해당하는 IP가 할당된 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_15.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 서버 접속
이제 SSL VPN이 연결된 상태에서 서버에 접속해보겠습니다.  
PuTTY 를 실행하고 접속할 서버의 IP를 입력합니다.  
이때 서버 IP는 콘솔에 있는 서버 정보에서 **비공인 IP**에 표시되는 IP를 입력하면 됩니다.

{% include important.html title=&quot;IP 입력&quot; content=&quot;이때 혹시나 포트 포워딩이나 공인 IP를 설정하고 그 IP를 입력하는 일이 없도록 주의해야 합니다.&quot; %}


{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_16.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 기타 설정
SSL VPN Agent에는 몇가지 추가 기능이 있는데 아래에서 확인해보겠습니다.

### 트래픽 그래프
Agent 창에서 [그래프 보기] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_17.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

여기서는 SSL VPN이 연결된 상태의 트래픽을 그래프로 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_18.png&quot; width=&quot;560&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

다음으로 [상세 보기] 버튼을 클릭하면 접속 세부 정보, 로그, 통계, 알림, 라우팅 테이블, IP설정 등의 정보를 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_19.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 스펙 변경
처음에 설정한 접속 가능 ID 개수를 변경하고 싶을 경우 SSL VPN을 선택하고 [스펙 변경] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_20.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

3개, 5개, 10개 상품 중에서 원하는 개수로 변경할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_21.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 주의사항
{% include warning.html title=&quot;접속 오류&quot; content=&quot;SSL VPN이 연결된 상태에서 새로운 서버를 생성하고 접속을 시도하면 아래와 같은 오류 메시지가 뜨면서 서버 접속이 되지 않습니다.  이때는 SSL VPN의 연결을 끊었다가 다시 연결해야 새로 생성한 서버에 접속할 수 있습니다.&quot; %}

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_23.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 삭제
삭제를 원할 경우 SSL VPN을 선택하고 상단의 [삭제] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_22.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## 참고 URL
1.  SSL VPN 사용 가이드(Classic)
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-security-5-1&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/security-security-5-1&lt;/a&gt;

2. SSL VPN 요금
	- &lt;a href=&quot;https://www.ncloud.com/product/security/sslVpn&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.ncloud.com/product/security/sslVpn&lt;/a&gt;
</description>
            <pubDate>Thu, 08 Dec 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/networking/ncloud_networking_ssl_vpn_classic_guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/networking/ncloud_networking_ssl_vpn_classic_guide.html</guid>
            
            <category>classic</category>
            
            <category>ssl</category>
            
            <category>vpn</category>
            
            
        </item>
        
        <item>
            <title>VPC 환경에서 SSL VPN 설정하고 접속하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드) 외부에서 내부에 구성된 네트워크로 암호화된 보안 접속 통신을 제공하는 서비스인 SSL VPN을 VPC 환경에서 설정하고, 서버에 접속하는 방법에 대해 정리해보겠습니다.

## SSL VPN이란?
- VPN은 가상 사설망(Virtual Private Network)의 약자로, 외부에서 접근할 수 없는 사설망에 내 PC나 네트워크를 연결시키는 방법을 말합니다.
- 사설망과의 연결은 가상 터널을 통해 이루어지며, 이 가상 터널을 SSL 암호화로 보호하는 것이 SSL VPN입니다.
- 가상 터널을 통해 사설망과 연결된 사용자 PC는 사설망의 라우팅 및 ACL 정책에 따라 내부 서버에 접근할 수 있습니다.


## SSL VPN 생성 요청
[SSL VPN 생성] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_01.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

우선 접근할 서버가 속해 있는 VPC를 선택하고, 등록 가능한 접속 ID 개수에 따른 상품을 선택합니다.  
VPC 환경에서는 3, 5, 10, 20, 30, 50, 100, 200, 300, 400, 500개 상품 중에서 선택 가능합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_07.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

VPC 환경의 SSL VPN은 콘솔에서 자동으로 생성하는 것이 아니라 `생성 요청을 하면 Ncloud 담당자가 직접 생성하고 결과를 안내 받는 구조`로 되어 있습니다. 
생성 완료까지 걸리는 기간은 **업무일 기준 2~3일** 정도이며, 생성이 완료되면 SSL VPN 상태가 [운영중]으로 변경되고, 안내 메일이 도착합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_03.png&quot; width=&quot;500&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

아래와 같이 생성 요청을 하고 나면 상태가 [생성중] 상태로 표시 됩니다. 2~3일 후 생성 완료 안내 메일이 도착할때까지 기다리시면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_04.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## SSL VPN 생성 완료
SSL VPN 생성이 완료되면 아래와 같은 메일을 받을 수 있습니다.   
메일 내용에는 [**SSL VPN IP POOL**] 정보와 접속 경로 정보가 포함되어 있으니 잘 확인해야 합니다.

{% include warning.html title=&quot;IP POOL&quot; content=&quot;특히 [**SSL VPN IP POOL**] 정보는 Ncloud 콘솔에서 확인할 수 없고, 오로지 생성 완료 메일에서만 확인 가능하니 잘 보관해야 합니다.&quot; %}


{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_05.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

생성 완료 메일 확인 후에 콘솔에 접속하면 아래와 같이 [운영중] 으로 상태 메시지가 바뀐 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_06.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 사용자 설정
SSL VPN에 접속할 사용자 정보를 설정합니다.  리스트에서 SSL VPN을 선택하고 [사용자 설정] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_08.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자 정보는 ID, Passowrd, Email, SMS 등을 입력하고 [추가] 버튼을 클릭합니다.  
VPC 환경은 Classic 환경과 달리 이차인증이 필수이므로  SMS와 Email 정보를 함께 입력합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_09.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자가 추가되면 SSL VPN 정보에 사용자 계정 수(등록된 ID 수)에 숫자가 표시되는 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_10.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## Route Table 설정
네트워크 설정에서는 우선 접속할 서버가 속해 있는 VPC Subnet의 Route Table에 SSL VPN으로 접근할 수 있게 [**SSL VPN IP POOL**]을 등록해야 합니다.  
아래와 같이 접속할 서버의 상세정보에서 VPC와 Subnet을 확인합니다. 여기서는 Private Subnet에 생성한 서버에 접속할 예정입니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_11.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[VPC] - [Route Table]에서 해당 VPC의 Private Subnet을 선택하고 [Routes 설정] 버튼을 클릭합니다.  
Public Subnet에 생성한 서버에 접근해야 할 경우에는 public-table을 선택하고 설정하시면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_12.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[Destination]에 SSL VPN 생성 완료 메일에서 확인한 [**SSL VPN IP POOL**] 정보를 등록하고, [Target Type]은 SSLVPN을 선택, [Target Name]은 위에서 생성한 SSL VPN 이름을 선택하고 [생성] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_13.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## ACG 설정
다음으로 서버에 적용된 ACG에 [**SSL VPN IP POOL**]을 등록해야 합니다.  
우선 SSL VPN을 통해서 접속할 서버를 선택하고 [ACG 수정] 버튼을 클릭해서 적용된 ACG를 확인합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_14.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

ACG 수정 화면에서 현재 적용된 ACG 이름을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_15.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[Server] - [ACG]에서 위에서 확인한 ACG를 선택하고 [ACG 설정]을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_16.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

ACG 규칙 설정 화면에서 위에서 확인했던 [**SSL VPN IP POOL**]을 접근 소스에 입력하고, 필요한 포트들을 등록합니다. 
기본이 되는 프로토콜과 포트는 리눅스 서버 접속용 TCP 22, 윈도우 서버 접속용 TCP 3389, Ping 확인용 ICMP 등입니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_17.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 다운로드
SSL VPN 접속을 위한 Agent를 다운로드 합니다.  

- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-windowsdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;윈도우 용 다운로드&lt;/a&gt;
- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-macdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;맥 용 다운로드&lt;/a&gt;

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_11.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## Agent 접속
Agent 프로그램, BIG-IP Edge Client를 설치하고 실행하면 다음과 같은 화면을 볼 수 있습니다.  
Agent에는 Classic 환경 SSL VPN 서버(Ncloud-kr-01)가 기본으로 설정되어 있는데, VPC 환경 SSL VPN 서버 주소로 바꾸기 위해 [연결끊기] 클릭해서 연결을 끊고, [서버 변경] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_18.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}
서버 선택 창에 **https://sslvpn-kr-vpc-01.ncloud.com** 주소를 입력하고, [다음] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_19.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

주소 변경 후에 [연결] 버튼을 클릭하면 로그인 화면이 나타나는데 위에서 설정했던 VPN 접속용 아이디와 Password를 입력하고 [로그온] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_20.png&quot; width=&quot;650&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

그리고 도착한 OTP 인증 번호를 입력합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_21.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

SSL VPN에 제대로 연결이 되었는지 확인하기 위해서 cmd 창을 띄워서 ipconfig 명령어를 입력하면 아래 화면처럼 SSL VPN 주소로 설정된 어탭터에  [**SSL VPN IP POOL**]에 해당하는 IP가 할당된 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_22.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 서버 접속
이제 SSL VPN이 연결된 상태에서 서버에 접속해보겠습니다.  
PuTTY 를 실행하고 접속할 서버의 IP를 입력합니다.  
이때 서버 IP는 콘솔에 있는 서버 정보에서 **비공인 IP**에 표시되는 IP를 입력하면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_23.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 기타 설정
SSL VPN Agent에는 몇가지 추가 기능이 있는데 아래에서 확인해보겠습니다.

### 트래픽 그래프
Agent 창에서 [그래프 보기] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_24.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

여기서는 SSL VPN이 연결된 상태의 트래픽을 그래프로 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_25.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

다음으로 [상세 보기] 버튼을 클릭하면 접속 세부 정보, 로그, 통계, 알림, 라우팅 테이블, IP설정 등의 정보를 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_26.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 스펙 변경
처음에 설정한 접속 가능 ID 개수를 변경하고 싶을 경우 SSL VPN을 선택하고 [스펙 변경] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_27.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

3, 5, 10, 20, 30, 50, 100, 200, 300, 400, 500개 상품 중에서 원하는 개수로 변경할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_28.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 주의사항
{% include warning.html title=&quot;접속 오류&quot; content=&quot;SSL VPN이 연결된 상태에서 새로운 서버를 생성하고 접속을 시도하면 아래와 같은 오류 메시지가 뜨면서 서버 접속이 되지 않습니다.  이때는 SSL VPN의 연결을 끊었다가 다시 연결해야 새로 생성한 서버에 접속할 수 있습니다.&quot; %}

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_23.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 삭제
삭제를 원할 경우 SSL VPN을 선택하고 상단의 [삭제] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_29.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

하지만, 바로 삭제가 되지 않고 다음과 같이 &quot;Route Table에서 Target으로 지정된 Route 정보를 모두 삭제해야 삭제가 가능합니다&quot;라는 메시지가 뜹니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_30.png&quot; width=&quot;500&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[VPC] - [Route Table]에서 해당 VPC의 Private Subnet을 선택하고 [Routes 설정] 버튼을 클릭해서 등록된 설정을 확인하고 [X] 버튼을 클릭해서 설정을 삭제합니다. 
Route Table 정보를 삭제한 후에 SSL VPN을 삭제하시면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_31.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## 참고 URL
1.  SSL VPN 사용 가이드(VPC)
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-security-5-2&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/security-security-5-2&lt;/a&gt;

2. SSL VPN 요금
	- &lt;a href=&quot;https://www.ncloud.com/product/security/sslVpn&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.ncloud.com/product/security/sslVpn&lt;/a&gt;
</description>
            <pubDate>Thu, 08 Dec 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/networking/ncloud_networking_ssl_vpn_vpc_guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/networking/ncloud_networking_ssl_vpn_vpc_guide.html</guid>
            
            <category>vpc</category>
            
            <category>ssl</category>
            
            <category>vpn</category>
            
            
        </item>
        
        <item>
            <title>Classic 환경에서 SSL VPN 설정하고 접속하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드) 외부에서 내부에 구성된 네트워크로 암호화된 보안 접속 통신을 제공하는 서비스인 SSL VPN을 Classic 환경에서 설정하고, 서버에 접속하는 방법에 대해 정리해보겠습니다.

## SSL VPN이란?
- VPN은 가상 사설망(Virtual Private Network)의 약자로, 외부에서 접근할 수 없는 사설망에 내 PC나 네트워크를 연결시키는 방법을 말합니다.
- 사설망과의 연결은 가상 터널을 통해 이루어지며, 이 가상 터널을 SSL 암호화로 보호하는 것이 SSL VPN입니다.
- 가상 터널을 통해 사설망과 연결된 사용자 PC는 사설망의 라우팅 및 ACL 정책에 따라 내부 서버에 접근할 수 있습니다.


## SSL VPN 생성
[SSL VPN 생성] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_01.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

우선 등록 가능한 접속 ID 개수에 따른 상품을 선택합니다. Classic 환경에서는 3개, 5개, 10개 상품만 선택 가능합니다. 
다음으로 인증 방식은 ID/PW 만으로 접속하는 일차인증과 OTP까지 사용하는 이차 인증 중에서 원하는 방식을 선택합니다. 
그리고 이차인증을 선택했을 경우에는 SMS와 Email 어떤 것을 이용할 것인지도 선택하게 됩니다.

{% include callout_v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;
&amp;#8259; 인증방식과 OTP 전송 방식은 SSL VPN 생성 시에 한번 선택하면 변경할 수 없으니 주의해야 합니다. &lt;br /&gt;
&amp;#8259; 만약 변경 하고 싶을 경우에는 SSL VPN을 새로 생성해야 합니다. &lt;br /&gt;
&amp;#8259; Classic 환경에서는 이차인증을 선택하면 별도의 이용요금이 부과됩니다.
&quot; %}


{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_02.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

다음으로 개인정보 수집 및 이용에 동의해야 합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_03.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

SSL VPN이 생성되면 다음과 같이 리스트에 서 확인 가능하며 여기서 [**SSL VPN IP POOL**]은 뒤쪽에서 네트워크 접근 제한을 설정할 때 필요한 중요한 정보입니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_04.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 사용자 설정
SSL VPN에 접속할 사용자 정보를 설정합니다.  리스트에서 SSL VPN을 선택하고 [사용자 설정] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_05.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자 정보는 ID, Passowrd, Email, SMS 등을 입력하고 [추가] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_06.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자가 추가되면 SSL VPN 정보에 사용자 계정 수(등록된 ID 수)에 숫자가 표시되는 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_07.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## ACG 설정
SSL VPN을 사용하려면 서버에 적용된 ACG에 [**SSL VPN IP POOL**]을 등록해야 합니다.  
우선 SSL VPN을 통해서 접속할 서버를 선택하고 적용된 ACG를 확인합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_08.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[Server] - [ACG]에서 위에서 확인한 ACG를 선택하고 [ACG 설정]을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_09.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

ACG 규칙 설정 화면에서 위에서 확인했던 [**SSL VPN IP POOL**]을 접근 소스에 입력하고, 필요한 포트들을 등록합니다. 
기본이 되는 프로토콜과 포트는 리눅스 서버 접속용 TCP 22, 윈도우 서버 접속용 TCP 3389, Ping 확인용 ICMP 등입니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_10.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 다운로드
SSL VPN 접속을 위한 Agent를 다운로드 합니다.  

- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-windowsdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;윈도우 용 다운로드&lt;/a&gt;
- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-macdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;맥 용 다운로드&lt;/a&gt;

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_11.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## Agent 접속
Agent 프로그램, BIG-IP Edge Client를 설치하고 실행하면 다음과 같은 화면을 볼 수 있습니다.  
Agent에는 Classic 환경 SSL VPN 서버(Ncloud-kr-01)가 기본으로 설정되어 있는데, 혹시 빠져 있다면 [서버 변경] 버튼을 클릭해서 **https://sslvpn-kr-01.ncloud.com**을 입력하고 연결 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_12.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

위에서 설정했던 VPN 접속용 아이디와 Password를 입력하고 [로그온] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_13.png&quot; width=&quot;650&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

OTP 접속도 설정했다면 도착한 인증 번호를 입력합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_14.png&quot; width=&quot;650&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

SSL VPN에 제대로 연결이 되었는지 확인하기 위해서 cmd 창을 띄워서 ipconfig 명령어를 입력하면 아래 화면처럼 SSL VPN 주소로 설정된 어탭터에  [**SSL VPN IP POOL**]에 해당하는 IP가 할당된 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_15.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 서버 접속
이제 SSL VPN이 연결된 상태에서 서버에 접속해보겠습니다.  
PuTTY 를 실행하고 접속할 서버의 IP를 입력합니다.  
이때 서버 IP는 콘솔에 있는 서버 정보에서 **비공인 IP**에 표시되는 IP를 입력하면 됩니다.

{% include important.html title=&quot;IP 입력&quot; content=&quot;이때 혹시나 포트 포워딩이나 공인 IP를 설정하고 그 IP를 입력하는 일이 없도록 주의해야 합니다.&quot; %}


{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_16.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 기타 설정
SSL VPN Agent에는 몇가지 추가 기능이 있는데 아래에서 확인해보겠습니다.

### 트래픽 그래프
Agent 창에서 [그래프 보기] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_17.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

여기서는 SSL VPN이 연결된 상태의 트래픽을 그래프로 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_18.png&quot; width=&quot;560&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

다음으로 [상세 보기] 버튼을 클릭하면 접속 세부 정보, 로그, 통계, 알림, 라우팅 테이블, IP설정 등의 정보를 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_19.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 스펙 변경
처음에 설정한 접속 가능 ID 개수를 변경하고 싶을 경우 SSL VPN을 선택하고 [스펙 변경] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_20.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

3개, 5개, 10개 상품 중에서 원하는 개수로 변경할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_21.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 주의사항
{% include warning.html title=&quot;접속 오류&quot; content=&quot;SSL VPN이 연결된 상태에서 새로운 서버를 생성하고 접속을 시도하면 아래와 같은 오류 메시지가 뜨면서 서버 접속이 되지 않습니다.  이때는 SSL VPN의 연결을 끊었다가 다시 연결해야 새로 생성한 서버에 접속할 수 있습니다.&quot; %}

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_23.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 삭제
삭제를 원할 경우 SSL VPN을 선택하고 상단의 [삭제] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_22.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) Classic 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## 참고 URL
1.  SSL VPN 사용 가이드(Classic)
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-security-5-1&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/security-security-5-1&lt;/a&gt;

2. SSL VPN 요금
	- &lt;a href=&quot;https://www.ncloud.com/product/security/sslVpn&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.ncloud.com/product/security/sslVpn&lt;/a&gt;
</description>
            <pubDate>Thu, 08 Dec 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/security/ncloud_security_ssl_vpn_classic_guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/security/ncloud_security_ssl_vpn_classic_guide.html</guid>
            
            <category>classic</category>
            
            <category>ssl</category>
            
            <category>vpn</category>
            
            
        </item>
        
        <item>
            <title>VPC 환경에서 SSL VPN 설정하고 접속하는 방법</title>
            <description>## 개요
Ncloud(네이버 클라우드) 외부에서 내부에 구성된 네트워크로 암호화된 보안 접속 통신을 제공하는 서비스인 SSL VPN을 VPC 환경에서 설정하고, 서버에 접속하는 방법에 대해 정리해보겠습니다.

## SSL VPN이란?
- VPN은 가상 사설망(Virtual Private Network)의 약자로, 외부에서 접근할 수 없는 사설망에 내 PC나 네트워크를 연결시키는 방법을 말합니다.
- 사설망과의 연결은 가상 터널을 통해 이루어지며, 이 가상 터널을 SSL 암호화로 보호하는 것이 SSL VPN입니다.
- 가상 터널을 통해 사설망과 연결된 사용자 PC는 사설망의 라우팅 및 ACL 정책에 따라 내부 서버에 접근할 수 있습니다.


## SSL VPN 생성 요청
[SSL VPN 생성] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_01.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

우선 접근할 서버가 속해 있는 VPC를 선택하고, 등록 가능한 접속 ID 개수에 따른 상품을 선택합니다.  
VPC 환경에서는 3, 5, 10, 20, 30, 50, 100, 200, 300, 400, 500개 상품 중에서 선택 가능합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_07.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

VPC 환경의 SSL VPN은 콘솔에서 자동으로 생성하는 것이 아니라 `생성 요청을 하면 Ncloud 담당자가 직접 생성하고 결과를 안내 받는 구조`로 되어 있습니다. 
생성 완료까지 걸리는 기간은 **업무일 기준 2~3일** 정도이며, 생성이 완료되면 SSL VPN 상태가 [운영중]으로 변경되고, 안내 메일이 도착합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_03.png&quot; width=&quot;500&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

아래와 같이 생성 요청을 하고 나면 상태가 [생성중] 상태로 표시 됩니다. 2~3일 후 생성 완료 안내 메일이 도착할때까지 기다리시면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_04.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## SSL VPN 생성 완료
SSL VPN 생성이 완료되면 아래와 같은 메일을 받을 수 있습니다.   
메일 내용에는 [**SSL VPN IP POOL**] 정보와 접속 경로 정보가 포함되어 있으니 잘 확인해야 합니다.

{% include warning.html title=&quot;IP POOL&quot; content=&quot;특히 [**SSL VPN IP POOL**] 정보는 Ncloud 콘솔에서 확인할 수 없고, 오로지 생성 완료 메일에서만 확인 가능하니 잘 보관해야 합니다.&quot; %}


{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_05.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

생성 완료 메일 확인 후에 콘솔에 접속하면 아래와 같이 [운영중] 으로 상태 메시지가 바뀐 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_06.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 사용자 설정
SSL VPN에 접속할 사용자 정보를 설정합니다.  리스트에서 SSL VPN을 선택하고 [사용자 설정] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_08.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자 정보는 ID, Passowrd, Email, SMS 등을 입력하고 [추가] 버튼을 클릭합니다.  
VPC 환경은 Classic 환경과 달리 이차인증이 필수이므로  SMS와 Email 정보를 함께 입력합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_09.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

사용자가 추가되면 SSL VPN 정보에 사용자 계정 수(등록된 ID 수)에 숫자가 표시되는 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_10.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## Route Table 설정
네트워크 설정에서는 우선 접속할 서버가 속해 있는 VPC Subnet의 Route Table에 SSL VPN으로 접근할 수 있게 [**SSL VPN IP POOL**]을 등록해야 합니다.  
아래와 같이 접속할 서버의 상세정보에서 VPC와 Subnet을 확인합니다. 여기서는 Private Subnet에 생성한 서버에 접속할 예정입니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_11.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[VPC] - [Route Table]에서 해당 VPC의 Private Subnet을 선택하고 [Routes 설정] 버튼을 클릭합니다.  
Public Subnet에 생성한 서버에 접근해야 할 경우에는 public-table을 선택하고 설정하시면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_12.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[Destination]에 SSL VPN 생성 완료 메일에서 확인한 [**SSL VPN IP POOL**] 정보를 등록하고, [Target Type]은 SSLVPN을 선택, [Target Name]은 위에서 생성한 SSL VPN 이름을 선택하고 [생성] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_13.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## ACG 설정
다음으로 서버에 적용된 ACG에 [**SSL VPN IP POOL**]을 등록해야 합니다.  
우선 SSL VPN을 통해서 접속할 서버를 선택하고 [ACG 수정] 버튼을 클릭해서 적용된 ACG를 확인합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_14.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

ACG 수정 화면에서 현재 적용된 ACG 이름을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_15.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[Server] - [ACG]에서 위에서 확인한 ACG를 선택하고 [ACG 설정]을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_16.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

ACG 규칙 설정 화면에서 위에서 확인했던 [**SSL VPN IP POOL**]을 접근 소스에 입력하고, 필요한 포트들을 등록합니다. 
기본이 되는 프로토콜과 포트는 리눅스 서버 접속용 TCP 22, 윈도우 서버 접속용 TCP 3389, Ping 확인용 ICMP 등입니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_17.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 다운로드
SSL VPN 접속을 위한 Agent를 다운로드 합니다.  

- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-windowsdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;윈도우 용 다운로드&lt;/a&gt;
- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-5-1-macdownload&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;맥 용 다운로드&lt;/a&gt;

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_11.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## Agent 접속
Agent 프로그램, BIG-IP Edge Client를 설치하고 실행하면 다음과 같은 화면을 볼 수 있습니다.  
Agent에는 Classic 환경 SSL VPN 서버(Ncloud-kr-01)가 기본으로 설정되어 있는데, VPC 환경 SSL VPN 서버 주소로 바꾸기 위해 [연결끊기] 클릭해서 연결을 끊고, [서버 변경] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_18.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}
서버 선택 창에 **https://sslvpn-kr-vpc-01.ncloud.com** 주소를 입력하고, [다음] 버튼을 클릭합니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_19.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

주소 변경 후에 [연결] 버튼을 클릭하면 로그인 화면이 나타나는데 위에서 설정했던 VPN 접속용 아이디와 Password를 입력하고 [로그온] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_20.png&quot; width=&quot;650&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

그리고 도착한 OTP 인증 번호를 입력합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_21.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

SSL VPN에 제대로 연결이 되었는지 확인하기 위해서 cmd 창을 띄워서 ipconfig 명령어를 입력하면 아래 화면처럼 SSL VPN 주소로 설정된 어탭터에  [**SSL VPN IP POOL**]에 해당하는 IP가 할당된 것을 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_22.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 서버 접속
이제 SSL VPN이 연결된 상태에서 서버에 접속해보겠습니다.  
PuTTY 를 실행하고 접속할 서버의 IP를 입력합니다.  
이때 서버 IP는 콘솔에 있는 서버 정보에서 **비공인 IP**에 표시되는 IP를 입력하면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_23.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## Agent 기타 설정
SSL VPN Agent에는 몇가지 추가 기능이 있는데 아래에서 확인해보겠습니다.

### 트래픽 그래프
Agent 창에서 [그래프 보기] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_24.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

여기서는 SSL VPN이 연결된 상태의 트래픽을 그래프로 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_25.png&quot; width=&quot;557&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

다음으로 [상세 보기] 버튼을 클릭하면 접속 세부 정보, 로그, 통계, 알림, 라우팅 테이블, IP설정 등의 정보를 확인할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_26.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 스펙 변경
처음에 설정한 접속 가능 ID 개수를 변경하고 싶을 경우 SSL VPN을 선택하고 [스펙 변경] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_27.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

3, 5, 10, 20, 30, 50, 100, 200, 300, 400, 500개 상품 중에서 원하는 개수로 변경할 수 있습니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_28.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 주의사항
{% include warning.html title=&quot;접속 오류&quot; content=&quot;SSL VPN이 연결된 상태에서 새로운 서버를 생성하고 접속을 시도하면 아래와 같은 오류 메시지가 뜨면서 서버 접속이 되지 않습니다.  이때는 SSL VPN의 연결을 끊었다가 다시 연결해야 새로 생성한 서버에 접속할 수 있습니다.&quot; %}

{% include image.html file=&quot;security/ncp_security_ssl_vpn_classic_guide_23.png&quot; width=&quot;700&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}


## 삭제
삭제를 원할 경우 SSL VPN을 선택하고 상단의 [삭제] 버튼을 클릭합니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_29.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

하지만, 바로 삭제가 되지 않고 다음과 같이 &quot;Route Table에서 Target으로 지정된 Route 정보를 모두 삭제해야 삭제가 가능합니다&quot;라는 메시지가 뜹니다. 

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_30.png&quot; width=&quot;500&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

[VPC] - [Route Table]에서 해당 VPC의 Private Subnet을 선택하고 [Routes 설정] 버튼을 클릭해서 등록된 설정을 확인하고 [X] 버튼을 클릭해서 설정을 삭제합니다. 
Route Table 정보를 삭제한 후에 SSL VPN을 삭제하시면 됩니다.

{% include image.html file=&quot;security/ncp_security_ssl_vpn_vpc_guide_31.png&quot; width=&quot;770&quot; alt=&quot;Ncloud(네이버 클라우드) VPC 환경에서 SSL VPN 설정하고 접속하는 방법&quot; caption=&quot;&quot; %}

## 참고 URL
1.  SSL VPN 사용 가이드(VPC)
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/security-security-5-2&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/security-security-5-2&lt;/a&gt;

2. SSL VPN 요금
	- &lt;a href=&quot;https://www.ncloud.com/product/security/sslVpn&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.ncloud.com/product/security/sslVpn&lt;/a&gt;
</description>
            <pubDate>Thu, 08 Dec 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/security/ncloud_security_ssl_vpn_vpc_guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/security/ncloud_security_ssl_vpn_vpc_guide.html</guid>
            
            <category>vpc</category>
            
            <category>ssl</category>
            
            <category>vpn</category>
            
            
        </item>
        
        <item>
            <title>Ncloud 블록 스토리지 (디스크) 크기 확장하는 방법 - 리눅스</title>
            <description>## 개요
Ncloud(네이버 클라우드) 리눅스 환경 서버의 블록스토리지 볼륨 크기를 확장하고 적용하는 방법을 정리해보겠습니다.


## 테스트 환경 
- CentOS 7.8
- Ubuntu 20.04
- 추가 블록스토리지 10GB

OS 영역에서 사용하는 50G 블록스토리지 외에 아래와 같이 추가로 할당 된 10G의 블록스토리지의 크기를 변경하고 적용해보겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-01.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

추가 블록 스토리지 할당 방법에 대한 가이드는 아래의 링크를 참조 바랍니다.

- &lt;a href=&quot;/compute/ncloud_compute_server_storage_add_detail_process.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all&quot;&gt;Linux 스토리지(디스크) 추가 상세 가이드&lt;/a&gt;

## 스토리지 스냅샷 백업
아래와 같이 [Console] - [Server] - [Storage]에서 크기를 변경할 스토리지를 선택하고 [스토리지 설정] - [스냅샷 생성] 메뉴를 선택합니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;3&quot; content=&quot;블록스토리지의 크기를 변경하는 과정에 만에 하나 있을지 모르는 상황에 대비해서 해당 블록스토리지의 스냅샷을 생성해서 백업해 두는 것을 적극 권장합니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

스냅샷 이름을 입력하고 스냅샷을 생성합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


## 스토리지 크기 변경
스냅샷 생성이 끝났으면 스토리지 크기를 변경하기 위해 [스토리지 설정] - [크기 변경] 메뉴를 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-06.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 서버 정지 알림
스토리지 크기 변경은 서버가 정지된 상태에서만 가능하므로, 혹시 서버가 동작중인 경우 아래와 같은 알림이 나타납니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-04.png&quot; width=&quot;485&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 서버 정지
먼저 스토리지가 장착된 서버를 정지하겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 크기 변경
서버를 정지한 후 크기 변경 메뉴를 선택하면 아래와 같이 변경할 크기를 입력할 수 있습니다.  최대 2,000GB까지 가능합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;스토리지 크기는 확대만 가능하며, 축소 기능은 제공하지 않습니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-07.png&quot; width=&quot;680&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

변경할 크기를 입력하고 [확인] 버튼을 클릭하면 크기 변경 작업이 진행됩니다. 이후에 서버에서 해당 스토리지의 파티션 확장 등의 작업을 추가로 진행해야 정상적으로 사용할 수 있습니다. 

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-09.png&quot; width=&quot;680&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

## 서버 디스크 파티션 확장
Ncloud 콘솔에서 블록스토리지 크기를 변경 완료했으면 다음으로 서버에 접속해서 할당된 디스크의 파티션을 확장해야 합니다.

### 디스크 마운트 해제
일반적으로 추가 디스크는 서버가 재시작되어도 사용하는데 문제 없도록 fstab에 마운트 정보를 등록해두기 때문에 서버가 재시작되면서 자동으로 마운트 되어있습니다.  

마운트 된 상태에서는 파티션 확장을 할 수 없으므로 먼저 마운트를 해제합니다. 여기서는 마운트 해제가 잘 되었는지 df 명령으로 확인을 해보았습니다.

``` bash
~# umount /dev/xvdb1
~# df -hT
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-18.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### growpart 패키지 설치
디스크 파티션 확장에 필요한 growpart 패키지를 설치합니다.

**Centos**
```bash
~# yum -y install cloud-utils-growpart
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-10.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

**Ubntu**  
이미 해당 패키지가 설치되어 있는 경우에는 아래와 같이 추가 설치 없이 통과됩니다.
```bash
~# apt-get install cloud-guest-utils 
```

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-17.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 파티션 확장
파티션을 확장할 때 growpart 명령 실행 후의 다음 단계는 EXT, XFS 등 디스크의 파일 시스템 타입에 따라 차이가 있으니 확인하고 진행하셔야 합니다.

``` bash
# growpart {장치명} {파티션 번호}
~# growpart /dev/xvdb 1
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-11.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


#### XFS 시스템
xfs 파일 시스템은 **마운트를 먼저 하고** 최종 파티션 확장 작업을 진행합니다.

``` bash
~# mount /dev/xvdb1 /mnt/data
~# xfs_growfs /dev/xvdb1
```

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-12.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

작업이 모두 끝난 후에 디스크 상태를 확인해보면 아래와 같이 문제 없이 확장된 것을 알 수 있습니다.

``` bash
~# df -hT
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-13.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


#### EXT4 시스템
ext4 파일 시스템은 최종 **파티션 확장 작업을 먼저 진행하고** 나서 마운트를 하게 됩니다.

``` bash
~# e2fsck -f /dev/xvdb1
~# resize2fs /dev/xvdb1
~# mount /dev/xvdb1 /mnt/data
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-14.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-15.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


``` bash
~# df -hT
```
{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-16.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Linux 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1.  Ncloud 블록 스토리지 크기 확장 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/compute-compute-4-1-v2-vpc#%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%ED%81%AC%EA%B8%B0-%ED%99%95%EC%9E%A5&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/compute-compute-4-1-v2-vpc&lt;/a&gt;

</description>
            <pubDate>Fri, 11 Nov 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud-compute-server-storage-extend-guide-linux.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud-compute-server-storage-extend-guide-linux.html</guid>
            
            <category>linux</category>
            
            <category>storage</category>
            
            
        </item>
        
        <item>
            <title>Kubernetes Service 클러스터 생성 및 제어 가이드 | Linux</title>
            <description>## 개요
Ncloud (네이버 클라우드) VPC 환경에서 Kubernetes(쿠버네티스) 서비스를 생성하고 **Linux 환경에서 제어하는 방법**에 대해 소개합니다.

## 쿠버네티스란?
쿠버네티스(Kubernetes, K8S)는 배포, 스케일링, 그리고 컨테이너화된 애플리케이션의 관리를 자동화 해주는 오픈 소스 컨테이너 오케스트레이션 엔진으로 
구글에서 처음 개발하기 시작했으나 현재는 구글이 오픈소스 프로젝트로 공개한 상태입니다.

## 특징
쿠버네티스는 다음과 같은 특징이 있으며, 자세한 내용은 쿠버네티스 공식 페이지를 참고하시기 바랍니다.

&lt;a href=&quot;https://kubernetes.io/ko/docs/home/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://kubernetes.io/ko/docs/home/&lt;/a&gt;

- 서비스 디스커버리와 로드 밸런싱
- 스토리지 오케스트레이션
- 자동화된 롤아웃과 롤백
- 자동화된 빈 패킹(bin packing)
- 자동화된 복구(self-healing)
- 시크릿과 구성 관리


## 사전 준비
먼저 쿠버네티스 클러스터에 사용할 **전용 VPC와 Private 또는 Public Subnet 그리고, Load Balancer용 Subnet**이 필요합니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_07.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

{% include callout-v2.html type=&quot;warning&quot; level=&quot;3&quot; content=&quot;IP 대역(10.0.0.0/8,172.16.0.0/12,192.168.0.0/16) 내에서 /17~/26 범위의 Private 또는 Public Subnet, 로드밸런서 전용 Subnet이 필요합니다.&lt;br/&gt;&lt;br/&gt;
Docker Bridge 대역의 충돌을 방지하기 위해 172.17.0.0/16 범위 내의 Private Subnet, 로드밸런서 전용Subnet은 선택할 수 없습니다.&quot; %}


## 클러스터 생성 

VPC와 Subnet이 준비되었다면, 다음으로 [Kubernetes Sevice] - [Cluster]에서 생성하기를 클릭합니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_09.jpg&quot; width=&quot;500&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 클러스터 설정
생성할 클러스터의 정보를 설정해줍니다. 
**네트워크 타입은 Private과 Public 중에서 선택**할 수 있습니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;Kubernetes Service를 위한 ACG는 자동으로 생성됩니다.&quot; %}
{% include callout-v2.html type=&quot;primary&quot; level=&quot;2&quot; content=&quot;현재 지원되고 있는 Kubernetes 버전은 [**1.22.9**], [**1.23.9**] 입니다.&quot;%}

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-01.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### NAT Gateway 생성
`Private Subnet을 선택했을 경우`에는 아래와 같이 NAT Gateway 생성 안내 팝업이 나타나는데,  
NAT Gateway를 생성해야 아웃바운드 트래픽을 활성화할 수 있기 때문입니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_10.jpg&quot; width=&quot;490&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

팝업에서 링크를 클릭해서 NAT Gateway 화면으로 이동해 NAT Gateway를 생성합니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_11.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 노드풀 설정
노드풀 이름을 입력하고, 서버 이미지와 서버 타입을 선택하고 [추가] 버튼을 클릭합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;현재 지원되고 있는 OS는 [**ubuntu 16.04**], [**ubuntu 18.04**], [**ubuntu 20.04**] 입니다.&quot;%}

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-02.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 로그인키 설정
다음으로 워커노드의 로그인키를 설정 합니다.

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_03.jpg&quot; width=&quot;770&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## 최종 확인
설정 정보를 최종적으로 확인한 후 생성버튼을 클릭하여 클러스터를 생성합니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;2&quot; content=&quot;쿠버네티스 클러스터 생성은 20분 정도 소요되므로 여유를 갖고 기다리시면 됩니다.&quot;%}

{% include image.html file=&quot;compute/kubernetes/ncp_server_kubernetes_start_guide_04.jpg&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 생성 완료
생성이 완료되면 아래와 같이 클러스터와 노드풀의 정보를 확인할 수 있습니다.  
클러스터 정보 중에서 클러스터 **UUID는 아래쪽에서 IAM 인증 Kubeconifg 파일을 생성할 때 필요**하니 확인해두시기 바랍니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-12.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

[Server] 메뉴에 가면 노드풀 설정에 따라 생성된 서버를 확인할 수 있습니다.  
(서버 이름은 노드풀 이름으로 입력한 문자열 기준으로 생성되는데, 여기서는 test123-O-OOO 이런 식으로 생성되었습니다.)

그리고, 추가로 테스트를 위한 CentOS 서버(k8s-test)를 생성했습니다.

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-13.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## IAM 인증 설정
클러스터를 제어하기 위해서는 네이버 클라우드 쿠버네티스 서비스에서 제공하는 IAM 인증을 설정해야 합니다.

### ncp-iam-authenticator 설치
Ncloud에서 제공하는 ncp-iam-authenticator 바이너리를 통해 iam 인증 config 파일을 생성 할 수 있습니다.

- ncp-iam-authenticator 바이너리를 다운로드 합니다.

```bash
~# curl -o ncp-iam-authenticator https://kr.object.ncloudstorage.com/nks-download/ncp-iam-authenticator/v1.0.5/linux/amd64/ncp-iam-authenticator
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-14.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- 다운받은 바이너리에 실행 권한을 추가 합니다.

```bash
~# chmod +x ./ncp-iam-authenticator
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-15.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- bin/ncp-iam-authenticator 파일을 생성하고  $PATH에 추가합니다.
- bash Profile에 추가 합니다.

```bash
~# mkdir -p $HOME/bin &amp;&amp; cp ./ncp-iam-authenticator $HOME/bin/ncp-iam-authenticator &amp;&amp; export PATH=$PATH:$HOME/bin
```
```bash
~# echo &apos;export PATH=$PATH:$HOME/bin&apos; &gt;&gt; ~/.bash_profile
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-16.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- ncp-iam-authenticator가 정상 작동 하는지 테스트 합니다. 

```bash
~# ncp-iam-authenticator help
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-17.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

## API 인증키 생성
네이버 클라우드 포탈 -&gt; 마이페이지 -&gt; 계정관리 -&gt; 인증키 관리 - API 인증키 관리 메뉴에서 Access Key ID와 Secret Key를 가져오셔야 하며, 아직 만들어진 Key가 없다면 새로 만드셔야 합니다.

{% include image.html file=&quot;api/ncloud_api_auth_key_create.png&quot; width=&quot;770&quot; alt=&quot;Ncloud API 인증키 생성 방법&quot; caption=&quot;&quot; %}

## Kubeconfig 파일 생성

### 환경변수 설정
API 인증키를 2가지 방법 중 하나를 이용해 환경변수에 등록합니다.  
  
- **첫번째 방법: OS 환경 변수 설정**

```bash
~# export NCLOUD_ACCESS_KEY={Ncloud API AccessKey}
~# export NCLOUD_SECRET_KEY={Ncloud API SecretKey}
~# export NCLOUD_API_GW=https://ncloud.apigw.ntruss.com
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-18.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


- **두번째 방법: 사용자 환경 홈 디렉터리에 configure 설정**

```bash
~# mkdir .ncloud 
~# cat &lt;&lt; EOF &gt; .ncloud/configure
[DEFAULT]
ncloud_access_key_id = {Ncloud API AccessKey}
ncloud_secret_access_key = {Ncloud API SecretKey}
ncloud_api_url = https://ncloud.apigw.ntruss.com
EOF
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-19.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### Kubeconifg 파일 생성
환경변수에 등록이 되었다면 파일을 생성 할 차례입니다.  
아래 명령어로 클러스터에 대한 IAM 인증 Kubeconifg 파일을 생성합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;클러러스터 UUID 값은 클러스터 상세보기의 [클러스터 이름 (UUID)] 에서  확인 할수 있습니다.&quot; %}

``` bash
~# ncp-iam-authenticator create-kubeconfig --region &lt;region-code&gt; --clusterUuid &lt;cluster-uuid&gt; --output &lt;FileName&gt;.yaml

## 예시
~# ncp-iam-authenticator create-kubeconfig --region KR --clusterUuid 12345678-1234-1234-1234-1234567890 --output kubeconfig.yaml
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-20.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## kubectl 설치
쿠버네티스 클러스터를 제어할 kubectl을 설치하기 위해 필요한 파일을 다운로드 받습니다.

``` bash
~# curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-21.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

다운 받은 파일을 설치합니다.

``` bash
~# sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

# 버전 확인
~# kubectl version --client --output=yaml
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-22.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}



## kubectl 실행
생성한 IAM 인증 kubeconfig 파일을 이용하여 kubectl 명령어를 테스트하여 정상 동작 하는지 확인 합니다.  
실행하면 아래와 같이 현재 동작 중인 노드 서버 리스트를 확인할 수 있습니다.

```bash
~# kubectl get node --kubeconfig kubeconfig.yaml
```
{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-23.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}

### 실행 명령어 단축
위와 같은 kubectl 명령은 뒤쪽에 kubeconfig 환경 설정 파일까지 입력해야 해서 다소 불편한데, 간단하게 줄일 수 있는 방법이 있습니다.  

우선 만들어진 kubeconfig.yaml 파일을 .kube/ 디렉토리 아래에 config로 이름을 바꾸어 이동 혹은 복사 합니다.

```bash
~# cp kubeconfig.yaml .kube/config
```

이렇게 하면 Kubectl을 사용 시 아래와 같이 --kuebeconfig 명령어 없이 사용 할 수 있습니다.

```bash
~# kubectl get node
```

{% include image.html file=&quot;containers/ncloud-containers-kubernetes-start-guide-24.png&quot; width=&quot;840&quot; alt=&quot;Ncloud Kubernetes Service 클러스터 생성 및 제어하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1. 쿠버네티스 사용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8soverview&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8soverview&lt;/a&gt;

2. 클러스터 이용 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8suse-cluster&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8suse-cluster&lt;/a&gt;

3. kubectl 설치 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/k8s-k8sstart#Kubectl%EC%84%A4%EC%B9%98&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/k8s-k8sstart#Kubectl&lt;/a&gt;

4. Windows 환경에서 쿠버네티스 제어하기
	- &lt;a href=&quot;/containers/ncloud-containers-kubernetes-service-start-guide-windows.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-windows.html&lt;/a&gt;  	
</description>
            <pubDate>Mon, 07 Nov 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-linux.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/containers/ncloud-containers-kubernetes-service-start-guide-linux.html</guid>
            
            <category>kubernetes</category>
            
            <category>vpc</category>
            
            
        </item>
        
        <item>
            <title>Ncloud 블록 스토리지 (디스크) 크기 확장하는 방법 - 윈도우</title>
            <description>## 개요
Ncloud(네이버 클라우드) 윈도우 환경 서버의 블록스토리지 볼륨 크기를 확장하고 적용하는 방법을 정리해보겠습니다.


## 테스트 환경 
- Windows Server 2019 (64-bit) English Edition
- 추가 블록스토리지 10GB

OS 영역에서 사용하는 100G 블록스토리지 외에 아래와 같이 추가로 할당 된 10G의 블록스토리지의 크기를 변경하고 적용해보겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

추가 블록 스토리지 할당 방법에 대한 가이드는 아래의 링크를 참조 바랍니다.

- &lt;a href=&quot;/compute/ncloud_compute_server_windows_storage_add_detail_process.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all&quot;&gt;Windows 스토리지(디스크) 추가 상세 가이드&lt;/a&gt;

## 스토리지 스냅샷 백업
아래와 같이 [Console] - [Server] - [Storage]에서 크기를 변경할 스토리지를 선택하고 [스토리지 설정] - [스냅샷 생성] 메뉴를 선택합니다.

{% include callout-v2.html type=&quot;warning&quot; level=&quot;3&quot; content=&quot;블록스토리지의 크기를 변경하는 과정에 만에 하나 있을지 모르는 상황에 대비해서 해당 블록스토리지의 스냅샷을 생성해서 백업해 두는 것을 적극 권장합니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

스냅샷 이름을 입력하고 스냅샷을 생성합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


## 스토리지 크기 변경
스냅샷 생성이 끝났으면 스토리지 크기를 변경하기 위해 [스토리지 설정] - [크기 변경] 메뉴를 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-06.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 서버 정지 알림
스토리지 크기 변경은 서버가 정지된 상태에서만 가능하므로, 혹시 서버가 동작중인 경우 아래와 같은 알림이 나타납니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-04.png&quot; width=&quot;485&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 서버 정지
먼저 스토리지가 장착된 서버를 정지하겠습니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### 크기 변경
서버를 정지한 후 크기 변경 메뉴를 선택하면 아래와 같이 변경할 크기를 입력할 수 있습니다.  최대 2,000GB까지 가능합니다.

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;스토리지 크기는 확대만 가능하며, 축소 기능은 제공하지 않습니다.&quot; %}

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-07.png&quot; width=&quot;680&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

변경할 크기를 입력하고 [확인] 버튼을 클릭하면 크기 변경 작업이 진행됩니다. 이후에 서버에서 해당 스토리지의 파티션 확장 등의 작업을 추가로 진행해야 정상적으로 사용할 수 있습니다. 

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-linux-09.png&quot; width=&quot;680&quot; alt=&quot;Ncloud 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

## 서버 디스크 파티션 확장
서버에 접속해 Disk Management를 실행하면 아래와 같이 확장된 추가 블록스토리지의 모습이 보입니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-10.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

### Disk Management
Disk Management 툴은 아래의 방법으로 간단하게 실행할 수 있습니다.

- 명령 실행 (윈도우키+r) : **diskmgmt.msc**

{% include image.html file=&quot;compute/ncloud_compute_server_windows_storage_add_detail_process_04.png&quot; width=&quot;450&quot; alt=&quot;cloud Windows 서버 스토리지(디스크) 추가 상세 가이드&quot; caption=&quot;&quot; %}

### 볼륨 확장
기존에 할당되어 있던 10GB 볼륨을 선택하고 마우스 오른쪽 버튼을 클릭한 후 [**Extend Volume**] 메뉴를 선택합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-11.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

볼륨 확장 팝업 창에서 [**Next**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-12.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

**Select Disks**  
콘솔에서 추가한 10GB 스토리지가 추가 디스크로 선택되어 있습니다. 전체 용량을 모두 확장할 것이므로 특별한 수정 없이 [**Next**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-13.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

볼륨 확장 작업이 끝났으면 [**Finish**] 버튼을 클릭합니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-14.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}

## 디스크 크기 확인
작업 완료 후 확인해보면 기존 10GB에서 20GB로 확장된 것을 알 수 있습니다.

{% include image.html file=&quot;compute/ncloud-compute-server-storage-extend-guide-windows-15.png&quot; width=&quot;845&quot; alt=&quot;Ncloud Windows 서버 디스크 (블록 스토리지) 크기를 변경하는 방법&quot; caption=&quot;&quot; %}


## 참고 URL
1.  Ncloud 블록 스토리지 크기 확장 가이드
	- &lt;a href=&quot;https://guide.ncloud-docs.com/docs/compute-compute-4-1-v2-vpc#%ED%8C%8C%ED%8B%B0%EC%85%98-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%99%95%EC%9E%A5windows&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/compute-compute-4-1-v2-vpc&lt;/a&gt;</description>
            <pubDate>Wed, 02 Nov 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/compute/ncloud-compute-server-storage-extend-guide-windows.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/compute/ncloud-compute-server-storage-extend-guide-windows.html</guid>
            
            <category>windows</category>
            
            <category>storage</category>
            
            
        </item>
        
        <item>
            <title>Ncloud 백업 서비스 사용 가이드</title>
            <description>## 개요
Ncloud(네이버 클라우드)의 기존에 별도의 신청서를 작성해서 사용하던 Managed Backup의 대체 상품으로 출시된 콘솔에서 바로 이용할 수 있는 Backup 상품의 설정 방법을 알아보도록 하겠습니다.

## 상품 위치
Backup 상품은 [**Console**] - [**Services**] - [**Storage**]에 있습니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-18.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}

## 리소스 생성
먼저 [**Backup**] - [**Backup**] - [**Resource**]에서 리소스를 생성합니다. 

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-01.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}

백업대상이 되는 서버를 리소스에 등록합니다.  

서버가 위치한 zone선택 및 대상 서버를 선택하며 파일백업 및 데이터베이스 백업여부에 따라 체크박스를 선택합니다.  

아이디 및 비밀번호는 백업 에이전트원격 설치를 위해 필요하며 계정정보는 네이버클라우드에 보관되지 않는1회성으로 사용됩니다. **해당 계정으로 서버에서 에이전트가 작동되기 때문에 별도 유저계정을 생성하고 정보를 입력하여 주시고 서버에서는 계정을 삭제하시면 안됩니다.**

{% include warning.html title=&quot;주의&quot; content=&quot;**아이디**는 **백업파일과 리스토어 폴더의 접근권한**을 가지는 계정을 넣으셔야하며 백업에이전트는 해당 계정으로 설치및 작동을 하게됩니다.&quot; %}

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-02.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}

내용 최종 확인 후 리소스 생성을 눌러줍니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-03.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


리소스 생성 후 agent설치작업 진행 내역을 확인 할 수 있습니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-04.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}

## Storage 구성
Storage메뉴는 백업 데이터를 보관할 저장소를 생성하는 메뉴입니다.

저장소이름과 백업저장소가 위치할 존을 지정 후 다음을 클릭합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-05.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


최종 확인 후 생성을 눌러줍니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-06.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}

## Policy
Policy는 백업된 데이터의 보관주기를 설정하는 메뉴입니다.

정책이름과 보관주기 생성한 저장소가 위치한 존을 선택 한 후 저장소이름이 맞다면 다음을 클릭합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-07.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


내용 최종 확인 후 생성을 클릭합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-08.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


## Job
각서버의 백업 대상 설정을 하는 메뉴입니다.

작업이름과 대상 리소스(서버) 백업유형 및 백업 대상 디렉토리 지정을 한 후 백업 정책을 선택해줍니다. 백업정책은 policy메뉴에서 생성한 정책입니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-09.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


최종 확인 후 생성을 눌러 줍니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-10.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


설정 완료 후 등록된 내용을 확인 할 수 있습니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-11.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


## Schedule
job에서 등록한 백업작업을 백업 스케줄을 등록하는 메뉴 입니다.  

일정 생성을 눌러 생성을 시작합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-12.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}

일정이름과 job에서 등록한 서버 백업작업을 선택 후 백업 방식, 주기, 시작요일과 시간을 구성한 후 다음을 클릭합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-13.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


최종 확인 후 생성을 클릭합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-14.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}



## Remote Backup
Remote backup은 저장소에 보관 데이터를 원격지에 소산백업을 하는 메뉴입니다.  
소산 설정이 필요한 경우 기존 생성한 저장소가 위치한 zone이 아닌 다른 존에 저장소를 생성을 미리 해두어야합니다.  


소산이름과 job에서 등록한 작업 선택 소상 저장소가 위치한 존을 선택한 후 보관주기 소산백업 주기 설정을 선택 후 다음을 클릭합니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-15.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


등록한 작업의 백업이 완료되지 않을 경우 소산 백업은 다음 일정의 소산 일정에 진행되며 팝업으로 안내가 됩니다


{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-16.png&quot; width=&quot;600&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}


최종 확인 후 시작을 클릭힙니다.

{% include image.html file=&quot;storage/ncloud-storage-backup-service-guide-17.png&quot; width=&quot;845&quot; alt=&quot;Ncloud 서버 파일과 데이터베이스 데이터 등을 백업할 수 있는 백업 서비스 상품의 사용 가이드&quot; caption=&quot;&quot; %}</description>
            <pubDate>Tue, 01 Nov 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/storage/ncloud-storage-backup-service-guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/storage/ncloud-storage-backup-service-guide.html</guid>
            
            <category>backup</category>
            
            <category>database</category>
            
            
        </item>
        
        <item>
            <title>백업 서비스 가이드와 신청 절차</title>
            <description>## 개요
백업 솔루션을 사용해 서버의 데이터 즉, 소스 등의 파일과 데이터베이스 데이터를 정기적으로 백업하고 보관하는 서비스입니다.

## 이용 방법

{% include note.html content=&quot;Ncloud(네이버 클라우드)의 백업 서비스는 이용자가 직접 모든 과정을 마칠 수 없고, 고객센터에 백업신청서를 제출해야 백업이 진행됩니다.&quot; %}

## 지원 OS와 DB 
- Centos : 6.3, 6.6, 7.2, 7.3
- ubuntu : 16.04, 18.04
- Windows : 2012 R2, 2016
- mssql : 2008std, 2012std, 2014std, 2016std, 2016exp
- mysql : 5.7.17, 5.6.34
- 모두 64bit만 지원


## 백업 방식

### 파일백업
- 일회성
- 1일 1회 전체 백업
- 1주 ~ 4주에 1회 전체 백업
- 1주 1회 전체 백업 및 1일 1회 증분 백업

### DB 백업
- mssql 1일 1회 전체 백업
- mssql 1주 1회 전체 백업
- mssql 1주 1회 전체 백업 및 1일 1회 증분 백업
- mysql 1일 1회 전체 백업
- mysql 1주 1회 전체 백업

{% include callout_v2.html type=&quot;warning&quot; level=&quot;1&quot; content=&quot;증분 백업(변경된 데이터만 백업)의 경우 DBMS는 정합성을 보장하나 파일에 대해서는 정합성을 보장하지 않음&quot; %}

## 백업 신청 절차
1. 네이버 클라우드 플랫폼 포털(https://www.ncloud.com)에 접속하여 로그인
2. 고객지원 &gt; 자료를 클릭하여 **네이버 클라우드 플랫폼 백업 서비스 신청서**와 **백업 Agent**를 다운로드
3. 다운로드한 신청서 양식의 내용에 예를 참고하여 알맞게 기입.
4. 다운로드한 백업 Agent는 OS에 맞는 버전을 VM에 복사하여 설치
5. 백업 Agent가 설치 완료되었다면 네이버 클라우드 플랫폼 포털 내 백업 상품 소개 페이지의 &quot;이용 문의하기&quot;를 클릭
6. 문의하기 페이지에서 제목을 &quot;**백업서비스 신청**&quot;으로 기입하고 작성한 백업 서비스 신청서를 첨부하면 백업 신청이 완료


## 백업 Agent 설치 방법

### Windows
1. 원격 데스크톱을 이용하여 VM 서버에 원격 접속
2. 다운로드한 백업 Agent 설치 파일(NCP_Backup_Windows.zip)을 VM 내 {==C:\Temp==} 하위에 복사하여 압축을 풀면 NCP 이름으로 총 5개의 파일이 생성
3. NCP_Backup_Install.bat을 실행하면 자동으로 설치 및 구성이 진행되며 설치 완료
4. 이후 백업 Agent 관련 파일들은 자동으로 삭제됨

{% include callout_v2.html type=&quot;warning&quot; level=&quot;1&quot; content=&quot;백업 Agent설치 후 파일이 자동 삭제되기에 반드시 설치위치는 C:\Temp에서 수행을 권고&quot; %}


### Linux
1. Winscp 등을 이용하여 VM 서버의 {==/tmp==} 하위로 백업 Agent 프로그램(NCP_Backup_Linux.tar.gz)을 복사
2. 원격 접속 프로그램(ex.putty)을 이용하여 VM 서버에 원격 접속
3. 백업 Agent 프로그램을 저장한 /tmp 폴더로 이동 후 **tar xvfz NCP_Backup_Linux.tar.gz**을 실행하여 압축 해제
4. NCP_Backup_Install.sh 파일을 실행하면 자동으로 백업 Agent 설치 및 구성이 완료
5. 이후 관련 파일은 자동으로 삭제됨

{% include callout_v2.html type=&quot;warning&quot; level=&quot;1&quot; content=&quot;백업 Agent설치 후 파일이 자동 삭제되기에 반드시 설치위치는/tmp에서 수행을 권고&quot; %}


## 백업 Agent 정보

### 백업 S/W
- Quest Netvault(구 Dell Netvault)

### 백업 S/W 통신 정보
- TCP/UDP 20031~21631

### 백업 프로그램 설치 위치
- Linux: /usr/Netvault
- Windows: C:\Program Files (x86)\Quest Software\NetVault Backup


## Secure Zone에서 백업하기
- Secure Zone에서 사용 가능한 Agent가 별도로 존재하지 않기 때문에, 프록시 구성을 하던가 해서 Agent를 설치, 실행해야 함.


## 참고 URL
&lt;a href=&quot;https://guide.ncloud-docs.com/docs/storage-storage-5-1&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://guide.ncloud-docs.com/docs/storage-storage-5-1.html&lt;/a&gt;
</description>
            <pubDate>Fri, 28 Oct 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/storage/ncloud_storage_backup_guide.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/storage/ncloud_storage_backup_guide.html</guid>
            
            <category>backup</category>
            
            <category>database</category>
            
            
        </item>
        
        <item>
            <title>설치형 PostgreSQL DB 설치, 접속 가이드 | Ubuntu</title>
            <description>## 개요
PostgreSQL은 설치 후에 DB에 접속할 때 MySQL등 다른 DB와 달리 [**OS와 PostgreSQL 양쪽에 동일한 계정을 생성**]하거나 
[**인증관련 환경설정 파일을 수정**]해야 접속할 수 있는데 이 두가지 방법을 Ubuntu에서 적용하는 과정을 정리해보겠습니다.

## 테스트 환경
- Ubuntu 20.04
- PostgreSQL 13.8


## 설치
기본 배포 버전으로 테스트할 수도 있지만, 여기서는 **PostgreSQL 13**을 설치해보겠습니다.

### 리포지토리 설정 파일 생성
[**PostgreSQL 13**] 설치 정보가 담겨 있는 리포지토리 설정 파일을 생성합니다.

``` bash
~# sh -c &apos;echo &quot;deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&apos;
~# wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-01.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

### PostgreSQL 설치
[**PostgreSQL 13**]을 설치합니다.

``` bash
~# apt-get update
~# apt-get -y install postgresql-13
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-02.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-03.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}


### PostgreSQL 시작
``` bash
~# systemctl enable postgresql
~# systemctl start postgresql
~# systemctl status postgresql
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-04.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

## DB 접속
기본 마스터 계정인 [**postgres**]로 [**PostgreSQL**]에 접속합니다.

``` bash
~# sudo -i -u postgres
~$ psql
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-05.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}


### 유저 생성
테스트용 계정 [testuser]를 생성하고 [**\du**] 명령으로 생성된 유저를 확인합니다.

``` sql
postgres=# create user testuser password &apos;test123$&apos; superuser;
postgres=# \du 
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-06.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

### DB 생성 및 소유자 지정
테스트용 DB를 생성하고 소유자를 지정한 후에 [**\l**] 명령으로 생성된 DB를 확인합니다.  

``` sql
postgres=# create database testdb owner testuser;
postgres=# \l
postgres=# \q
~$ exit
``` 
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-07.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}


### 접속 시도 - 인증 오류
위에서 생성한 계정으로 접속을 시도해보면, 아래와 같이 인증 오류가 발생합니다.  
다음 단계에서는 이 인증 오류를 **해결하는 방법 2가지**를 확인해보겠습니다.

``` bash
~# psql -U testuser -d testdb
psql: error: connection to server on socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot; failed: FATAL:  Peer authentication failed for user &quot;testuser&quot;
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-08.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}


## 인증 오류 해결
인증 문제를 해결하고 [**PostgreSQL**]에 접속하는 방법은 크게 2가지가 있는데 한가지씩 확인해보겠습니다.

### 방법1 - 동일한 계정 생성
우선, 처음에 DB 생성 후에 추가했던 [**PostgreSQL**] 유저 계정과 동일한 계정을 OS 사용자에도 추가하는 방법입니다.  

아래와 같이 DB 유저와 동일한 [testuser] 계정을 생성하겠습니다.
``` bash
~# adduser testuser
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-12.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

- **DB 접속**  
새로 생성한 [**testuser**] 계정으로 전환한 후에 접속을 해보면 문제 없이 접속되는 것을 확인할 수 있습니다.

``` bash
~# sudo -i -u testuser
~$ psql -U testuser -d testdb
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-13.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}


### 방법2 - 인증 설정 파일 수정
다음으로 인증 관련 설정 파일인 [**pg_hba.conf**] 파일을 수정해서 접속하는 방법을 확인해보겠습니다.  

[**pg_hba.conf**] 파일을 열어보면 아래와 같이 DB 접근 설정 항목들이 있는데 [**local**]과 IPv4용 [**host**]의 METHOD 항목을 보시면 각각 [**peer**]과 [**md5**]으로 설정되어 있는 것을 확인할 수 있습니다.  

{% include callout-v2.html type=&quot;info&quot; level=&quot;2&quot; content=&quot;여기서 [**peer**]는 운영 체제에서 클라이언트의 운영 체제 사용자 이름과 요청한 데이터베이스 사용자 이름이 일치하는지 확인하는 옵션입니다.&quot; %}

이 항목을 [**md5**]로 수정합니다.

``` bash
~# vi /etc/postgresql/13/main/pg_hba.conf
```

- 수정 전
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-09.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

- 수정 후
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-10.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}

- **DB 재시작 후 접속**  
설정 파일을 수정했으면 [**PostgreSQL**]을 재시작하고 다시 접속해봅니다.  
이번에는 문제 없이 패스워드를 입력하고 접속 가능한 것을 확인할 수 있습니다.

``` bash
~# systemctl restart postgresql
~# psql -U testuser -d testdb
```
{% include image.html file=&quot;database/ncloud-database-postgresql-install-connect-guide-ubuntu-11.png&quot; width=&quot;840&quot; alt=&quot;Ncloud VPC환경에서 설치형 PostgreSQL DB를 설치하고, 접속하는 방법&quot; caption=&quot;&quot; %}






## 기본 배포 버전 설치
[**PostgreSQL 13**] 버전이 아닌 기본 배포 버전을 설치하려면 아래와 같은 방법으로 설치를 하면 됩니다.  
2022년 10월 16일 기준 기본 배포 버전은 [12.8]입니다.
나머지 인증 방법은 위에서 설명한 내용과 동일합니다.

``` bash
~# apt-get update
~# apt-get -y install postgresql
~# systemctl enable postgresql
~# systemctl start postgresql
~# systemctl status postgresql
```


## pg_hba.conf 파일 Method 옵션
[**pg_hba.conf**] 설정 파일의 Method 옵션 리스트는 아래와 같습니다.

- **trust**: 무조건 접속을 허용합니다. 이 방법을 사용하면 PostgreSQL 데이터베이스 서버에 연결할 수 있는 모든 사람이 암호나 다른 인증 없이 원하는 PostgreSQL 사용자로 로그인할 수 있습니다. 

- **reject**: 무조건 연결을 거부합니다. 이것은 그룹에서 특정 호스트 를 &quot; 필터링 &quot;reject 하는 데 유용합니다. 예를 들어 한 라인은 특정 호스트의 연결을 차단할 수 있고 나중 라인은 특정 네트워크의 나머지 호스트가 연결할 수 있도록 합니다.

- **scram-sha-256**: SCRAM-SHA-256 인증을 수행해 사용자의 암호를 확인합니다. 

- **md5**: SCRAM-SHA-256 또는 MD5 인증을 수행해 사용자의 암호를 확인합니다. 

- **password**: 클라이언트가 인증을 위해 암호화되지 않은 암호를 제공하도록 요구합니다. 암호는 네트워크를 통해 일반 텍스트로 전송되기 때문에 신뢰할 수 없는 네트워크에서는 사용해서는 안 됩니다. 

- **gss**: GSSAPI를 사용해 사용자를 인증합니다. 이것은 TCP/IP 연결에만 사용할 수 있습니다. GSSAPI 암호화와 함께 사용할 수 있습니다.

- **sspi**: SSPI를 사용해 사용자를 인증합니다. 이것은 Windows에서만 사용할 수 있습니다. 

- **ident**: 클라이언트의 ident 서버에 연결하여 클라이언트의 운영 체제 사용자 이름을 얻고 요청한 데이터베이스 사용자 이름과 일치하는지 확인합니다. ID 인증은 TCP/IP 연결에서만 사용할 수 있습니다. 로컬 연결에 대해 지정된 경우 피어 인증이 대신 사용됩니다. 

- **peer**: 운영 체제에서 클라이언트의 운영 체제 사용자 이름을 가져와서 요청한 데이터베이스 사용자 이름과 일치하는지 확인합니다. 이것은 로컬 연결에만 사용할 수 있습니다. 

- **lda**: LDAP 서버를 사용해 인증 합니다. 

- **radius**: RADIUS 서버를 사용해 인증합니다. 

- **cert**: SSL 클라이언트 인증서를 사용해 인증합니다. 

- **pam**: 운영 체제에서 제공하는 PAM(Pluggable Authentication Modules) 서비스를 사용해 인증합니다. 

- **bsd**: 운영 체제에서 제공하는 BSD 인증 서비스를 사용해 인증합니다. 



## 참고 URL
1. PostgreSQL OS별 다운로드 안내
	- &lt;a href=&quot;https://www.postgresql.org/download/linux/&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.postgresql.org/download/linux/&lt;/a&gt;

2. PostgreSQL pg_hba.conf 파일 옵션 안내
	- &lt;a href=&quot;https://www.postgresql.org/docs/current/auth-pg-hba-conf.html&quot; target=&quot;_blank&quot; style=&quot;word-break:break-all;&quot;&gt;https://www.postgresql.org/docs/current/auth-pg-hba-conf.html&lt;/a&gt;



</description>
            <pubDate>Fri, 07 Oct 2022 00:00:00 +0900</pubDate>
            <link>https://docs.3rdeyesys.com/database/ncloud-database-postgresql-install-connect-guide-ubuntu.html</link>
            <guid isPermaLink="true">https://docs.3rdeyesys.com/database/ncloud-database-postgresql-install-connect-guide-ubuntu.html</guid>
            
            <category>database</category>
            
            <category>vpc</category>
            
            
        </item>
        
    </channel>
</rss>
